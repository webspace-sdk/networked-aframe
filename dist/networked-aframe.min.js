!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(21),n(44),n(45),n(43)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ByteBuffer=e.Builder=e.Encoding=e.createLong=e.Long=e.isLittleEndian=e.float64=e.float32=e.int32=e.SIZE_PREFIX_LENGTH=e.FILE_IDENTIFIER_LENGTH=e.SIZEOF_INT=e.SIZEOF_SHORT=void 0;var i=n(2);Object.defineProperty(e,"SIZEOF_SHORT",{enumerable:!0,get:function(){return i.SIZEOF_SHORT}});var r=n(2);Object.defineProperty(e,"SIZEOF_INT",{enumerable:!0,get:function(){return r.SIZEOF_INT}});var o=n(2);Object.defineProperty(e,"FILE_IDENTIFIER_LENGTH",{enumerable:!0,get:function(){return o.FILE_IDENTIFIER_LENGTH}});var s=n(2);Object.defineProperty(e,"SIZE_PREFIX_LENGTH",{enumerable:!0,get:function(){return s.SIZE_PREFIX_LENGTH}});var a=n(19);Object.defineProperty(e,"int32",{enumerable:!0,get:function(){return a.int32}}),Object.defineProperty(e,"float32",{enumerable:!0,get:function(){return a.float32}}),Object.defineProperty(e,"float64",{enumerable:!0,get:function(){return a.float64}}),Object.defineProperty(e,"isLittleEndian",{enumerable:!0,get:function(){return a.isLittleEndian}});var u=n(5);Object.defineProperty(e,"Long",{enumerable:!0,get:function(){return u.Long}}),Object.defineProperty(e,"createLong",{enumerable:!0,get:function(){return u.createLong}});var c=n(16);Object.defineProperty(e,"Encoding",{enumerable:!0,get:function(){return c.Encoding}});var h=n(10);Object.defineProperty(e,"Builder",{enumerable:!0,get:function(){return h.Builder}});var d=n(6);Object.defineProperty(e,"ByteBuffer",{enumerable:!0,get:function(){return d.ByteBuffer}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIZE_PREFIX_LENGTH=e.FILE_IDENTIFIER_LENGTH=e.SIZEOF_INT=e.SIZEOF_SHORT=void 0,e.SIZEOF_SHORT=2,e.SIZEOF_INT=4,e.FILE_IDENTIFIER_LENGTH=4,e.SIZE_PREFIX_LENGTH=4},function(t,e,n){"use strict";function i(t){return 1<<t}function r(t){return t>=-128&&t<=127?c.BitWidth.WIDTH8:t>=-32768&&t<=32767?c.BitWidth.WIDTH16:t>=-2147483648&&t<=2147483647?c.BitWidth.WIDTH32:c.BitWidth.WIDTH64}function o(t){return t===Math.fround(t)?c.BitWidth.WIDTH32:c.BitWidth.WIDTH64}function s(t){return t<=255?c.BitWidth.WIDTH8:t<=65535?c.BitWidth.WIDTH16:t<=4294967295?c.BitWidth.WIDTH32:c.BitWidth.WIDTH64}function a(t){return 1===t?c.BitWidth.WIDTH8:2===t?c.BitWidth.WIDTH16:4===t?c.BitWidth.WIDTH32:c.BitWidth.WIDTH64}function u(t,e){return~t+1&e-1}Object.defineProperty(e,"__esModule",{value:!0}),e.paddingSize=e.fromByteWidth=e.uwidth=e.fwidth=e.iwidth=e.toByteWidth=void 0;var c=n(4);e.toByteWidth=i,e.iwidth=r,e.fwidth=o,e.uwidth=s,e.fromByteWidth=a,e.paddingSize=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BitWidth=void 0;var n;!function(t){t[t.WIDTH8=0]="WIDTH8",t[t.WIDTH16=1]="WIDTH16",t[t.WIDTH32=2]="WIDTH32",t[t.WIDTH64=3]="WIDTH64"}(n=e.BitWidth||(e.BitWidth={}))},function(t,e){"use strict";function n(t,e){return i.create(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Long=e.createLong=void 0,e.createLong=n;var i=function(){function t(t,e){this.low=0|t,this.high=0|e}return t.create=function(e,n){return 0==e&&0==n?t.ZERO:new t(e,n)},t.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},t.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},t.ZERO=new t(0,0),t}();e.Long=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ByteBuffer=void 0;var i=n(2),r=n(5),o=n(19),s=n(16),a=function(){function t(t){this.bytes_=t,this.position_=0}return t.allocate=function(e){return new t(new Uint8Array(e))},t.prototype.clear=function(){this.position_=0},t.prototype.bytes=function(){return this.bytes_},t.prototype.position=function(){return this.position_},t.prototype.setPosition=function(t){this.position_=t},t.prototype.capacity=function(){return this.bytes_.length},t.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},t.prototype.readUint8=function(t){return this.bytes_[t]},t.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},t.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},t.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},t.prototype.readUint32=function(t){return this.readInt32(t)>>>0},t.prototype.readInt64=function(t){return new r.Long(this.readInt32(t),this.readInt32(t+4))},t.prototype.readUint64=function(t){return new r.Long(this.readUint32(t),this.readUint32(t+4))},t.prototype.readFloat32=function(t){return o.int32[0]=this.readInt32(t),o.float32[0]},t.prototype.readFloat64=function(t){return o.int32[o.isLittleEndian?0:1]=this.readInt32(t),o.int32[o.isLittleEndian?1:0]=this.readInt32(t+4),o.float64[0]},t.prototype.writeInt8=function(t,e){this.bytes_[t]=e},t.prototype.writeUint8=function(t,e){this.bytes_[t]=e},t.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},t.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},t.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},t.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},t.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},t.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},t.prototype.writeFloat32=function(t,e){o.float32[0]=e,this.writeInt32(t,o.int32[0])},t.prototype.writeFloat64=function(t,e){o.float64[0]=e,this.writeInt32(t,o.int32[o.isLittleEndian?0:1]),this.writeInt32(t+4,o.int32[o.isLittleEndian?1:0])},t.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<i.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+i.SIZEOF_INT+e));return t},t.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},t.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},t.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),r="",o=0;if(t+=i.SIZEOF_INT,e===s.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;o<n;){var a=void 0,u=this.readUint8(t+o++);if(u<192)a=u;else{var c=this.readUint8(t+o++);if(u<224)a=(31&u)<<6|63&c;else{var h=this.readUint8(t+o++);if(u<240)a=(15&u)<<12|(63&c)<<6|63&h;else{var d=this.readUint8(t+o++);a=(7&u)<<18|(63&c)<<12|(63&h)<<6|63&d}}}a<65536?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode((a>>10)+55296,(1023&a)+56320))}return r},t.prototype.__union_with_string=function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)},t.prototype.__indirect=function(t){return t+this.readInt32(t)},t.prototype.__vector=function(t){return t+this.readInt32(t)+i.SIZEOF_INT},t.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},t.prototype.__has_identifier=function(t){if(t.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var e=0;e<i.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+i.SIZEOF_INT+e))return!1;return!0},t.prototype.createLong=function(t,e){return r.Long.create(t,e)},t.prototype.createScalarList=function(t,e){for(var n=[],i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n},t.prototype.createObjList=function(t,e){for(var n=[],i=0;i<e;++i){var r=t(i);null!==r&&n.push(r.unpack())}return n},t}();e.ByteBuffer=a},function(t,e,n){"use strict";function i(t){var e=t.byteLength;if(e<3)throw"Buffer needs to be bigger than 3";var n=new DataView(t),i=n.getUint8(e-1),o=n.getUint8(e-2),s=(0,r.fromByteWidth)(i),a=e-i-2;return new h(n,a,s,o,"/")}Object.defineProperty(e,"__esModule",{value:!0}),e.Reference=e.toReference=void 0;var r=n(3),o=n(9),s=n(8),a=n(18),u=n(11),c=n(4);e.toReference=i;var h=function(){function t(t,e,n,i,r){this.dataView=t,this.offset=e,this.parentWidth=n,this.packedType=i,this.path=r,this._length=-1,this.byteWidth=1<<(3&i),this.valueType=i>>2}return t.prototype.isNull=function(){return this.valueType===o.ValueType.NULL},t.prototype.isNumber=function(){return(0,s.isNumber)(this.valueType)||(0,s.isIndirectNumber)(this.valueType)},t.prototype.isFloat=function(){return o.ValueType.FLOAT===this.valueType||o.ValueType.INDIRECT_FLOAT===this.valueType},t.prototype.isInt=function(){return this.isNumber()&&!this.isFloat()},t.prototype.isString=function(){return o.ValueType.STRING===this.valueType||o.ValueType.KEY===this.valueType},t.prototype.isBool=function(){return o.ValueType.BOOL===this.valueType},t.prototype.isBlob=function(){return o.ValueType.BLOB===this.valueType},t.prototype.isVector=function(){return(0,s.isAVector)(this.valueType)},t.prototype.isMap=function(){return o.ValueType.MAP===this.valueType},t.prototype.boolValue=function(){return this.isBool()?(0,a.readInt)(this.dataView,this.offset,this.parentWidth)>0:null},t.prototype.intValue=function(){return this.valueType===o.ValueType.INT?(0,a.readInt)(this.dataView,this.offset,this.parentWidth):this.valueType===o.ValueType.UINT?(0,a.readUInt)(this.dataView,this.offset,this.parentWidth):this.valueType===o.ValueType.INDIRECT_INT?(0,a.readInt)(this.dataView,(0,a.indirect)(this.dataView,this.offset,this.parentWidth),(0,r.fromByteWidth)(this.byteWidth)):this.valueType===o.ValueType.INDIRECT_UINT?(0,a.readUInt)(this.dataView,(0,a.indirect)(this.dataView,this.offset,this.parentWidth),(0,r.fromByteWidth)(this.byteWidth)):null},t.prototype.floatValue=function(){return this.valueType===o.ValueType.FLOAT?(0,a.readFloat)(this.dataView,this.offset,this.parentWidth):this.valueType===o.ValueType.INDIRECT_FLOAT?(0,a.readFloat)(this.dataView,(0,a.indirect)(this.dataView,this.offset,this.parentWidth),(0,r.fromByteWidth)(this.byteWidth)):null},t.prototype.numericValue=function(){return this.floatValue()||this.intValue()},t.prototype.stringValue=function(){if(this.valueType===o.ValueType.STRING||this.valueType===o.ValueType.KEY){var t=(0,a.indirect)(this.dataView,this.offset,this.parentWidth);return(0,u.fromUTF8Array)(new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+t,this.length()))}return null},t.prototype.blobValue=function(){if(this.isBlob()){var t=(0,a.indirect)(this.dataView,this.offset,this.parentWidth);return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+t,this.length())}return null},t.prototype.get=function(e){var n=this.length();if(Number.isInteger(e)&&(0,s.isAVector)(this.valueType)){if(e>=n||e<0)throw"Key: [".concat(e,"] is not applicable on ").concat(this.path," of ").concat(this.valueType," length: ").concat(n);var i=(0,a.indirect)(this.dataView,this.offset,this.parentWidth),o=i+e*this.byteWidth,u=this.dataView.getUint8(i+n*this.byteWidth+e);if((0,s.isTypedVector)(this.valueType)){var h=(0,s.typedVectorElementType)(this.valueType);u=(0,s.packedType)(h,c.BitWidth.WIDTH8)}else if((0,s.isFixedTypedVector)(this.valueType)){var h=(0,s.fixedTypedVectorElementType)(this.valueType);u=(0,s.packedType)(h,c.BitWidth.WIDTH8)}return new t(this.dataView,o,(0,r.fromByteWidth)(this.byteWidth),u,"".concat(this.path,"[").concat(e,"]"))}if("string"==typeof e){var d=(0,a.keyIndex)(e,this.dataView,this.offset,this.parentWidth,this.byteWidth,n);if(null!==d)return(0,a.valueForIndexWithKey)(d,e,this.dataView,this.offset,this.parentWidth,this.byteWidth,n,this.path)}throw"Key [".concat(e,"] is not applicable on ").concat(this.path," of ").concat(this.valueType)},t.prototype.length=function(){var t;if(this._length>-1)return this._length;if((0,s.isFixedTypedVector)(this.valueType))this._length=(0,s.fixedTypedVectorElementSize)(this.valueType);else if(this.valueType===o.ValueType.BLOB||this.valueType===o.ValueType.MAP||(0,s.isAVector)(this.valueType))this._length=Number((0,a.readUInt)(this.dataView,(0,a.indirect)(this.dataView,this.offset,this.parentWidth)-this.byteWidth,(0,r.fromByteWidth)(this.byteWidth)));else if(this.valueType===o.ValueType.NULL)this._length=0;else if(this.valueType===o.ValueType.STRING){var e=(0,a.indirect)(this.dataView,this.offset,this.parentWidth),n=this.byteWidth;for(t=(0,a.readUInt)(this.dataView,e-n,(0,r.fromByteWidth)(this.byteWidth));0!==this.dataView.getInt8(e+t);)n<<=1,t=(0,a.readUInt)(this.dataView,e-n,(0,r.fromByteWidth)(this.byteWidth));this._length=t}else if(this.valueType===o.ValueType.KEY){var e=(0,a.indirect)(this.dataView,this.offset,this.parentWidth);for(t=1;0!==this.dataView.getInt8(e+t);)t++;this._length=t}else this._length=1;return this._length},t.prototype.toObject=function(){var t=this.length();if(this.isVector()){for(var e=[],n=0;n<t;n++)e.push(this.get(n).toObject());return e}if(this.isMap()){for(var e={},n=0;n<t;n++){var i=(0,a.keyForIndex)(n,this.dataView,this.offset,this.parentWidth,this.byteWidth);e[i]=(0,a.valueForIndexWithKey)(n,i,this.dataView,this.offset,this.parentWidth,this.byteWidth,t,this.path).toObject()}return e}return this.isNull()?null:this.isBool()?this.boolValue():this.isNumber()?this.numericValue():this.blobValue()||this.stringValue()},t}();e.Reference=h},function(t,e,n){"use strict";function i(t){return t===y.ValueType.BOOL||t<=y.ValueType.FLOAT}function r(t){return t>=y.ValueType.INT&&t<=y.ValueType.FLOAT}function o(t){return t>=y.ValueType.INDIRECT_INT&&t<=y.ValueType.INDIRECT_FLOAT}function s(t){return t===y.ValueType.BOOL||t>=y.ValueType.INT&&t<=y.ValueType.STRING}function a(t){return t===y.ValueType.VECTOR_BOOL||t>=y.ValueType.VECTOR_INT&&t<=y.ValueType.VECTOR_STRING_DEPRECATED}function u(t){return t>=y.ValueType.VECTOR_INT2&&t<=y.ValueType.VECTOR_FLOAT4}function c(t){return a(t)||u(t)||t===y.ValueType.VECTOR}function h(t,e){if(0===e)return t-y.ValueType.INT+y.ValueType.VECTOR_INT;if(2===e)return t-y.ValueType.INT+y.ValueType.VECTOR_INT2;if(3===e)return t-y.ValueType.INT+y.ValueType.VECTOR_INT3;if(4===e)return t-y.ValueType.INT+y.ValueType.VECTOR_INT4;throw"Unexpected length "+e}function d(t){return t-y.ValueType.VECTOR_INT+y.ValueType.INT}function f(t){return(t-y.ValueType.VECTOR_INT2)%3+y.ValueType.INT}function p(t){return((t-y.ValueType.VECTOR_INT2)/3>>0)+2}function l(t,e){return e|t<<2}Object.defineProperty(e,"__esModule",{value:!0}),e.packedType=e.fixedTypedVectorElementSize=e.fixedTypedVectorElementType=e.typedVectorElementType=e.toTypedVector=e.isAVector=e.isFixedTypedVector=e.isTypedVector=e.isTypedVectorElement=e.isIndirectNumber=e.isNumber=e.isInline=void 0;var y=n(9);e.isInline=i,e.isNumber=r,e.isIndirectNumber=o,e.isTypedVectorElement=s,e.isTypedVector=a,e.isFixedTypedVector=u,e.isAVector=c,e.toTypedVector=h,e.typedVectorElementType=d,e.fixedTypedVectorElementType=f,e.fixedTypedVectorElementSize=p,e.packedType=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValueType=void 0;var n;!function(t){t[t.NULL=0]="NULL",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t[t.FLOAT=3]="FLOAT",t[t.KEY=4]="KEY",t[t.STRING=5]="STRING",t[t.INDIRECT_INT=6]="INDIRECT_INT",t[t.INDIRECT_UINT=7]="INDIRECT_UINT",t[t.INDIRECT_FLOAT=8]="INDIRECT_FLOAT",t[t.MAP=9]="MAP",t[t.VECTOR=10]="VECTOR",t[t.VECTOR_INT=11]="VECTOR_INT",t[t.VECTOR_UINT=12]="VECTOR_UINT",t[t.VECTOR_FLOAT=13]="VECTOR_FLOAT",t[t.VECTOR_KEY=14]="VECTOR_KEY",t[t.VECTOR_STRING_DEPRECATED=15]="VECTOR_STRING_DEPRECATED",t[t.VECTOR_INT2=16]="VECTOR_INT2",t[t.VECTOR_UINT2=17]="VECTOR_UINT2",t[t.VECTOR_FLOAT2=18]="VECTOR_FLOAT2",t[t.VECTOR_INT3=19]="VECTOR_INT3",t[t.VECTOR_UINT3=20]="VECTOR_UINT3",t[t.VECTOR_FLOAT3=21]="VECTOR_FLOAT3",t[t.VECTOR_INT4=22]="VECTOR_INT4",t[t.VECTOR_UINT4=23]="VECTOR_UINT4",t[t.VECTOR_FLOAT4=24]="VECTOR_FLOAT4",t[t.BLOB=25]="BLOB",t[t.BOOL=26]="BOOL",t[t.VECTOR_BOOL=36]="VECTOR_BOOL"}(n=e.ValueType||(e.ValueType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Builder=void 0;var i=n(6),r=n(2),o=n(5),s=function(){function t(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;var e;e=t?t:1024,this.bb=i.ByteBuffer.allocate(e),this.space=e}return t.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null},t.prototype.forceDefaults=function(t){this.force_defaults=t},t.prototype.dataBuffer=function(){return this.bb},t.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},t.prototype.prep=function(e,n){e>this.minalign&&(this.minalign=e);for(var i=~(this.bb.capacity()-this.space+n)+1&e-1;this.space<i+e+n;){var r=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)},t.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},t.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},t.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},t.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},t.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},t.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},t.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},t.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},t.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},t.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},t.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},t.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},t.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},t.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},t.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},t.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},t.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},t.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},t.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},t.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},t.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},t.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},t.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},t.prototype.slot=function(t){null!==this.vtable&&(this.vtable[t]=this.offset())},t.prototype.offset=function(){return this.bb.capacity()-this.space},t.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,r=i.ByteBuffer.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r},t.prototype.addOffset=function(t){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-t+r.SIZEOF_INT)},t.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},t.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);var i=2;this.addInt16(t-this.object_start);var o=(n+i)*r.SIZEOF_SHORT;this.addInt16(o);var s=0,a=this.space;t:for(e=0;e<this.vtables.length;e++){var u=this.bb.capacity()-this.vtables[e];if(o==this.bb.readInt16(u)){for(var c=r.SIZEOF_SHORT;c<o;c+=r.SIZEOF_SHORT)if(this.bb.readInt16(a+c)!=this.bb.readInt16(u+c))continue t;s=this.vtables[e];break}}return s?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,s-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},t.prototype.finish=function(t,e,n){var i=n?r.SIZE_PREFIX_LENGTH:0;if(e){var o=e;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+i),o.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var s=r.FILE_IDENTIFIER_LENGTH-1;s>=0;s--)this.writeInt8(o.charCodeAt(s))}this.prep(this.minalign,r.SIZEOF_INT+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},t.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},t.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,i=n-this.bb.readInt32(n),r=0!=this.bb.readInt16(i+e);if(!r)throw new Error("FlatBuffers: field "+e+" must be set")},t.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(r.SIZEOF_INT,t*e),this.prep(n,t*e)},t.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},t.prototype.createSharedString=function(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);var e=this.createString(t);return this.string_maps.set(t,e),e},t.prototype.createString=function(t){if(!t)return 0;var e;if(t instanceof Uint8Array)e=t;else{e=[];for(var n=0;n<t.length;){var i=void 0,r=t.charCodeAt(n++);if(r<55296||r>=56320)i=r;else{var o=t.charCodeAt(n++);i=(r<<10)+o+-56613888}i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var n=0,s=this.space,a=this.bb.bytes();n<e.length;n++)a[s++]=e[n];return this.endVector()},t.prototype.createLong=function(t,e){return o.Long.create(t,e)},t.prototype.createObjectOffset=function(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)},t.prototype.createObjectOffsetList=function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];if(null===i)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(i))}return e},t.prototype.createStructOffsetList=function(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()},t}();e.Builder=s},function(t,e){"use strict";function n(t){var e=new TextDecoder;return e.decode(t)}function i(t){var e=new TextEncoder;return e.encode(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.toUTF8Array=e.fromUTF8Array=void 0,e.fromUTF8Array=n,e.toUTF8Array=i},function(t,e,n){"use strict";e.__esModule=!0,e.FullUpdateDataT=e.FullUpdateData=void 0;var i=n(1),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsFullUpdateData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsFullUpdateData=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.creator=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.creatorLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.creatorArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.template=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.persistent=function(){var t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},t.prototype.parentId=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},t.startFullUpdateData=function(t){t.startObject(4)},t.addCreator=function(t,e){t.addFieldOffset(0,e,0)},t.createCreatorVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startCreatorVector=function(t,e){t.startVector(1,e,1)},t.addTemplate=function(t,e){t.addFieldOffset(1,e,0)},t.addPersistent=function(t,e){t.addFieldInt8(2,+e,0)},t.addParentId=function(t,e){t.addFieldOffset(3,e,0)},t.endFullUpdateData=function(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e},t.createFullUpdateData=function(e,n,i,r,o){return t.startFullUpdateData(e),t.addCreator(e,n),t.addTemplate(e,i),t.addPersistent(e,r),t.addParentId(e,o),t.endFullUpdateData(e)},t.prototype.unpack=function(){return new o(this.bb.createScalarList(this.creator.bind(this),this.creatorLength()),this.template(),this.persistent(),this.parentId())},t.prototype.unpackTo=function(t){t.creator=this.bb.createScalarList(this.creator.bind(this),this.creatorLength()),t.template=this.template(),t.persistent=this.persistent(),t.parentId=this.parentId()},t}();e.FullUpdateData=r;var o=function(){function t(t,e,n,i){void 0===t&&(t=[]),void 0===e&&(e=null),void 0===n&&(n=!1),void 0===i&&(i=null),this.creator=t,this.template=e,this.persistent=n,this.parentId=i}return t.prototype.pack=function(t){var e=r.createCreatorVector(t,this.creator),n=null!==this.template?t.createString(this.template):0,i=null!==this.parentId?t.createString(this.parentId):0;return r.createFullUpdateData(t,e,n,this.persistent,i)},t}();e.FullUpdateDataT=o},function(t,e,n){"use strict";function i(t,e){switch(o[t]){case"NONE":return null;case"SceneUpdate":return e(new d.SceneUpdate);case"CustomOp":return e(new s.CustomOp);case"DocSyncRequest":return e(new a.DocSyncRequest);case"DocSyncResponse":return e(new u.DocSyncResponse);case"DocUpdate":return e(new c.DocUpdate);case"PresenceUpdate":return e(new h.PresenceUpdate);default:return null}}function r(t,e,n){switch(o[t]){case"NONE":return null;case"SceneUpdate":return e(n,new d.SceneUpdate);case"CustomOp":return e(n,new s.CustomOp);case"DocSyncRequest":return e(n,new a.DocSyncRequest);case"DocSyncResponse":return e(n,new u.DocSyncResponse);case"DocUpdate":return e(n,new c.DocUpdate);case"PresenceUpdate":return e(n,new h.PresenceUpdate);default:return null}}e.__esModule=!0,e.unionListToMessageData=e.unionToMessageData=e.MessageData=void 0;var o,s=n(22),a=n(24),u=n(25),c=n(26),h=n(28),d=n(29);!function(t){t[t.NONE=0]="NONE",t[t.SceneUpdate=1]="SceneUpdate",t[t.CustomOp=2]="CustomOp",t[t.DocSyncRequest=3]="DocSyncRequest",t[t.DocSyncResponse=4]="DocSyncResponse",t[t.DocUpdate=5]="DocUpdate",t[t.PresenceUpdate=6]="PresenceUpdate"}(o=e.MessageData||(e.MessageData={})),e.unionToMessageData=i,e.unionListToMessageData=r},function(t,e,n){"use strict";e.__esModule=!0,e.UpdateOpT=e.UpdateOp=void 0;var i=n(1),r=n(12),o=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsUpdateOp=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsUpdateOp=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.networkId=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.fullUpdateData=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?(t||new r.FullUpdateData).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null},t.prototype.owner=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.ownerLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.ownerArray=function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.lastOwnerTime=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint64(this.bb_pos+t):this.bb.createLong(0,0)},t.prototype.components=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.componentsLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.componentsArray=function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startUpdateOp=function(t){t.startObject(5)},t.addNetworkId=function(t,e){t.addFieldOffset(0,e,0)},t.addFullUpdateData=function(t,e){t.addFieldOffset(1,e,0)},t.addOwner=function(t,e){t.addFieldOffset(2,e,0)},t.createOwnerVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startOwnerVector=function(t,e){t.startVector(1,e,1)},t.addLastOwnerTime=function(t,e){t.addFieldInt64(3,e,t.createLong(0,0))},t.addComponents=function(t,e){t.addFieldOffset(4,e,0)},t.createComponentsVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startComponentsVector=function(t,e){t.startVector(1,e,1)},t.endUpdateOp=function(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,12),e},t.prototype.unpack=function(){return new s(this.networkId(),null!==this.fullUpdateData()?this.fullUpdateData().unpack():null,this.bb.createScalarList(this.owner.bind(this),this.ownerLength()),this.lastOwnerTime(),this.bb.createScalarList(this.components.bind(this),this.componentsLength()))},t.prototype.unpackTo=function(t){t.networkId=this.networkId(),t.fullUpdateData=null!==this.fullUpdateData()?this.fullUpdateData().unpack():null,t.owner=this.bb.createScalarList(this.owner.bind(this),this.ownerLength()),t.lastOwnerTime=this.lastOwnerTime(),t.components=this.bb.createScalarList(this.components.bind(this),this.componentsLength())},t}();e.UpdateOp=o;var s=function(){function t(t,e,n,r,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=i.createLong(0,0)),void 0===o&&(o=[]),this.networkId=t,this.fullUpdateData=e,this.owner=n,this.lastOwnerTime=r,this.components=o}return t.prototype.pack=function(t){var e=null!==this.networkId?t.createString(this.networkId):0,n=null!==this.fullUpdateData?this.fullUpdateData.pack(t):0,i=o.createOwnerVector(t,this.owner),r=o.createComponentsVector(t,this.components);return o.startUpdateOp(t),o.addNetworkId(t,e),o.addFullUpdateData(t,n),o.addOwner(t,i),o.addLastOwnerTime(t,this.lastOwnerTime),o.addComponents(t,r),o.endUpdateOp(t)},t}();e.UpdateOpT=s},function(t,e){"use strict";function n(t){return new Promise(function(e,n){for(var i=t;i&&i.components&&!i.components.networked;)i=i.parentNode;return i&&i.components&&i.components.networked?void(i.hasLoaded?e(i):i.addEventListener("instantiated",function(){e(i)},{once:!0})):n(new Error("Entity does not have and is not a child of an entity with the [networked] component "))})}t.exports.whenEntityLoaded=function(t,e){t.hasLoaded&&e(),t.addEventListener("loaded",function(){e()})},t.exports.createHtmlNodeFromString=function(t){var e=document.createElement("div");e.innerHTML=t;
var n=e.firstChild;return n},t.exports.getCreator=function(t){var e=t.components;return e.hasOwnProperty("networked")?e.networked.data.creator:null},t.exports.getNetworkOwner=function(t){var e=t.components;return e.hasOwnProperty("networked")?e.networked.data.owner:null},t.exports.getNetworkId=function(t){var e=t.components;return e.hasOwnProperty("networked")?e.networked.data.networkId:null},t.exports.now=function(){return Date.now()},t.exports.createNetworkId=function(){return Math.random().toString(36).substring(2,9)},t.exports.getNetworkedEntity=n,t.exports.takeOwnership=function(t){for(var e=t;e&&e.components&&!e.components.networked;)e=e.parentNode;if(!e||!e.components||!e.components.networked)throw new Error("Entity does not have and is not a child of an entity with the [networked] component ");return e.components.networked.takeOwnership()},t.exports.isMine=function(t){for(var e=t;e&&e.components&&!e.components.networked;)e=e.parentNode;if(!e||!e.components||!e.components.networked)throw new Error("Entity does not have and is not a child of an entity with the [networked] component ");return e.components.networked.data.owner===NAF.clientId},t.exports.almostEqualVec3=function(t,e,n){return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n&&Math.abs(t.z-e.z)<n},t.exports.hexToBytes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.length=t.length/2;for(var n=0,i=0;n<t.length;n+=2,i+=1)e[i]=parseInt(t.substr(n,2),16);return e};var i=[];t.exports.bytesToHex=function(t){i.length=0;for(var e=0;e<t.length;e++){var n=t[e]<0?t[e]+256:t[e];i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Encoding=void 0;var n;!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(n=e.Encoding||(e.Encoding={}))},function(t,e,n){"use strict";function i(){return new s.Builder}function r(t){return(0,a.toReference)(t).toObject()}function o(t,e,n,i,r){void 0===e&&(e=2048),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===r&&(r=!0);var o=new s.Builder(e>0?e:2048,n,i,r);return o.add(t),o.finish()}Object.defineProperty(e,"__esModule",{value:!0}),e.encode=e.toObject=e.builder=e.toReference=void 0;var s=n(30),a=n(7),u=n(7);Object.defineProperty(e,"toReference",{enumerable:!0,get:function(){return u.toReference}}),e.builder=i,e.toObject=r,e.encode=o},function(t,e,n){"use strict";function i(t,e,n){if(t.byteLength<=e+n||0!==(e&(0,p.toByteWidth)(n)-1))throw"Bad offset: "+e+", width: "+n}function r(t,e,n){return n<2?n<1?t.getInt8(e):t.getInt16(e,!0):n<3?t.getInt32(e,!0):void 0===t.setBigInt64?new b.Long(t.getUint32(e,!0),t.getUint32(e+4,!0)):t.getBigInt64(e,!0)}function o(t,e,n){return n<2?n<1?t.getUint8(e):t.getUint16(e,!0):n<3?t.getUint32(e,!0):void 0===t.getBigUint64?new b.Long(t.getUint32(e,!0),t.getUint32(e+4,!0)):t.getBigUint64(e,!0)}function s(t,e,n){if(n<f.BitWidth.WIDTH32)throw"Bad width: "+n;return n===f.BitWidth.WIDTH32?t.getFloat32(e,!0):t.getFloat64(e,!0)}function a(t,e,n){var i=Number(o(t,e,n));return e-i}function u(t,e,n,i,r,s){for(var u=(0,l.toUTF8Array)(t),h=a(e,n,i)-3*r,d=(0,p.fromByteWidth)(r),f=h-Number(o(e,h,d)),y=Number(o(e,h+r,d)),b=0,v=s-1;b<=v;){var w=v+b>>1,g=c(u,w,e,f,y);if(0===g)return w;g<0?v=w-1:b=w+1}return null}function c(t,e,n,i,r){for(var s=i+e*r,a=s-Number(o(n,s,(0,p.fromByteWidth)(r))),u=0;u<t.length;u++){var c=t[u]-n.getUint8(a+u);if(0!==c)return c}return 0===n.getUint8(a+t.length)?0:-1}function h(t,e,n,i,r,o,s,u){var c=a(n,i,r),h=c+t*o,d=n.getUint8(c+s*o+t);return new y.Reference(n,h,(0,p.fromByteWidth)(o),d,"".concat(u,"/").concat(e))}function d(t,e,n,i,r){for(var s=a(e,n,i)-3*r,u=(0,p.fromByteWidth)(r),c=s-Number(o(e,s,u)),h=o(e,s+r,u),d=c+t*h,f=d-Number(o(e,d,(0,p.fromByteWidth)(h))),y=0;0!==e.getUint8(f+y);)y++;return(0,l.fromUTF8Array)(new Uint8Array(e.buffer,e.byteOffset+f,y))}Object.defineProperty(e,"__esModule",{value:!0}),e.keyForIndex=e.valueForIndexWithKey=e.diffKeys=e.keyIndex=e.indirect=e.readFloat=e.readUInt=e.readInt=e.validateOffset=void 0;var f=n(4),p=n(3),l=n(11),y=n(7),b=n(5);e.validateOffset=i,e.readInt=r,e.readUInt=o,e.readFloat=s,e.indirect=a,e.keyIndex=u,e.diffKeys=c,e.valueForIndexWithKey=h,e.keyForIndex=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isLittleEndian=e.float64=e.float32=e.int32=void 0,e.int32=new Int32Array(2),e.float32=new Float32Array(e.int32.buffer),e.float64=new Float64Array(e.int32.buffer),e.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0]},function(t,e){"use strict";function n(t,e){throw new TypeError("unexpected tag 0x"+t.toString(16)+" ("+e+" expected)")}function i(t){return 127&t}function r(t){return 0===(128&t)}function o(t){return 127&t}function s(t){return 224|31&t}function a(t){return 224==(224&t)}function u(t){return t-256}function c(t){return 160|31&t}function h(t){return 160==(224&t)}function d(t){return 31&t}function f(t){return 144|15&t}function p(t){return 144==(240&t)}function l(t){return 15&t}function y(t){return 128|15&t}function b(t){return 128==(240&t)}function v(t){return 15&t}function w(){function t(t){if(n+t>e.byteLength){var i=new Uint8Array(Math.max(n+t,e.byteLength+64));i.set(new Uint8Array(e.buffer.slice(0,n))),e=new DataView(i.buffer)}}var e=new DataView(new ArrayBuffer(64)),n=0;return{put:function(i){t(i.byteLength),new Uint8Array(e.buffer).set(new Uint8Array(i),n),n+=i.byteLength},putI8:function(i){t(1),e.setInt8(n,i),++n},putI16:function(i){t(2),e.setInt16(n,i),n+=2},putI32:function(i){t(4),e.setInt32(n,i),n+=4},putI64:function(i){t(8);var r=i<0;r&&(i=-i);var o=i/4294967296|0,s=i%4294967296|0;r&&(s=~s+1|0,o=0===s?~o+1|0:~o),e.setUint32(n,o),e.setUint32(n+4,s),n+=8},putUi8:function(i){t(1),e.setUint8(n,i),++n},putUi16:function(i){t(2),e.setUint16(n,i),n+=2},putUi32:function(i){t(4),e.setUint32(n,i),n+=4},putUi64:function(i){t(8),e.setUint32(n,i/4294967296|0),e.setUint32(n+4,i%4294967296),n+=8},putF:function(i){t(8),e.setFloat64(n,i),n+=8},ui8array:function(){return new Uint8Array(e.buffer.slice(0,n))}}}function g(t){var e=ArrayBuffer.isView(t)?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(t),n=0;return{peek:function(){return e.getUint8(n)},get:function(t){n+=t;var i=e.byteOffset;return e.buffer.slice(i+n-t,i+n)},getI8:function(){return e.getInt8(n++)},getI16:function(){return n+=2,e.getInt16(n-2)},getI32:function(){return n+=4,e.getInt32(n-4)},getI64:function(){n+=8;var t=e.getInt32(n-8),i=e.getUint32(n-4);return 4294967296*t+i},getUi8:function(){return e.getUint8(n++)},getUi16:function(){return n+=2,e.getUint16(n-2)},getUi32:function(){return n+=4,e.getUint32(n-4)},getUi64:function(){n+=8;var t=e.getUint32(n-8),i=e.getUint32(n-4);return 4294967296*t+i},getF32:function(){return n+=4,e.getFloat32(n-4)},getF64:function(){return n+=8,e.getFloat64(n-8)}}}function _(t,e,n){var i=e.byteLength;if(i<=255)t.putUi8(n),t.putUi8(i);else if(i<=65535)t.putUi8(n+1),t.putUi16(i);else{if(!(i<=4294967295))throw new RangeError("length limit exceeded");t.putUi8(n+2),t.putUi32(i)}t.put(e)}function m(t){var e=t.getUi8(),i=void 0;switch(e){case 192:i=0;break;case 196:case 217:i=t.getUi8();break;case 197:case 218:i=t.getUi16();break;case 198:case 219:i=t.getUi32();break;default:h(e)||n(e,"bytes or string"),i=d(e)}return t.get(i)}function T(t,e){e<16?t.putUi8(f(e)):k(t,220,e)}function I(t,e){var n=t.getUi8(),i=p(n)?l(n):U(t,n,220,"array");if(null!=e&&i!==e)throw new Error("invalid array header size "+i);return i}function E(t,e){e<16?t.putUi8(y(e)):k(t,222,e)}function O(t,e){var n=t.getUi8(),i=b(n)?v(n):U(t,n,222,"map");if(null!=e&&i!==e)throw new Error("invalid map header size "+i);return i}function k(t,e,n){if(n<=65535)t.putUi8(e),t.putUi16(n);else{if(!(n<=4294967295))throw new RangeError("length limit exceeded");t.putUi8(e+1),t.putUi32(n)}}function U(t,e,i,r){switch(e){case 192:return 0;case i:return t.getUi16();case i+1:return t.getUi32();default:n(e,r)}}function N(t){return{encHeader:T,decHeader:I,enc:function(e,n){T(e,n.length),n.forEach(function(n){return t.enc(e,n)})},dec:function(e){for(var n=[],i=I(e);i>0;--i)n.push(t.dec(e));return n}}}function S(t,e){return{encHeader:E,decHeader:O,enc:function(n,i){var r=Object.keys(i);E(n,r.length),r.forEach(function(r){t.enc(n,r),e.enc(n,i[r])})},dec:function(n){for(var i={},r=O(n);r>0;--r){var o=t.dec(n);i[o]=e.dec(n)}return i}}}function F(t){var e=Object.keys(t);return function(n,i){E(n,e.length),e.forEach(function(e){var r=t[e];q.enc(n,Number(e)),r[1].enc(n,i[r[0]])})}}function V(t){return function(e){for(var n={},i=O(e);i>0;--i){var r=t[q.dec(e)];r?n[r[0]]=r[1].dec(e):H.dec(e)}return n}}function D(t){return{enc:F(t),dec:V(t)}}function A(t){return function(e,n){T(e,2);var i=t.ordinalOf(n);q.enc(e,i),t[i].enc(e,n)}}function C(t){return function(e){I(e,2);var n=t[q.dec(e)];if(!n)throw new TypeError("invalid union type");return n.dec(e)}}function L(t){return{enc:A(t),dec:C(t)}}function R(t){for(var e=t.length,n=new Uint8Array(4*e),i=0,r=0,o=void 0;r<e;)o=t.charCodeAt(r++),55296===(64512&o)&&(o=(o<<10)+t.charCodeAt(r++)-56613888),o<128?n[i++]=o:o<2048?(n[i++]=192+(o>>6),n[i++]=128+(63&o)):o<65536?(n[i++]=224+(o>>12),n[i++]=128+(o>>6&63),n[i++]=128+(63&o)):(n[i++]=240+(o>>18),n[i++]=128+(o>>12&63),n[i++]=128+(o>>6&63),n[i++]=128+(63&o));return n.buffer.slice(0,i)}function P(t){return new TextDecoder("utf-8").decode(t)}function B(t){switch("undefined"==typeof t?"undefined":j(t)){case"undefined":return G;case"boolean":return z;case"number":return isFinite(t)&&Math.floor(t)===t?t<0?q:Z:K;case"string":return X;case"object":return null===t?G:Array.isArray(t)?J:t instanceof Uint8Array||t instanceof ArrayBuffer?Y:t instanceof Date?Q:$;default:throw new TypeError("unsupported type "+("undefined"==typeof t?"undefined":j(t)))}}function M(t){switch(t){case 192:return G;case 194:case 195:return z;case 208:case 209:case 210:case 211:return q;case 204:case 205:case 206:case 207:return Z;case 202:case 203:return K;case 196:case 197:case 198:return Y;case 217:case 218:case 219:return X;case 220:case 221:return J;case 222:case 223:return $;case 214:case 215:case 199:return Q;default:if(r(t)||a(t))return q;if(h(t))return X;if(p(t))return J;if(b(t))return $;throw new TypeError("unsupported tag "+t)}}function W(t,e){var n=w();return(e||H).enc(n,t),n.ui8array()}function x(t,e){return(e||H).dec(g(t))}var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var H={enc:function(t,e){B(e).enc(t,e)},dec:function(t){return M(t.peek()).dec(t)}},G={enc:function(t,e){t.putUi8(192)},dec:function(t){var e=t.getUi8();return 192!==e&&n(e,"nil"),null}},z={enc:function(t,e){t.putUi8(e?195:194)},dec:function(t){var e=t.getUi8();switch(e){case 192:case 194:return!1;case 195:return!0;default:n(e,"bool")}}},q={enc:function(t,e){-128<=e&&e<=127?e>=0?t.putUi8(i(e)):e>-32?t.putUi8(s(e)):(t.putUi8(208),t.putUi8(e)):-32768<=e&&e<=32767?(t.putI8(209),t.putI16(e)):-2147483648<=e&&e<=2147483647?(t.putI8(210),t.putI32(e)):(t.putI8(211),t.putI64(e))},dec:function(t){var e=t.getUi8();if(r(e))return o(e);if(a(e))return u(e);switch(e){case 192:return 0;case 208:return t.getI8();case 209:return t.getI16();case 210:return t.getI32();case 211:return t.getI64();case 204:return t.getUi8();case 205:return t.getUi16();case 206:return t.getUi32();case 207:return t.getUi64();default:n(e,"int")}}},Z={enc:function(t,e){if(e<0)throw new Error("not an uint: "+e);e<=127?t.putUi8(i(e)):e<=255?(t.putUi8(204),t.putUi8(e)):e<=65535?(t.putUi8(205),t.putUi16(e)):e<=4294967295?(t.putUi8(206),t.putUi32(e)):(t.putUi8(207),t.putUi64(e))},dec:function(t){var e=q.dec(t);if(e<0)throw new RangeError("uint underflow");return e}},K={enc:function(t,e){t.putUi8(203),t.putF(e)},dec:function(t){var e=t.getUi8();switch(e){case 192:return 0;case 202:return t.getF32();case 203:return t.getF64();default:n(e,"float")}}},Y={enc:function(t,e){_(t,e,196)},dec:m},X={enc:function(t,e){var n=R(e);n.byteLength<32?(t.putUi8(c(n.byteLength)),t.put(n)):_(t,n,217)},dec:function(t){return P(m(t))}},Q={enc:function(t,e){var n=e.getTime();t.putUi8(199),t.putUi8(12),t.putI8(-1),t.putUi32(n%1e3*1e6),t.putI64(n/1e3)},dec:function(t){var e=t.getUi8();switch(e){case 214:if(t.getI8()===-1)return new Date(1e3*t.getUi32());break;case 215:if(t.getI8()===-1){var i=t.getUi32(),r=t.getUi32();return new Date(1e3*(r+4294967296*(3&i))+i/4e6)}break;case 199:if(12===t.getUi8()&&t.getI8()===-1){var o=t.getUi32(),s=t.getI64();return new Date(1e3*s+o/1e6)}}n(e,"time")}},J=N(H),$=S(H,H);e.Any=H,e.Arr=J,e.Bool=z,e.Bytes=Y,e.Float=K,e.Int=q,e.Map=$,e.Nil=G,e.Str=X,e.Struct=D,e.Time=Q,e.TypedArr=N,e.TypedMap=S,e.Uint=Z,e.Union=L,e.decode=x,e.encode=W,e.structDecoder=V,e.structEncoder=F,e.unionDecoder=C,e.unionEncoder=A},function(t,e,n){"use strict";var i=n(46),r=n(15),o=n(38),s=n(41),a=n(40),u=n(39),c=n(42),h={};h.app="",h.room="",h.clientId="",h.options=i,h.utils=r,h.log=new o,h.schemas=new s,h.version="0.6.1",h.adapters=new c;var d=new a,f=new u(d);h.connection=f,h.entities=d,t.exports=window.NAF=h},function(t,e,n){"use strict";e.__esModule=!0,e.CustomOpT=e.CustomOp=void 0;var i=n(1),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsCustomOp=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsCustomOp=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.dataType=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.payload=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.payloadLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.payloadArray=function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startCustomOp=function(t){t.startObject(2)},t.addDataType=function(t,e){t.addFieldOffset(0,e,0)},t.addPayload=function(t,e){t.addFieldOffset(1,e,0)},t.createPayloadVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startPayloadVector=function(t,e){t.startVector(1,e,1)},t.endCustomOp=function(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e},t.createCustomOp=function(e,n,i){return t.startCustomOp(e),t.addDataType(e,n),t.addPayload(e,i),t.endCustomOp(e)},t.prototype.unpack=function(){return new o(this.dataType(),this.bb.createScalarList(this.payload.bind(this),this.payloadLength()))},t.prototype.unpackTo=function(t){t.dataType=this.dataType(),t.payload=this.bb.createScalarList(this.payload.bind(this),this.payloadLength())},t}();e.CustomOp=r;var o=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=[]),this.dataType=t,this.payload=e}return t.prototype.pack=function(t){var e=null!==this.dataType?t.createString(this.dataType):0,n=r.createPayloadVector(t,this.payload);return r.createCustomOp(t,e,n)},t}();e.CustomOpT=o},function(t,e,n){"use strict";e.__esModule=!0,e.DeleteOpT=e.DeleteOp=void 0;var i=n(1),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsDeleteOp=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsDeleteOp=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.networkId=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.startDeleteOp=function(t){t.startObject(1)},t.addNetworkId=function(t,e){t.addFieldOffset(0,e,0)},t.endDeleteOp=function(t){var e=t.endObject();return t.requiredField(e,4),e},t.createDeleteOp=function(e,n){return t.startDeleteOp(e),t.addNetworkId(e,n),t.endDeleteOp(e)},t.prototype.unpack=function(){return new o(this.networkId())},t.prototype.unpackTo=function(t){t.networkId=this.networkId()},t}();e.DeleteOp=r;var o=function(){function t(t){void 0===t&&(t=null),this.networkId=t}return t.prototype.pack=function(t){var e=null!==this.networkId?t.createString(this.networkId):0;return r.createDeleteOp(t,e)},t}();e.DeleteOpT=o},function(t,e,n){"use strict";e.__esModule=!0,e.DocSyncRequestT=e.DocSyncRequest=void 0;var i=n(1),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsDocSyncRequest=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsDocSyncRequest=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.encodedStateVector=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.encodedStateVectorLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.encodedStateVectorArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startDocSyncRequest=function(t){t.startObject(1)},t.addEncodedStateVector=function(t,e){t.addFieldOffset(0,e,0)},t.createEncodedStateVectorVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startEncodedStateVectorVector=function(t,e){t.startVector(1,e,1)},t.endDocSyncRequest=function(t){var e=t.endObject();return e},t.createDocSyncRequest=function(e,n){return t.startDocSyncRequest(e),t.addEncodedStateVector(e,n),t.endDocSyncRequest(e)},t.prototype.unpack=function(){return new o(this.bb.createScalarList(this.encodedStateVector.bind(this),this.encodedStateVectorLength()))},t.prototype.unpackTo=function(t){t.encodedStateVector=this.bb.createScalarList(this.encodedStateVector.bind(this),this.encodedStateVectorLength())},t}();e.DocSyncRequest=r;var o=function(){function t(t){void 0===t&&(t=[]),this.encodedStateVector=t}return t.prototype.pack=function(t){var e=r.createEncodedStateVectorVector(t,this.encodedStateVector);return r.createDocSyncRequest(t,e)},t}();e.DocSyncRequestT=o},function(t,e,n){"use strict";e.__esModule=!0,e.DocSyncResponseT=e.DocSyncResponse=void 0;var i=n(1),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsDocSyncResponse=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsDocSyncResponse=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.update=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.updateLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.updateArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startDocSyncResponse=function(t){t.startObject(1)},t.addUpdate=function(t,e){t.addFieldOffset(0,e,0)},t.createUpdateVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startUpdateVector=function(t,e){t.startVector(1,e,1)},t.endDocSyncResponse=function(t){var e=t.endObject();return e},t.createDocSyncResponse=function(e,n){return t.startDocSyncResponse(e),t.addUpdate(e,n),t.endDocSyncResponse(e)},t.prototype.unpack=function(){return new o(this.bb.createScalarList(this.update.bind(this),this.updateLength()))},t.prototype.unpackTo=function(t){t.update=this.bb.createScalarList(this.update.bind(this),this.updateLength())},t}();e.DocSyncResponse=r;var o=function(){function t(t){void 0===t&&(t=[]),this.update=t}return t.prototype.pack=function(t){var e=r.createUpdateVector(t,this.update);return r.createDocSyncResponse(t,e)},t}();e.DocSyncResponseT=o},function(t,e,n){"use strict";e.__esModule=!0,e.DocUpdateT=e.DocUpdate=void 0;var i=n(1),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsDocUpdate=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsDocUpdate=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.update=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.updateLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.updateArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startDocUpdate=function(t){t.startObject(1)},t.addUpdate=function(t,e){t.addFieldOffset(0,e,0)},t.createUpdateVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startUpdateVector=function(t,e){t.startVector(1,e,1)},t.endDocUpdate=function(t){var e=t.endObject();return e},t.createDocUpdate=function(e,n){return t.startDocUpdate(e),t.addUpdate(e,n),t.endDocUpdate(e)},t.prototype.unpack=function(){return new o(this.bb.createScalarList(this.update.bind(this),this.updateLength()))},t.prototype.unpackTo=function(t){t.update=this.bb.createScalarList(this.update.bind(this),this.updateLength())},t}();e.DocUpdate=r;var o=function(){function t(t){void 0===t&&(t=[]),this.update=t}return t.prototype.pack=function(t){var e=r.createUpdateVector(t,this.update);return r.createDocUpdate(t,e)},t}();e.DocUpdateT=o},function(t,e,n){"use strict";e.__esModule=!0,e.MessageT=e.Message=void 0;var i=n(1),r=n(13),o=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsMessage=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsMessage=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.dataType=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):r.MessageData.NONE},t.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__union(t,this.bb_pos+e):null},t.startMessage=function(t){t.startObject(2)},t.addDataType=function(t,e){t.addFieldInt8(0,e,r.MessageData.NONE)},t.addData=function(t,e){t.addFieldOffset(1,e,0)},t.endMessage=function(t){var e=t.endObject();return t.requiredField(e,6),e},t.finishMessageBuffer=function(t,e){t.finish(e)},t.finishSizePrefixedMessageBuffer=function(t,e){t.finish(e,void 0,!0)},t.createMessage=function(e,n,i){return t.startMessage(e),t.addDataType(e,n),t.addData(e,i),t.endMessage(e)},t.prototype.unpack=function(){var t=this;return new s(this.dataType(),function(){var e=(0,r.unionToMessageData)(t.dataType(),t.data.bind(t));return null===e?null:e.unpack()}())},t.prototype.unpackTo=function(t){var e=this;t.dataType=this.dataType(),t.data=function(){var t=(0,r.unionToMessageData)(e.dataType(),e.data.bind(e));return null===t?null:t.unpack()}()},t}();e.Message=o;var s=function(){function t(t,e){void 0===t&&(t=r.MessageData.NONE),void 0===e&&(e=null),this.dataType=t,this.data=e}return t.prototype.pack=function(t){var e=t.createObjectOffset(this.data);return o.createMessage(t,this.dataType,e)},t}();e.MessageT=s},function(t,e,n){"use strict";e.__esModule=!0,e.PresenceUpdateT=e.PresenceUpdate=void 0;var i=n(1),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsPresenceUpdate=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsPresenceUpdate=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.update=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.updateLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.updateArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startPresenceUpdate=function(t){t.startObject(1)},t.addUpdate=function(t,e){t.addFieldOffset(0,e,0)},t.createUpdateVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startUpdateVector=function(t,e){t.startVector(1,e,1)},t.endPresenceUpdate=function(t){var e=t.endObject();return e},t.createPresenceUpdate=function(e,n){return t.startPresenceUpdate(e),t.addUpdate(e,n),t.endPresenceUpdate(e)},t.prototype.unpack=function(){return new o(this.bb.createScalarList(this.update.bind(this),this.updateLength()))},t.prototype.unpackTo=function(t){t.update=this.bb.createScalarList(this.update.bind(this),this.updateLength())},t}();e.PresenceUpdate=r;var o=function(){function t(t){void 0===t&&(t=[]),this.update=t}return t.prototype.pack=function(t){var e=r.createUpdateVector(t,this.update);return r.createPresenceUpdate(t,e)},t}();e.PresenceUpdateT=o},function(t,e,n){"use strict";e.__esModule=!0,e.SceneUpdateT=e.SceneUpdate=void 0;var i=n(1),r=n(23),o=n(14),s=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsSceneUpdate=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsSceneUpdate=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.updates=function(t,e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new o.UpdateOp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.updatesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.deletes=function(t,e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new r.DeleteOp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.deletesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startSceneUpdate=function(t){t.startObject(2)},t.addUpdates=function(t,e){t.addFieldOffset(0,e,0)},t.createUpdatesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startUpdatesVector=function(t,e){t.startVector(4,e,4)},t.addDeletes=function(t,e){t.addFieldOffset(1,e,0)},t.createDeletesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startDeletesVector=function(t,e){t.startVector(4,e,4)},t.endSceneUpdate=function(t){var e=t.endObject();return e},t.createSceneUpdate=function(e,n,i){return t.startSceneUpdate(e),t.addUpdates(e,n),t.addDeletes(e,i),t.endSceneUpdate(e)},t.prototype.unpack=function(){return new a(this.bb.createObjList(this.updates.bind(this),this.updatesLength()),this.bb.createObjList(this.deletes.bind(this),this.deletesLength()))},t.prototype.unpackTo=function(t){t.updates=this.bb.createObjList(this.updates.bind(this),this.updatesLength()),t.deletes=this.bb.createObjList(this.deletes.bind(this),this.deletesLength())},t}();e.SceneUpdate=s;var a=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.updates=t,this.deletes=e}return t.prototype.pack=function(t){var e=s.createUpdatesVector(t,t.createObjectOffsetList(this.updates)),n=s.createDeletesVector(t,t.createObjectOffsetList(this.deletes));return s.createSceneUpdate(t,e,n)},t}();e.SceneUpdateT=a},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.Builder=void 0;var r=n(4),o=n(3),s=n(11),a=n(9),u=n(8),c=n(31),h=function(){function t(t,e,n,i){void 0===t&&(t=2048),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=!0),this.dedupStrings=e,this.dedupKeys=n,this.dedupKeyVectors=i,this.stack=[],this.stackPointers=[],this.offset=0,this.finished=!1,this.stringLookup={},this.keyLookup={},this.keyVectorLookup={},this.indirectIntLookup={},this.indirectUIntLookup={},this.indirectFloatLookup={},this.buffer=new ArrayBuffer(t>0?t:2048),this.view=new DataView(this.buffer)}return t.prototype.align=function(t){var e=(0,o.toByteWidth)(t);return this.offset+=(0,o.paddingSize)(this.offset,e),e},t.prototype.computeOffset=function(t){for(var e=this.offset+t,n=this.buffer.byteLength,i=n;n<e;)n<<=1;if(i<n){var r=this.buffer;this.buffer=new ArrayBuffer(n),this.view=new DataView(this.buffer),new Uint8Array(this.buffer).set(new Uint8Array(r),0)}return e},t.prototype.pushInt=function(t,e){if(e===r.BitWidth.WIDTH8)this.view.setInt8(this.offset,t);else if(e===r.BitWidth.WIDTH16)this.view.setInt16(this.offset,t,!0);else if(e===r.BitWidth.WIDTH32)this.view.setInt32(this.offset,t,!0);else{if(e!==r.BitWidth.WIDTH64)throw"Unexpected width: ".concat(e," for value: ").concat(t);this.view.setBigInt64(this.offset,BigInt(t),!0)}},t.prototype.pushUInt=function(t,e){if(e===r.BitWidth.WIDTH8)this.view.setUint8(this.offset,t);else if(e===r.BitWidth.WIDTH16)this.view.setUint16(this.offset,t,!0);else if(e===r.BitWidth.WIDTH32)this.view.setUint32(this.offset,t,!0);else{if(e!==r.BitWidth.WIDTH64)throw"Unexpected width: ".concat(e," for value: ").concat(t);this.view.setBigUint64(this.offset,BigInt(t),!0)}},t.prototype.writeInt=function(t,e){var n=this.computeOffset(e);this.pushInt(t,(0,o.fromByteWidth)(e)),this.offset=n},t.prototype.writeUInt=function(t,e){var n=this.computeOffset(e);this.pushUInt(t,(0,o.fromByteWidth)(e)),this.offset=n},t.prototype.writeBlob=function(t){var e=t.byteLength,n=(0,o.uwidth)(e),i=this.align(n);this.writeUInt(e,i);var r=this.offset,s=this.computeOffset(e);new Uint8Array(this.buffer).set(new Uint8Array(t),r),this.stack.push(this.offsetStackValue(r,a.ValueType.BLOB,n)),this.offset=s},t.prototype.writeString=function(t){if(this.dedupStrings&&Object.prototype.hasOwnProperty.call(this.stringLookup,t))return void this.stack.push(this.stringLookup[t]);var e=(0,s.toUTF8Array)(t),n=e.length,i=(0,o.uwidth)(n),r=this.align(i);this.writeUInt(n,r);var u=this.offset,c=this.computeOffset(n+1);new Uint8Array(this.buffer).set(e,u);var h=this.offsetStackValue(u,a.ValueType.STRING,i);this.stack.push(h),this.dedupStrings&&(this.stringLookup[t]=h),this.offset=c},t.prototype.writeKey=function(t){if(this.dedupKeys&&Object.prototype.hasOwnProperty.call(this.keyLookup,t))return void this.stack.push(this.keyLookup[t]);var e=(0,s.toUTF8Array)(t),n=e.length,i=this.computeOffset(n+1);new Uint8Array(this.buffer).set(e,this.offset);var o=this.offsetStackValue(this.offset,a.ValueType.KEY,r.BitWidth.WIDTH8);
this.stack.push(o),this.dedupKeys&&(this.keyLookup[t]=o),this.offset=i},t.prototype.writeStackValue=function(t,e){var n=this.computeOffset(e);if(t.isOffset()){var i=this.offset-t.offset;if(!(8===e||BigInt(i)<BigInt(1)<<BigInt(8*e)))throw"Unexpected size ".concat(e,". This might be a bug. Please create an issue https://github.com/google/flatbuffers/issues/new");this.writeUInt(i,e)}else t.writeToBuffer(e);this.offset=n},t.prototype.integrityCheckOnValueAddition=function(){if(this.finished)throw"Adding values after finish is prohibited";if(0!==this.stackPointers.length&&this.stackPointers[this.stackPointers.length-1].isVector===!1&&this.stack[this.stack.length-1].type!==a.ValueType.KEY)throw"Adding value to a map before adding a key is prohibited"},t.prototype.integrityCheckOnKeyAddition=function(){if(this.finished)throw"Adding values after finish is prohibited";if(0===this.stackPointers.length||this.stackPointers[this.stackPointers.length-1].isVector)throw"Adding key before starting a map is prohibited"},t.prototype.startVector=function(){this.stackPointers.push({stackPosition:this.stack.length,isVector:!0})},t.prototype.startMap=function(t){void 0===t&&(t=!1),this.stackPointers.push({stackPosition:this.stack.length,isVector:!1,presorted:t})},t.prototype.endVector=function(t){var e=this.stack.length-t.stackPosition,n=this.createVector(t.stackPosition,e,1);this.stack.splice(t.stackPosition,e),this.stack.push(n)},t.prototype.endMap=function(t){t.presorted||this.sort(t);for(var e="",n=t.stackPosition;n<this.stack.length;n+=2)e+=",".concat(this.stack[n].offset);var i=this.stack.length-t.stackPosition>>1;this.dedupKeyVectors&&!Object.prototype.hasOwnProperty.call(this.keyVectorLookup,e)&&(this.keyVectorLookup[e]=this.createVector(t.stackPosition,i,2));var r=this.dedupKeyVectors?this.keyVectorLookup[e]:this.createVector(t.stackPosition,i,2),o=this.createVector(t.stackPosition+1,i,2,r);this.stack.splice(t.stackPosition,i<<1),this.stack.push(o)},t.prototype.sort=function(t){function e(t,e){if(t.type!==a.ValueType.KEY||e.type!==a.ValueType.KEY)throw"Stack values are not keys ".concat(t," | ").concat(e,". Check if you combined [addKey] with add... method calls properly.");var n,i,r=0;do{if(n=s.getUint8(t.offset+r),i=s.getUint8(e.offset+r),i<n)return!0;if(n<i)return!1;r+=1}while(0!==n&&0!==i);return!1}function n(t,e,n){if(e!==n){var i=t[e],r=t[e+1];t[e]=t[n],t[e+1]=t[n+1],t[n]=i,t[n+1]=r}}function i(){for(var i=t.stackPosition;i<u.length;i+=2){for(var r=i,o=i+2;o<u.length;o+=2)e(u[r],u[o])&&(r=o);r!==i&&n(u,r,i)}}function r(t,e){if(t.type!==a.ValueType.KEY||e.type!==a.ValueType.KEY)throw"Stack values are not keys ".concat(t," | ").concat(e,". Check if you combined [addKey] with add... method calls properly.");if(t.offset===e.offset)return!1;var n,i,r=0;do{if(n=s.getUint8(t.offset+r),i=s.getUint8(e.offset+r),n<i)return!0;if(i<n)return!1;r+=1}while(0!==n&&0!==i);return!1}function o(t,e){if(t<e){var i=t+2*(e-t>>2),s=u[i],a=t,c=e;do{for(;r(u[a],s);)a+=2;for(;r(s,u[c]);)c-=2;a<=c&&(n(u,a,c),a+=2,c-=2)}while(a<=c);o(t,c),o(a,e)}}for(var s=this.view,u=this.stack,c=!0,h=t.stackPosition;h<this.stack.length-2;h+=2)if(e(this.stack[h],this.stack[h+2])){c=!1;break}c||(this.stack.length-t.stackPosition>40?o(t.stackPosition,this.stack.length-2):i())},t.prototype.end=function(){if(!(this.stackPointers.length<1)){var t=this.stackPointers.pop();t.isVector?this.endVector(t):this.endMap(t)}},t.prototype.createVector=function(t,e,n,i){void 0===i&&(i=null);var r=(0,o.uwidth)(e),s=1;if(null!==i){var c=i.elementWidth(this.offset,0);c>r&&(r=c),s+=2}for(var h=a.ValueType.KEY,d=null===i,f=t;f<this.stack.length;f+=n){var c=this.stack[f].elementWidth(this.offset,f+s);c>r&&(r=c),f===t?(h=this.stack[f].type,d=d&&(0,u.isTypedVectorElement)(h)):h!==this.stack[f].type&&(d=!1)}var p=this.align(r),l=d&&(0,u.isNumber)(h)&&e>=2&&e<=4;null!==i&&(this.writeStackValue(i,p),this.writeUInt(1<<i.width,p)),l||this.writeUInt(e,p);for(var y=this.offset,f=t;f<this.stack.length;f+=n)this.writeStackValue(this.stack[f],p);if(!d)for(var f=t;f<this.stack.length;f+=n)this.writeUInt(this.stack[f].storedPackedType(),1);if(null!==i)return this.offsetStackValue(y,a.ValueType.MAP,r);if(d){var b=(0,u.toTypedVector)(h,l?e:0);return this.offsetStackValue(y,b,r)}return this.offsetStackValue(y,a.ValueType.VECTOR,r)},t.prototype.nullStackValue=function(){return new c.StackValue(this,a.ValueType.NULL,r.BitWidth.WIDTH8)},t.prototype.boolStackValue=function(t){return new c.StackValue(this,a.ValueType.BOOL,r.BitWidth.WIDTH8,t)},t.prototype.intStackValue=function(t){return new c.StackValue(this,a.ValueType.INT,(0,o.iwidth)(t),t)},t.prototype.uintStackValue=function(t){return new c.StackValue(this,a.ValueType.UINT,(0,o.uwidth)(t),t)},t.prototype.floatStackValue=function(t){return new c.StackValue(this,a.ValueType.FLOAT,(0,o.fwidth)(t),t)},t.prototype.offsetStackValue=function(t,e,n){return new c.StackValue(this,e,n,null,t)},t.prototype.finishBuffer=function(){if(1!==this.stack.length)throw"Stack has to be exactly 1, but it is ".concat(this.stack.length,". You have to end all started vectors and maps before calling [finish]");var t=this.stack[0],e=this.align(t.elementWidth(this.offset,0));this.writeStackValue(t,e),this.writeUInt(t.storedPackedType(),1),this.writeUInt(e,1),this.finished=!0},t.prototype.add=function(t){if(this.integrityCheckOnValueAddition(),"undefined"==typeof t)throw"You need to provide a value";if(null===t)this.stack.push(this.nullStackValue());else if("boolean"==typeof t)this.stack.push(this.boolStackValue(t));else if("bigint"==typeof t)this.stack.push(this.intStackValue(t));else if("number"==typeof t)Number.isInteger(t)?this.stack.push(this.intStackValue(t)):this.stack.push(this.floatStackValue(t));else if(ArrayBuffer.isView(t))this.writeBlob(t.buffer);else if("string"==typeof t||t instanceof String)this.writeString(t);else if(Array.isArray(t)){this.startVector();for(var e=0;e<t.length;e++)this.add(t[e]);this.end()}else{if("object"!==("undefined"==typeof t?"undefined":i(t)))throw"Unexpected value input ".concat(t);var n=Object.getOwnPropertyNames(t).sort();this.startMap(!0);for(var e=0;e<n.length;e++){var r=n[e];this.addKey(r),this.add(t[r])}this.end()}},t.prototype.finish=function(){this.finished||this.finishBuffer();var t=this.buffer.slice(0,this.offset);return new Uint8Array(t)},t.prototype.isFinished=function(){return this.finished},t.prototype.addKey=function(t){this.integrityCheckOnKeyAddition(),this.writeKey(t)},t.prototype.addInt=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.integrityCheckOnValueAddition(),!e)return void this.stack.push(this.intStackValue(t));if(n&&Object.prototype.hasOwnProperty.call(this.indirectIntLookup,t))return void this.stack.push(this.indirectIntLookup[t]);var i=this.intStackValue(t),r=this.align(i.width),o=this.computeOffset(r),s=this.offset;i.writeToBuffer(r);var u=this.offsetStackValue(s,a.ValueType.INDIRECT_INT,i.width);this.stack.push(u),this.offset=o,n&&(this.indirectIntLookup[t]=u)},t.prototype.addUInt=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.integrityCheckOnValueAddition(),!e)return void this.stack.push(this.uintStackValue(t));if(n&&Object.prototype.hasOwnProperty.call(this.indirectUIntLookup,t))return void this.stack.push(this.indirectUIntLookup[t]);var i=this.uintStackValue(t),r=this.align(i.width),o=this.computeOffset(r),s=this.offset;i.writeToBuffer(r);var u=this.offsetStackValue(s,a.ValueType.INDIRECT_UINT,i.width);this.stack.push(u),this.offset=o,n&&(this.indirectUIntLookup[t]=u)},t.prototype.addFloat=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.integrityCheckOnValueAddition(),!e)return void this.stack.push(this.floatStackValue(t));if(n&&Object.prototype.hasOwnProperty.call(this.indirectFloatLookup,t))return void this.stack.push(this.indirectFloatLookup[t]);var i=this.floatStackValue(t),r=this.align(i.width),o=this.computeOffset(r),s=this.offset;i.writeToBuffer(r);var u=this.offsetStackValue(s,a.ValueType.INDIRECT_FLOAT,i.width);this.stack.push(u),this.offset=o,n&&(this.indirectFloatLookup[t]=u)},t}();e.Builder=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StackValue=void 0;var i=n(4),r=n(3),o=n(9),s=n(8),a=function(){function t(t,e,n,i,r){void 0===i&&(i=null),void 0===r&&(r=0),this.builder=t,this.type=e,this.width=n,this.value=i,this.offset=r}return t.prototype.elementWidth=function(t,e){if((0,s.isInline)(this.type))return this.width;for(var n=0;n<4;n++){var i=1<<n,o=t+(0,r.paddingSize)(t,i)+e*i,a=o-this.offset,u=(0,r.uwidth)(a);if(1<<u===i)return u}throw"Element is unknown. Size: ".concat(t," at index: ").concat(e,". This might be a bug. Please create an issue https://github.com/google/flatbuffers/issues/new")},t.prototype.writeToBuffer=function(t){var e=this.builder.computeOffset(t);if(this.type===o.ValueType.FLOAT)this.width===i.BitWidth.WIDTH32?this.builder.view.setFloat32(this.builder.offset,this.value,!0):this.builder.view.setFloat64(this.builder.offset,this.value,!0);else if(this.type===o.ValueType.INT){var n=(0,r.fromByteWidth)(t);this.builder.pushInt(this.value,n)}else if(this.type===o.ValueType.UINT){var n=(0,r.fromByteWidth)(t);this.builder.pushUInt(this.value,n)}else if(this.type===o.ValueType.NULL)this.builder.pushInt(0,this.width);else{if(this.type!==o.ValueType.BOOL)throw"Unexpected type: ".concat(this.type,". This might be a bug. Please create an issue https://github.com/google/flatbuffers/issues/new");this.builder.pushInt(this.value?1:0,this.width)}this.offset=e},t.prototype.storedWidth=function(t){return void 0===t&&(t=i.BitWidth.WIDTH8),(0,s.isInline)(this.type)?Math.max(t,this.width):this.width},t.prototype.storedPackedType=function(t){return void 0===t&&(t=i.BitWidth.WIDTH8),(0,s.packedType)(this.type,this.storedWidth(t))},t.prototype.isOffset=function(){return!(0,s.isInline)(this.type)},t}();e.StackValue=a},,,function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.dict={}}return i(t,[{key:"addChild",value:function(t,e){this.hasParent(t)||(this.dict[t]=[]),this.dict[t].push(e)}},{key:"getChildren",value:function(t){if(!this.hasParent(t))return[];var e=this.dict[t];return delete this.dict[t],e}},{key:"hasParent",value:function(t){return this.dict.hasOwnProperty(t)}}]),t}();t.exports=r},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=Array.isArray,r=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function t(e,s){if(e===s)return!0;if(e&&s&&"object"==("undefined"==typeof e?"undefined":n(e))&&"object"==("undefined"==typeof s?"undefined":n(s))){var a,u,c,h=i(e),d=i(s);if(h&&d){if(u=e.length,u!=s.length)return!1;for(a=u;0!==a--;)if(!t(e[a],s[a]))return!1;return!0}if(h!=d)return!1;var f=e instanceof Date,p=s instanceof Date;if(f!=p)return!1;if(f&&p)return e.getTime()==s.getTime();var l=e instanceof RegExp,y=s instanceof RegExp;if(l!=y)return!1;if(l&&y)return e.toString()==s.toString();var b=r(e);if(u=b.length,u!==r(s).length)return!1;for(a=u;0!==a--;)if(!o.call(s,b[a]))return!1;for(a=u;0!==a--;)if(c=b[a],!t(e[c],s[c]))return!1;return!0}return e!==e&&s!==s}},function(t,e,n){"use strict";var i=n(17),r=n(3),o=r.fromByteWidth,s=n(8),a=(s.isNumber,s.isIndirectNumber,s.isAVector,s.fixedTypedVectorElementSize,s.isFixedTypedVector),u=s.isTypedVector,c=s.typedVectorElementType,h=s.packedType,d=s.fixedTypedVectorElementType,f=n(18),p=f.indirect,l=(f.keyForIndex,f.keyIndex,f.readFloat,f.readInt,f.readUInt,f.valueForIndexWithKey,n(4)),y=l.BitWidth,b=new i.toReference(new ArrayBuffer(4)),v=new i.toReference(new ArrayBuffer(4)),w=function(t,e){var n=e.byteLength;t.dataView.buffer!==e&&(t.dataView=new DataView(e));var i=t.dataView.getUint8(n-1);t.packedType=t.dataView.getUint8(n-2),t.parentWidth=o(i),t.offset=n-i-2,t.byteWidth=1<<(3&t.packedType),t.valueType=t.packedType>>2,t._length=-1},g=function(t,e){var n=t.length(),i=p(t.dataView,t.offset,t.parentWidth),r=i+e*t.byteWidth,s=t.dataView.getUint8(i+n*t.byteWidth+e);if(u(t.valueType)){var f=c(t.valueType);s=h(f,y.WIDTH8)}else if(a(t.valueType)){var l=d(t.valueType);s=h(l,y.WIDTH8)}t.offset=r,t.parentWidth=o(t.byteWidth),t.packedType=s,t.byteWidth=1<<(3&t.packedType),t.valueType=t.packedType>>2,t._length=-1},_=function(t,e){e.dataView=t.dataView,e.packedType=t.packedType,e.parentWidth=t.parentWidth,e.offset=t.offset,e.byteWidth=t.byteWidth,e.valueType=t.valueType,e.length(),e._length=t._length},m=function(t,e){return _(t,b),g(b,e),b.boolValue()},T=function(t,e){return _(t,b),g(b,e),Number(b.intValue())},I=function(t,e){return _(t,b),g(b,e),Number(b.numericValue())},E=function(t,e){return _(t,b),g(b,e),b.stringValue()},O=function(t,e){return _(t,b),g(b,e),b.toObject()},k=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.length=16,_(t,v),g(v,e);for(var i=0;i<16;i++)n[i]=Number(T(v,i));return n};t.exports={refReset:w,refAdvanceToIndexGet:g,refGetBool:m,refGetInt:T,refGetNumeric:I,refGetString:E,refGetUuidBytes:k,refCp:_,refGetToObject:O}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=30,o=1,s=2,a=4,u=new THREE.Quaternion,c=350,h=1e-4,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;n(this,t),this.frames=[],this.frameIndex=-1,this.running=0,this.firstTypeFlags=0,this.maxLerpDistanceSq=i*i;for(var s=0;s<r;s++)this.frames.push([0,0,0,0,0,0,0,0,0,1,1,1]);this.bufferTimeMs=1e3/e*o}return i(t,[{key:"reset",value:function(){this.frameIndex=-1,this.firstTypeFlags=0;for(var t=0;t<this.frames.length;t++)this.frames[t][0]=0}},{key:"lerp",value:function(t,e,n){return t+(e-t)*n}},{key:"startFrame",value:function(){this.frameIndex=(this.frameIndex+1)%this.frames.length;var t=this.frames[this.frameIndex];t[0]=performance.now(),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=1,t[10]=1,t[11]=1}},{key:"setPosition",value:function(t,e,n){var i=this.frames[this.frameIndex];this.running|=o,i[1]|=o,i[2]=t,i[3]=e,i[4]=n}},{key:"setQuaternion",value:function(t,e,n,i){var r=this.frames[this.frameIndex];this.running|=s,r[1]|=s,r[5]=t,r[6]=e,r[7]=n,r[8]=i}},{key:"setScale",value:function(t,e,n){var i=this.frames[this.frameIndex];this.running|=a,i[1]|=a,i[9]=t,i[10]=e,i[11]=n}},{key:"step",value:function(t,e){if(0===(this.running&t))return!1;var n=this.frames;if(this.frameIndex===-1)return!1;for(var i=performance.now()-this.bufferTimeMs,r=void 0,d=void 0,f=n.length;f>=1;f--){var p=(this.frameIndex+f)%this.frames.length,l=n[p];if(0!==l[0]&&l[1]&t){if(0===(this.firstTypeFlags&t))return this.firstTypeFlags|=t,t===o?(e.x=l[2],e.y=l[3],e.z=l[4]):t===s?(e.x=l[5],e.y=l[6],e.z=l[7],e.w=l[8]):t===a&&(e.x=l[9],e.y=l[10],e.z=l[11]),!0;if(l[0]<=i){r=l;for(var y=1;y<n.length;y++){var b=(p+y)%this.frames.length;if(n[b][1]&t&&0!==n[b][0]&&n[b][0]>r[0]){d=n[b];break}}break}}}var v=r&&!d&&performance.now()-r[0]>c;if(!(v||r&&d))return!1;var w=1,g=e.x,_=e.y,m=e.z;if(v){if(this.running&=~t,t===o)return e.x=r[2],e.y=r[3],e.z=r[4],Math.abs(g-e.x)>h||Math.abs(_-e.y)>h||Math.abs(m-e.z)>h;if(t===s){var T=e.w;return e.x=r[5],e.y=r[6],e.z=r[7],e.w=r[8],Math.abs(g-e.x)>h||Math.abs(_-e.y)>h||Math.abs(m-e.z)>h||Math.abs(T-e.w)>h}if(t===a)return e.x=r[9],e.y=r[10],e.z=r[11],Math.abs(g-e.x)>h||Math.abs(_-e.y)>h||Math.abs(m-e.z)>h}else{var I=d[0],E=r[0],O=i-E,k=I-E;if(w=O/k,t===o){var U=r[2],N=r[3],S=r[4],F=d[2],V=d[3],D=d[4],A=U-F,C=N-V,L=S-D,R=A*A+C*C+L*L;return R>=this.maxLerpDistanceSq?(e.x=F,e.y=V,e.z=D):(e.x=this.lerp(U,F,w),e.y=this.lerp(N,V,w),e.z=this.lerp(S,D,w)),Math.abs(g-e.x)>h||Math.abs(_-e.y)>h||Math.abs(m-e.z)>h}if(t===s){var P=e.w;return e.x=r[5],e.y=r[6],e.z=r[7],e.w=r[8],u.x=d[5],u.y=d[6],u.z=d[7],u.w=d[8],e.slerp(u,w),Math.abs(g-e.x)>h||Math.abs(_-e.y)>h||Math.abs(m-e.z)>h||Math.abs(P-e.w)>h}if(t===a)return e.x=this.lerp(r[9],d[9],w),e.y=this.lerp(r[10],d[10],w),e.z=this.lerp(r[11],d[11],w),Math.abs(g-e.x)>h||Math.abs(_-e.y)>h||Math.abs(m-e.z)>h}}}]),t}();t.exports={Lerper:d,TYPE_POSITION:o,TYPE_QUATERNION:s,TYPE_SCALE:a}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.debug=!1}return i(t,[{key:"setDebug",value:function(t){this.debug=t}},{key:"write",value:function(){this.debug&&console.log.apply(this,arguments)}},{key:"warn",value:function(){console.warn.apply(this,arguments)}},{key:"error",value:function(){console.error.apply(this,arguments)}}]),t}();t.exports=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(10),a=s.Builder,u=n(20),c=u.encode,h=n(6),d=h.ByteBuffer,f=n(!function(){var t=new Error('Cannot find module "yjs"');throw t.code="MODULE_NOT_FOUND",t}()),p=n(!function(){var t=new Error('Cannot find module "y-protocols/awareness"');throw t.code="MODULE_NOT_FOUND",t}()),l=p.encodeAwarenessUpdate,y=p.applyAwarenessUpdate,b=p.removeAwarenessStates,v={Update:"u",Remove:"r"},w=new a(1024),g=n(27).Message,_=n(22).CustomOp,m=n(13).MessageData,T=n(24).DocSyncRequest,I=n(25).DocSyncResponse,E=n(26).DocUpdate,O=n(28).PresenceUpdate,k=new g,U=new T,N=new I,S=new E,F=new O,V=new _,D=n(20),A=D.decode,C=5,L=function(t,e){var n=!0,i=!1,r=void 0;try{for(var s,a=t.states.entries()[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=o(s.value,2),c=u[0],h=u[1].client_id;if(h===e)return c}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return null},R=function(){function t(e){i(this,t),this.entities=e,this.dataChannelSubs={},this.activeDataChannels={},this._avgTimeOffset=0,this._serverTimeRequests=0,this._timeOffsets=[],this._onDocUpdate=this._onDocUpdate.bind(this),this._onPresenceUpdate=this._onPresenceUpdate.bind(this)}return r(t,[{key:"setNetworkAdapter",value:function(t){this.adapter=t}},{key:"connect",value:function(t,e,n,i){var r=this;arguments.length>4&&void 0!==arguments[4]&&arguments[4];return NAF.app=t,NAF.room=e,this.doc=n,this.presence=i,this.doc.on("update",this._onDocUpdate),this.presence.on("update",this._onPresenceUpdate),this.adapter.setApp(t),this.adapter.setServerConnectListeners(this.connectSuccess.bind(this),this.connectFailure.bind(this)),this.adapter.setDataChannelListeners(this.dataChannelOpen.bind(this),this.dataChannelClosed.bind(this),this.receivedData.bind(this)),this.updateTimeOffset().then(function(){return r.adapter.connect()}).then(function(){return r.adapter.joinRoom(e)})}},{key:"getPresenceStateForClientId",value:function(t){if(!this.presence)return null;var e=L(this.presence,t);return e?this.presence.states.get(e):null}},{key:"onConnect",value:function(t){this.onConnectCallback=t,this.isConnected()?t():document.body.addEventListener("connected",t,!1)}},{key:"connectSuccess",value:function(t){NAF.log.write("Networked-Aframe Client ID:",t),NAF.clientId=t;var e=this.presence;e.setLocalStateField("client_id",t),document.body.dispatchEvent(new CustomEvent("connected",{detail:{clientId:t,presence:e}}))}},{key:"connectFailure",value:function(t,e){NAF.log.error(t,"failure to connect")}},{key:"getConnectedClients",value:function(){return this.adapter.getConnectedClients()}},{key:"isConnected",value:function(){return!!NAF.clientId}},{key:"isMineAndConnected",value:function(t){return this.isConnected()&&NAF.clientId===t}},{key:"isNewClient",value:function(t){return!this.isConnectedTo(t)}},{key:"isConnectedTo",value:function(t){return this.adapter.getConnectStatus(t)===NAF.adapters.IS_CONNECTED}},{key:"dataChannelOpen",value:function(t){NAF.log.write("Opened data channel from "+t),this.activeDataChannels[t]=!0,this.entities.completeSync(t,!0),this.sendDocSyncRequest(t),this.sendPresenceUpdate(t),document.body.dispatchEvent(new CustomEvent("clientConnected",{detail:{clientId:t}}))}},{key:"dataChannelClosed",value:function(t){NAF.log.write("Closed data channel from "+t),this.activeDataChannels[t]=!1,this.entities.removeEntitiesOfClient(t);var e=L(this.presence,t);e&&b(this.presence,[e],"disconnect");var n=new CustomEvent("clientDisconnected",{detail:{clientId:t}});document.body.dispatchEvent(n)}},{key:"hasActiveDataChannel",value:function(t){return this.activeDataChannels.hasOwnProperty(t)&&this.activeDataChannels[t]}},{key:"broadcastData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?this.adapter.broadcastDataGuaranteed(t):this.adapter.broadcastData(t)}},{key:"broadcastDataGuaranteed",value:function(t){this.adapter.broadcastDataGuaranteed(t)}},{key:"broadcastCustomData",value:function(t,e,n){this.fillBuilderWithCustomData(t,e),n?NAF.connection.broadcastDataGuaranteed(w.asUint8Array()):NAF.connection.broadcastData(w.asUint8Array()),NAF.connection.dataChannelSubs[t]&&NAF.connection.dataChannelSubs[t](t,e,NAF.clientId)}},{key:"broadcastCustomDataGuaranteed",value:function(t,e){this.broadcastCustomData(t,e,!0)}},{key:"sendData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.hasActiveDataChannel(e)&&(n?this.adapter.sendDataGuaranteed(t,e):this.adapter.sendData(t,e))}},{key:"sendDataGuaranteed",value:function(t,e){this.sendData(t,e,!0)}},{key:"fillBuilderWithCustomData",value:function(t,e){w.clear();var n=_.createCustomOp(w,w.createSharedString(t),_.createPayloadVector(w,c(e)));w.finish(g.createMessage(w,m.CustomOp,n))}},{key:"sendCustomData",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.fillBuilderWithCustomData(t,e),i?NAF.connection.sendDataGuaranteed(w.asUint8Array(),n):NAF.connection.sendData(w.asUint8Array(),n)}},{key:"sendCustomDataGuaranteed",value:function(t,e,n){this.sendCustomData(t,e,n,!0)}},{key:"subscribeToDataChannel",value:function(t,e){this.dataChannelSubs[t]=e}},{key:"unsubscribeToDataChannel",value:function(t){delete this.dataChannelSubs[t]}},{key:"isReservedDataType",value:function(t){return t===v.Update||t===v.Remove}},{key:"receivedData",value:function(t,e){var n=this.presence,i=this.doc,r=this.adapter;switch(g.getRootAsMessage(new d(t),k),k.dataType()){case m.SceneUpdate:AFRAME.scenes[0].systems.networked.enqueueIncoming(t,e);break;case m.PresenceUpdate:k.data(F),y(n,F.updateArray(),e);break;case m.DocSyncRequest:k.data(U);var o=U.encodedStateVectorArray(),s=f.encodeStateAsUpdate(i,o);w.clear(),w.finish(g.createMessage(w,m.DocSyncResponse,I.createDocSyncResponse(w,I.createUpdateVector(w,s)))),r.sendDataGuaranteed(w.asUint8Array(),e);break;case m.DocSyncResponse:k.data(N),f.applyUpdate(i,N.updateArray());break;case m.DocUpdate:k.data(S),f.applyUpdate(i,S.updateArray());break;case m.CustomOp:k.data(V);var a=V.dataType();NAF.connection.dataChannelSubs[a]&&NAF.connection.dataChannelSubs[a](a,A(V.payloadArray()),e)}}},{key:"getServerTime",value:function(){return Date.now()+this._avgTimeOffset}},{key:"disconnect",value:function(){this.entities.removeRemoteEntities(),this.adapter.disconnect(),NAF.app="",NAF.room="",NAF.clientId="",this.activeDataChannels={},this.adapter=null,this.adapter=null,AFRAME.scenes[0].systems.networked.reset(),this.doc&&this.doc.off("update",this._onDocUpdate),this.presence&&this.presence.off("update",this._onPresenceUpdate),document.body.removeEventListener("connected",this.onConnectCallback)}},{key:"updateTimeOffset",value:function(){var t=this;return new Promise(function(e){var n=Date.now();fetch(document.location.href,{method:"HEAD",cache:"no-cache"}).then(function(i){var r=1e3,o=new Date(i.headers.get("Date")).getTime()+r/2,s=Date.now(),a=o+(s-n)/2,u=a-s;t._serverTimeRequests++,t._serverTimeRequests<=C?t._timeOffsets.push(u):t._timeOffsets[t._serverTimeRequests%10]=u,t._avgTimeOffset=Math.floor(t._timeOffsets.reduce(function(t,e){return t+=e},0)/t._timeOffsets.length),t._serverTimeRequests>10?(setTimeout(function(){return t.updateTimeOffset()},3e5),t._serverTimeRequests=0,t._timeOffsets.length=0,e()):t.updateTimeOffset().then(e)})})}},{key:"sendDocSyncRequest",value:function(t){w.clear();var e=f.encodeStateVector(this.doc);w.finish(g.createMessage(w,m.DocSyncRequest,T.createDocSyncRequest(w,T.createEncodedStateVectorVector(w,e)))),this.adapter.sendDataGuaranteed(w.asUint8Array(),t)}},{key:"sendPresenceUpdate",value:function(t){w.clear(),w.finish(g.createMessage(w,m.PresenceUpdate,O.createPresenceUpdate(w,O.createUpdateVector(w,l(this.presence,Array.from(this.presence.getStates().keys())))))),this.adapter.sendDataGuaranteed(w.asUint8Array(),t)}},{key:"_onDocUpdate",value:function(t,e){e===this&&(w.clear(),w.finish(g.createMessage(w,m.DocUpdate,E.createDocUpdate(w,E.createUpdateVector(w,t)))),this.adapter.broadcastDataGuaranteed(w.asUint8Array()))}},{key:"_onPresenceUpdate",value:function(t,e){var n=t.added,i=t.updated,r=t.removed;if("local"===e){var o=this.presence,s=this.adapter,a=n.concat(i).concat(r),u=l(o,a);w.clear(),w.finish(g.createMessage(w,m.PresenceUpdate,O.createPresenceUpdate(w,O.createUpdateVector(w,u)))),s.broadcastDataGuaranteed(w.asUint8Array())}}}]),t}();t.exports=R},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(34),s=n(15),a=s.bytesToHex,u=n(12).FullUpdateData,c=n(14).UpdateOp,h=new u,d=[];d.length=20;var f=function(){function t(){i(this,t),this.entities={},this.childCache=new o,this.onRemoteEntityCreatedEvent=new Event("remoteEntityCreated"),this._persistentFirstSyncs={},this.positionNormalizer=null,this.positionDenormalizer=null}return r(t,[{key:"registerEntity",value:function(t,e){this.entities[t]=e}},{key:"createRemoteEntity",value:function(t){var e=t.networkId(),n=t.fullUpdateData(h),i=n.template();NAF.log.write("Creating remote entity",e,i);var r=NAF.schemas.getCachedTemplate(i);return this.addNetworkComponent(r,t),r}},{key:"addNetworkComponent",value:function(t,e){for(var n=e.networkId(),i=e.fullUpdateData(h),r=0;r<20;r++)d[r]=e.owner(r);for(var o=a(d),s=0;s<20;s++)d[s]=i.creator(s);var u=a(d),f=i.template(),p=i.persistent();t.firstUpdateRef=new c,t.firstUpdateRef.bb=e.bb,t.firstUpdateRef.bb_pos=e.bb_pos,t.setAttribute("networked",{template:f,owner:o,creator:u,networkId:n,persistent:p})}},{key:"updateEntity",value:function(t,e){for(var n=null!=t.fullUpdateData(h),i=t.networkId(),r=0;r<20;r++)d[r]=t.owner(r);var o=a(d);if(this.hasEntity(i)){var s=this.entities[i];s.components.networked.networkUpdate(t,e)}else n&&NAF.connection.activeDataChannels[o]!==!1&&NAF.connection.adapter.authorizeCreateEntity(h.template(),e)&&this.receiveFirstUpdateFromEntity(t,h)}},{key:"receiveFirstUpdateFromEntity",value:function(t,e){var n=t.networkId(),i=e.parentId(),r=i&&!this.hasEntity(i);if(r)this.childCache.addChild(i,t);else{var o=this.createRemoteEntity(t);this.createAndAppendChildren(n,o),this.addEntityToPage(o,i)}}},{key:"createAndAppendChildren",value:function(t,e){for(var n=this.childCache.getChildren(t),i=0;i<n.length;i++){var r=n[i],o=r.networkId();if(this.hasEntity(o))NAF.log.warn("Tried to instantiate entity multiple times",o,"Existing entity:",this.getEntity(o));else{var s=this.createRemoteEntity(r);this.createAndAppendChildren(o,s),e.appendChild(s)}}}},{key:"addEntityToPage",value:function(t,e){this.hasEntity(e)?this.addEntityToParent(t,e):this.addEntityToSceneRoot(t)}},{key:"addEntityToParent",value:function(t,e){this.entities[e].appendChild(t)}},{key:"addEntityToSceneRoot",value:function(t){var e=AFRAME.scenes[0];e.appendChild(t)}},{key:"completeSync",value:function(t,e){for(var n in this.entities)this.entities.hasOwnProperty(n)&&this.entities[n].components.networked.syncAll(t)}},{key:"removeRemoteEntity",value:function(t,e){var n=t.networkId(),i=this.entities[n];if(i&&NAF.connection.adapter.authorizeEntityManipulation(i,e))return this.removeEntity(n)}},{key:"removeEntitiesOfClient",value:function(t){var e=[];for(var n in this.entities){var i=NAF.utils.getCreator(this.entities[n]);if(i===t){var r=void 0,o=this.entities[n].getAttribute("networked");if(o&&o.persistent&&(r=NAF.utils.isMine(this.entities[n])||NAF.utils.takeOwnership(this.entities[n])),!r){var s=this.removeEntity(n);e.push(s)}}}return e}},{key:"removeEntity",value:function(t){if(!this.hasEntity(t))return NAF.log.error("Tried to remove entity I don't have."),null;var e=this.entities[t],n=function t(e){for(var n=e.children,i=0;i<n.length;i++)t(n[i]);e.parentNode&&e.parentNode.removeChild(e)};return n(e),e}},{key:"forgetEntity",value:function(t){delete this.entities[t]}},{key:"getEntity",value:function(t){return this.hasEntity(t)?this.entities[t]:null}},{key:"hasEntity",value:function(t){return this.entities.hasOwnProperty(t)}},{key:"removeRemoteEntities",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.childCache=new o;for(var n in this.entities){var i=this.entities[n];if(!e.includes(i)){var r=i.getAttribute("networked").owner;(t||r!==NAF.clientId)&&this.removeEntity(n)}}}},{key:"setPositionNormalizer",value:function(t){this.positionNormalizer=t}},{key:"setPositionDenormalizer",value:function(t){this.positionDenormalizer=t}}]),t}();t.exports=f},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.schemaDict={},this.templateCache={}}return i(t,[{key:"createDefaultSchema",value:function(t){return{template:t,components:["position","rotation"]}}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(this.validateSchema(t)){this.schemaDict[t.template]=t;var n=e.querySelector(t.template);if(!n)return void NAF.log.error("Template el not found for "+t.template+", make sure NAF.schemas.add is called after <a-scene> is defined.");if(!this.validateTemplate(t,n))return;this.templateCache[t.template]=document.importNode(n.content,!0);
}else NAF.log.error("Schema not valid: ",t),NAF.log.error("See https://github.com/haydenjameslee/networked-aframe#syncing-custom-components")}},{key:"getCachedTemplate",value:function(t){return this.templateIsCached(t)||(this.templateExistsInScene(t)?this.add(this.createDefaultSchema(t)):NAF.log.error("Template el for "+t+" is not in the scene, add the template to <a-assets> and register with NAF.schemas.add.")),this.templateCache[t].firstElementChild.cloneNode(!0)}},{key:"templateIsCached",value:function(t){return this.templateCache.hasOwnProperty(t)}},{key:"getComponents",value:function(t){var e=["position","rotation"];return this.hasTemplate(t)&&(e=this.schemaDict[t].components),e}},{key:"hasTemplate",value:function(t){return this.schemaDict.hasOwnProperty(t)}},{key:"templateExistsInScene",value:function(t){var e=document.querySelector(t);return e&&this.isTemplateTag(e)}},{key:"validateSchema",value:function(t){return t.hasOwnProperty("template")&&t.hasOwnProperty("components")}},{key:"validateTemplate",value:function(t,e){return this.isTemplateTag(e)?!!this.templateHasOneOrZeroChildren(e)||(NAF.log.error("Template for "+t.template+" has more than one child. Templates must have one direct child element, no more. Template found:",e),!1):(NAF.log.error("Template for "+t.template+" is not a <template> tag. Instead found: "+e.tagName),!1)}},{key:"isTemplateTag",value:function(t){return"template"===t.tagName.toLowerCase()}},{key:"templateHasOneOrZeroChildren",value:function(t){return t.content.childElementCount<2}},{key:"remove",value:function(t){delete this.schemaDict[t]}},{key:"clear",value:function(){this.schemaDict={}}}]),t}();t.exports=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(!function(){var t=new Error('Cannot find module "./P2PCFAdapter"');throw t.code="MODULE_NOT_FOUND",t}()),s=function(){function t(){i(this,t),this.adapters={p2pcf:o},this.IS_CONNECTED=t.IS_CONNECTED,this.CONNECTING=t.CONNECTING,this.NOT_CONNECTED=t.NOT_CONNECTED}return r(t,[{key:"register",value:function(t,e){this.adapters[t]=e}},{key:"make",value:function(t){var e=t.toLowerCase();if(this.adapters[e]){var n=this.adapters[e];return new n}throw new Error("Adapter: "+t+" not registered. Please use NAF.adapters.register() to register this adapter.")}}]),t}();s.IS_CONNECTED="IS_CONNECTED",s.CONNECTING="CONNECTING",s.NOT_CONNECTED="NOT_CONNECTED",t.exports=s},function(t,e,n){"use strict";var i=n(21);AFRAME.registerComponent("networked-audio-source",{schema:{positional:{default:!0},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},maxDistance:{default:1e4},refDistance:{default:1},rolloffFactor:{default:1}},init:function(){var t=this;this.listener=null,this.stream=null,this._setMediaStream=this._setMediaStream.bind(this),NAF.utils.getNetworkedEntity(this.el).then(function(e){var n=e.components.networked.data.owner;n&&NAF.connection.adapter.getMediaStream(n).then(t._setMediaStream).catch(function(t){return i.log.error("Error getting media stream for "+n,t)})})},update:function(){this._setPannerProperties()},_setMediaStream:function(t){if(this.sound||this.setupSound(),t!=this.stream){if(this.stream&&this.sound.disconnect(),t){/chrome/i.test(navigator.userAgent)&&(this.audioEl=new Audio,this.audioEl.setAttribute("autoplay","autoplay"),this.audioEl.setAttribute("playsinline","playsinline"),this.audioEl.srcObject=t,this.audioEl.volume=0);var e=this.sound.context.createMediaStreamSource(t);this.sound.setNodeSource(e),this.el.emit("sound-source-set",{soundSource:e})}this.stream=t}},_setPannerProperties:function(){this.sound&&this.data.positional&&(this.sound.setDistanceModel(this.data.distanceModel),this.sound.setMaxDistance(this.data.maxDistance),this.sound.setRefDistance(this.data.refDistance),this.sound.setRolloffFactor(this.data.rolloffFactor))},remove:function(){this.sound&&(this.el.removeObject3D(this.attrName),this.stream&&this.sound.disconnect())},setupSound:function(){var t=this.el,e=t.sceneEl;this.sound&&t.removeObject3D(this.attrName),e.audioListener||(e.audioListener=new THREE.AudioListener,e.camera&&e.camera.add(e.audioListener),e.addEventListener("camera-set-active",function(t){t.detail.cameraEl.getObject3D("camera").add(e.audioListener)})),this.listener=e.audioListener,this.sound=this.data.positional?new THREE.PositionalAudio(this.listener):new THREE.Audio(this.listener),t.setObject3D(this.attrName,this.sound),this._setPannerProperties()}})},function(t,e,n){"use strict";var i=n(!function(){var t=new Error('Cannot find module "yjs"');throw t.code="MODULE_NOT_FOUND",t}()),r=n(!function(){var t=new Error('Cannot find module "y-protocols/awareness"');throw t.code="MODULE_NOT_FOUND",t}()),o=r.Awareness;AFRAME.registerComponent("networked-scene",{schema:{app:{default:"default"},room:{default:"default"},connectOnLoad:{default:!0},onConnect:{default:"onConnect"},adapter:{default:"wsEasyRtc"},audio:{default:!1},debug:{default:!1}},init:function(){var t=this.el;this.connect=this.connect.bind(this),t.addEventListener("connect",this.connect),this.data.connectOnLoad&&t.emit("connect",null,!1)},connect:function(){return NAF.log.setDebug(this.data.debug),NAF.log.write("Networked-Aframe Connecting..."),this.doc=new i.Doc,this.presence=new o(this.doc),this.checkDeprecatedProperties(),this.setupNetworkAdapter(),this.hasOnConnectFunction()&&this.callOnConnect(),NAF.connection.connect(this.data.app,this.data.room,this.doc,this.presence,this.data.audio)},checkDeprecatedProperties:function(){},setupNetworkAdapter:function(){var t=this.data.adapter,e=NAF.adapters.make(t),n=NAF.adapters.make("p2pcf");NAF.connection.setNetworkAdapter(e,n),this.el.emit("adapter-ready",e,!1)},hasOnConnectFunction:function(){return""!==this.data.onConnect&&window.hasOwnProperty(this.data.onConnect)},callOnConnect:function(){NAF.connection.onConnect(window[this.data.onConnect])},remove:function(){NAF.log.write("networked-scene disconnected"),this.el.removeEventListener("connect",this.connect),NAF.connection.disconnect()}})},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(){var t=null;return function(e){return null===t&&null!==e?(t=AFRAME.utils.clone(e),!1):(null===t&&null!==e||!E(t,e))&&(t=AFRAME.utils.clone(e),!0)}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(17),u=n(7),c=u.Reference,h=n(6),d=h.ByteBuffer,f=n(10),p=f.Builder,l=n(5),y=l.Long,b=n(3),v=b.fromByteWidth,w=n(36),g=w.refCp,_=w.refGetNumeric,m=w.refGetInt,T=w.refGetToObject,I=w.refAdvanceToIndexGet,E=n(35),O=THREE.Math.DEG2RAD,k=["position","rotation","scale"],U=n(37),N=U.Lerper,S=U.TYPE_POSITION,F=U.TYPE_QUATERNION,V=U.TYPE_SCALE,D=n(15),A=D.hexToBytes,C=D.bytesToHex,L=new THREE.Vector3,R=new THREE.Quaternion,P=n(27).Message,B=n(13).MessageData,M=n(29).SceneUpdate,W=n(12).FullUpdateData,x=n(14).UpdateOp,j=n(23).DeleteOp,H=[],G=[],z=new P,q=new W,Z=new M,K=new x,Y=new j,X=new y(0,0),Q=1e4,J=new a.toReference(new ArrayBuffer(4)),$=new p(1024),tt=new a.builder,et=new Set;tt.dedupStrings=!1,tt.dedupKeys=!1,tt.dedupKeyVectors=!1;var nt=new Uint8Array(tt.buffer),it=function(){nt.fill(0),tt.stack.length=0,tt.stackPointers.length=0,tt.offset=0,tt.finished=!1},rt=new Map;AFRAME.registerSystem("networked",{init:function(){var t=this;this.components=[],this.reset();var e=!1;setInterval(function(){if(!e&&NAF.connection.adapter){e=!0;var n=performance.now();try{if(n<t.nextSyncTime)return;var i=!0,r=!1,o=void 0;try{for(var s,a=t.components[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var u=s.value;u.consumeFirstUpdateIfNecessary()}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}t.incomingPaused||t.performReceiveStep(),t.performSendStep()}finally{e=!1}}},1e3/60)},register:function(t){this.components.push(t),this.instantiatingNetworkIds.delete(t.data.networkId)},deregister:function(t){var e=this.components.indexOf(t);e>-1&&this.components.splice(e,1)},enqueueIncoming:function(t,e){this.incomingData.push(t),this.incomingSenders.push(e)},reset:function(){this.incomingData=[],this.incomingSenders=[],this.incomingPaused=!1,this.instantiatingNetworkIds=new Map,this.awaitingPeers=new Map,this.nextSyncTime=0},performReceiveStep:function(){var t=this.incomingData,e=this.incomingSenders;t:for(var n=0,i=t.length;n<i;n++){var r=t.shift(),o=e.shift();P.getRootAsMessage(new d(r),z),z.data(Z);for(var s=performance.now(),a=0,u=Z.updatesLength();a<u;a++){Z.updates(a,K);var c=K.networkId(),h=NAF.entities.hasEntity(c),f=null!=K.fullUpdateData(q);if(!h){if(!NAF.connection.activeDataChannels[o]){(!this.awaitingPeers.has(o)||s-this.awaitingPeers.get(o)<Q)&&(this.awaitingPeers.has(o)||this.awaitingPeers.set(o,performance.now()),t.push(r),e.push(o));continue t}if(f&&q.persistent()){t.push(r),e.push(o);continue t}var p=f&&!this.instantiatingNetworkIds.has(c);if(!p){(!this.instantiatingNetworkIds.has(c)||s-this.instantiatingNetworkIds.get(c)<Q)&&(t.push(r),e.push(o));continue t}this.awaitingPeers.delete(o),this.instantiatingNetworkIds.set(c,performance.now())}}for(var l=0,y=Z.updatesLength();l<y;l++)Z.updates(l,K),NAF.entities.updateEntity(K,o);for(var b=0,v=Z.deletesLength();b<v;b++)Z.deletes(b,Y),NAF.entities.removeRemoteEntity(Y,o)}},performSendStep:function(){var t=!1,e=!1;et.clear();for(var n=0,i=this.components.length;n<i;n++){var r=this.components[n];if(r.isMine()&&r.canSync())if(r.el.parentElement){var o=!1;if(r.pendingFullSyncTargetClients.size>0){o=!0;var s=!0,a=!1,u=void 0;try{for(var c,h=r.pendingFullSyncTargetClients[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;et.add(d)}}catch(t){a=!0,u=t}finally{try{!s&&h.return&&h.return()}finally{if(a)throw u}}r.pendingFullSyncTargetClients.clear()}if(it(),r.pushComponentsDataToFlexBuilder(o)){t||($.clear(),G.length=0,t=!0);var f=x.createComponentsVector($,new Uint8Array(tt.finish())),p=x.createOwnerVector($,A(r.data.owner,H)),l=null;o?(e=!0,l=W.createFullUpdateData($,W.createCreatorVector($,A(r.data.creator,H)),$.createSharedString(r.data.template),r.data.persistent,$.createSharedString(r.getParentId()))):et.add(null);var y=$.createSharedString(r.data.networkId);x.startUpdateOp($),x.addNetworkId($,y),x.addOwner($,p),X.low=1073741823&r.lastOwnerTime,X.high=(r.lastOwnerTime-X.low)/1073741824,x.addLastOwnerTime($,X),x.addComponents($,f),null!==l&&x.addFullUpdateData($,l),G.push(x.endUpdateOp($))}}else NAF.log.error("entity registered with system despite being removed")}if(t){var b=M.createUpdatesVector($,G);M.startSceneUpdate($),M.addUpdates($,b);var v=M.endSceneUpdate($);if($.finish(P.createMessage($,B.SceneUpdate,v)),et.has(null))NAF.connection.broadcastData($.asUint8Array(),e);else{var w=!0,g=!1,_=void 0;try{for(var m,T=et[Symbol.iterator]();!(w=(m=T.next()).done);w=!0){var I=m.value;NAF.connection.sendData($.asUint8Array(),I,e)}}catch(t){g=!0,_=t}finally{try{!w&&T.return&&T.return()}finally{if(g)throw _}}}}this.updateNextSyncTime()},updateNextSyncTime:function(){this.nextSyncTime=performance.now()+1e3/NAF.options.updateRate}}),AFRAME.registerComponent("networked",{schema:{template:{default:""},attachTemplateToLocal:{default:!0},persistent:{default:!1},networkId:{default:""},owner:{default:""},creator:{default:""}},init:function(){this.OWNERSHIP_GAINED="ownership-gained",this.OWNERSHIP_CHANGED="ownership-changed",this.OWNERSHIP_LOST="ownership-lost",this.onOwnershipGainedEvent={el:this.el},this.onOwnershipChangedEvent={el:this.el},this.onOwnershipLostEvent={el:this.el},this.conversionEuler=new THREE.Euler,this.conversionEuler.order="YXZ",this.lerpers=[],this.pendingFullSyncTargetClients=new Set,this.lastErrorLoggedAt=0,this.pendingConsumeFirstUpdate=!1;var t=this.wasCreatedByNetwork();this.onConnected=this.onConnected.bind(this),this.componentSchemas=NAF.schemas.getComponents(this.data.template),this.cachedElements=new Array(this.componentSchemas.length),this.sentFirstComponentSyncs=this.componentSchemas.map(function(){return!1}),this.networkUpdatePredicates=this.componentSchemas.map(function(t){return t.requiresNetworkUpdate&&t.requiresNetworkUpdate()||o()}),this.invalidateCachedElements(),this.initNetworkParent();var e=void 0;""===this.data.networkId?(e=NAF.utils.createNetworkId(),this.el.setAttribute(this.name,{networkId:e})):e=this.data.networkId,this.el.id||this.el.setAttribute("id","naf-"+e),t?this.pendingConsumeFirstUpdate=!0:this.data.attachTemplateToLocal&&this.attachTemplateToLocal(),NAF.entities.registerEntity(e,this.el),this.lastOwnerTime=1,NAF.clientId?this.onConnected():document.body.addEventListener("connected",this.onConnected,!1),document.body.dispatchEvent(this.entityCreatedEvent()),this.el.dispatchEvent(new CustomEvent("instantiated",{detail:{el:this.el}})),this.el.sceneEl.systems.networked.register(this)},attachTemplateToLocal:function(){for(var t=NAF.schemas.getCachedTemplate(this.data.template),e=t.attributes,n=0;n<e.length;n++)this.el.setAttribute(e[n].name,e[n].value);for(;t.firstElementChild;)this.el.appendChild(t.firstElementChild)},takeOwnership:function(){var t=this.data.owner,e=this.lastOwnerTime,n=NAF.connection.getServerTime();return!!(t&&!this.isMine()&&e<n)&&(this.lastOwnerTime=n,this.removeLerp(),this.el.setAttribute("networked",{owner:NAF.clientId}),this.syncAll(),this.onOwnershipGainedEvent.oldOwner=t,this.el.emit(this.OWNERSHIP_GAINED,this.onOwnershipGainedEvent),this.onOwnershipChangedEvent.oldOwner=t,this.onOwnershipChangedEvent.newOwner=NAF.clientId,this.el.emit(this.OWNERSHIP_CHANGED,this.onOwnershipChangedEvent),!0)},wasCreatedByNetwork:function(){return!!this.el.firstUpdateRef},initNetworkParent:function(){var t=this.el.parentElement;t.hasOwnProperty("components")&&t.components.hasOwnProperty("networked")?this.parent=t:this.parent=null},consumeFirstUpdateIfNecessary:function(){this.pendingConsumeFirstUpdate&&(this.networkUpdate(this.el.firstUpdateRef,this.data.creator),this.pendingConsumeFirstUpdate=!1)},onConnected:function(){var t=this;this.positionNormalizer=NAF.entities.positionNormalizer,this.positionDenormalizer=NAF.entities.positionDenormalizer,""===this.data.owner&&(this.lastOwnerTime=NAF.connection.getServerTime(),this.el.setAttribute(this.name,{owner:NAF.clientId,creator:NAF.clientId}),this.el.object3D.matrixNeedsUpdate=!0,setTimeout(function(){return t.el.parentNode?void t.syncAll():void NAF.log.warn("Networked element was removed before ever getting the chance to syncAll")},0)),document.body.removeEventListener("connected",this.onConnected,!1)},isMine:function(){return this.data.owner===NAF.clientId},createdByMe:function(){return this.data.creator===NAF.clientId},tick:function(t,e){if(!this.isMine())for(var n=0;n<this.lerpers.length;n++){var i=this.lerpers[n],r=i.lerper,o=i.object3D,s=L;s.copy(o.position);var a=r.step(S,s);a&&(this.positionDenormalizer&&(s=this.positionDenormalizer(s,o.position)),o.position.copy(s));var u=r.step(F,o.quaternion),c=r.step(V,o.scale);(a||u||c)&&(o.matrixNeedsUpdate=!0)}},syncAll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.canSync()&&this.pendingFullSyncTargetClients.add(t)},getCachedElement:function(t){var e=this.cachedElements[t];if(e)return e;var n=this.componentSchemas[t];if(n.selector){var i=this.el.querySelector(n.selector);return this.cachedElements[t]=i,i}return this.cachedElements[t]=this.el,this.el},invalidateCachedElements:function(){for(var t=0;t<this.cachedElements.length;t++)this.cachedElements[t]=null},pushComponentsDataToFlexBuilder:function(t){for(var e=!1,n=0;n<this.componentSchemas.length;n++){var i=this.componentSchemas[n],o=this.getCachedElement(n);if(o){var a=i.component?i.component:i,u=o.getAttribute(a);if(null!==u){var c=i.property?u[i.property]:u;if(!this.sentFirstComponentSyncs[n]||this.networkUpdatePredicates[n](c)||t){e||tt.startVector();var h=c;if(this.positionNormalizer&&"position"===a&&(h=this.positionNormalizer(h,this.el)),null!==h){if(this.sentFirstComponentSyncs[n]=!0,e=!0,tt.startVector(),tt.addInt(n),k.includes(a))tt.addFloat(Math.fround(h.x)),tt.addFloat(Math.fround(h.y)),tt.addFloat(Math.fround(h.z));else if("object"===("undefined"==typeof h?"undefined":s(h)))if(h.isVector2)tt.addInt(0),tt.addFloat(Math.fround(h.x)),tt.addFloat(Math.fround(h.y));else if(h.isVector3)tt.addInt(1),tt.addFloat(Math.fround(h.x)),tt.addFloat(Math.fround(h.y)),tt.addFloat(Math.fround(h.z));else if(h.isQuaternion)tt.addInt(2),tt.addFloat(Math.fround(h.x)),tt.addFloat(Math.fround(h.y)),tt.addFloat(Math.fround(h.z)),tt.addFloat(Math.fround(h.w));else{tt.addInt(3),rt.has(a)||rt.set(a,[].concat(r(Object.keys(AFRAME.components[a].schema))).sort());for(var d=rt.get(a),f=0;f<=d.length;f++){var p=d[f];if(void 0!==h[p]){tt.addInt(f);var l=h[p];"number"==typeof l?Number.isInteger(l)?l>2147483647||l<-2147483648?NAF.log.error("64 bit integers not supported",l,i):tt.add(l):tt.add(Math.fround(l)):tt.add(l)}}}else{tt.addInt(3),tt.addInt(0);var y=h;"object"===("undefined"==typeof y?"undefined":s(y))?NAF.log.error("Schema should not set property for object or array values",y,i):"number"==typeof y?Number.isInteger(y)?y>2147483647||y<-2147483648?NAF.log.error("64 bit integers not supported",y,i):tt.add(y):tt.add(Math.fround(y)):tt.add(y)}tt.end()}}}}}return e&&tt.end(),e},canSync:function(){if(this.data.owner&&this.isMine())return!0;if(!this.createdByMe())return!1;var t=NAF.connection.getConnectedClients();for(var e in t)if(e===this.data.owner)return!1;return!0},getParentId:function(){if(this.initNetworkParent(),!this.parent)return null;var t=this.parent.getAttribute("networked");return t.networkId},networkUpdate:function(t,e){try{H.length=20;for(var n=0;n<20;n++)H[n]=t.owner(n);var i=C(H),r=t.lastOwnerTime(),o=1073741824*r.high+r.low;if(o<this.lastOwnerTime||this.lastOwnerTime===o&&this.data.owner>i)return;var s=null!=t.fullUpdateData(q);if(s&&this.data.owner!==i){var a=this.isMine();this.lastOwnerTime=o;var u=this.data.owner,h=i;this.el.setAttribute("networked",{owner:i}),a&&(this.onOwnershipLostEvent.newOwner=h,this.el.emit(this.OWNERSHIP_LOST,this.onOwnershipLostEvent)),this.onOwnershipChangedEvent.oldOwner=u,this.onOwnershipChangedEvent.newOwner=h,this.el.emit(this.OWNERSHIP_CHANGED,this.onOwnershipChangedEvent)}s&&this.data.persistent!==q.persistent()&&this.el.setAttribute("networked",{persistent:q.persistent()});var d=t.componentsArray(),f=new DataView(d.buffer,d.byteOffset,d.byteLength),p=f.byteLength,l=f.getUint8(p-1),y=f.getUint8(p-2),b=v(l),w=p-l-2,g=new c(f,w,b,y,"/");this.updateNetworkedComponents(g,s,e)}catch(n){var _=performance.now();_-this.lastErrorLoggedAt>1e3&&(this.lastErrorLoggedAt=_,NAF.log.error("Error updating from network",e,t&&t.bb&&t.bb.bytes,n))}},updateNetworkedComponents:function(t,e,n){this.startLerpingFrame();for(var o=t.length(),s=0;s<o;s++){var a=J;g(t,a),I(a,s);var u=m(a,0),c=this.componentSchemas[u],h=this.getCachedElement(u);if(null!==h){var d=c.component?c.component:c;if(k.includes(d)){if(NAF.connection.adapter.authorizeEntityManipulation(this.el,n)){for(var f=_(a,1)||0,p=_(a,2)||0,l=_(a,3)||0,y=void 0,b=0,v=this.lerpers.length;b<v;b++){var w=this.lerpers[b];if(w.object3D===h.object3D){y=w.lerper;break}}switch(y||(y=new N(NAF.options.updateRate,NAF.options.maxLerpDistance),this.lerpers.push({lerper:y,object3D:h.object3D}),y.startFrame()),d){case"position":y.setPosition(f,p,l);break;case"rotation":this.conversionEuler.set(O*f,O*p,O*l),R.setFromEuler(this.conversionEuler),y.setQuaternion(R.x,R.y,R.z,R.w);break;case"scale":y.setScale(f,p,l);break;default:NAF.log.error("Could not set value in interpolation buffer.",h,d,f,p,l)}}}else{var E=m(a,1);if(3!==E)switch(E){case 0:h.setAttribute(d,i({},c.property,new THREE.Vector2(_(a,2)||0,_(a,3)||0)));break;case 1:h.setAttribute(d,i({},c.property,new THREE.Vector3(_(a,2)||0,_(a,3)||0,_(a,4)||0)));break;case 2:h.setAttribute(d,i({},c.property,new THREE.Quaternion(_(a,2)||0,_(a,3)||0,_(a,4)||0,_(a,5)||0)))}else if(c.property){var U=i({},c.property,T(a,3));NAF.connection.adapter.sanitizeComponentValues(this.el,d,U,n)&&h.setAttribute(d,U)}else{if(!rt.has(d)){var S=AFRAME.components[d].schema;S.default?rt.set(d,[]):rt.set(d,[].concat(r(Object.keys(AFRAME.components[d].schema))).sort())}var F=a.length();if(F>1){for(var V={},D=rt.get(d),A=2;A<F;A+=2){var C=m(a,A),L=T(a,A+1);if(0===D.length){V=L;break}V[D[C]]=L}NAF.connection.adapter.sanitizeComponentValues(this.el,d,V,n)&&h.setAttribute(d,V)}}}}}},startLerpingFrame:function(){if(this.lerpers)for(var t=0;t<this.lerpers.length;t++)this.lerpers[t].lerper.startFrame()},removeLerp:function(){this.lerpers=[]},remove:function(){if(this.isMine()&&NAF.connection.isConnected())if(NAF.entities.hasEntity(this.data.networkId)){$.clear();var t=$.createString(this.data.networkId),e=j.createDeleteOp($,t),n=M.createDeletesVector($,[e]);M.startSceneUpdate($),M.addDeletes($,n);var i=M.endSceneUpdate($);$.finish(P.createMessage($,B.SceneUpdate,i)),NAF.connection.broadcastDataGuaranteed($.asUint8Array())}else NAF.log.error("Removing networked entity that is not in entities array.");NAF.entities.forgetEntity(this.data.networkId),document.body.dispatchEvent(this.entityRemovedEvent(this.data.networkId)),this.el.sceneEl.systems.networked.deregister(this)},entityCreatedEvent:function(){return new CustomEvent("entityCreated",{detail:{el:this.el}})},entityRemovedEvent:function(t){return new CustomEvent("entityRemoved",{detail:{networkId:t}})}})},function(t,e){"use strict";var n={debug:!1,updateRate:15,useLerp:!0,maxLerpDistance:null,firstSyncSource:null,syncSource:null};t.exports=n}]);