!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(25),n(49),n(50),n(48)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIZE_PREFIX_LENGTH=e.FILE_IDENTIFIER_LENGTH=e.SIZEOF_INT=e.SIZEOF_SHORT=void 0,e.SIZEOF_SHORT=2,e.SIZEOF_INT=4,e.FILE_IDENTIFIER_LENGTH=4,e.SIZE_PREFIX_LENGTH=4},function(t,e,n){"use strict";function i(t){return 1<<t}function r(t){return t>=-128&&t<=127?h.BitWidth.WIDTH8:t>=-32768&&t<=32767?h.BitWidth.WIDTH16:t>=-2147483648&&t<=2147483647?h.BitWidth.WIDTH32:h.BitWidth.WIDTH64}function o(t){return t===Math.fround(t)?h.BitWidth.WIDTH32:h.BitWidth.WIDTH64}function s(t){return t<=255?h.BitWidth.WIDTH8:t<=65535?h.BitWidth.WIDTH16:t<=4294967295?h.BitWidth.WIDTH32:h.BitWidth.WIDTH64}function a(t){return 1===t?h.BitWidth.WIDTH8:2===t?h.BitWidth.WIDTH16:4===t?h.BitWidth.WIDTH32:h.BitWidth.WIDTH64}function u(t,e){return~t+1&e-1}Object.defineProperty(e,"__esModule",{value:!0}),e.paddingSize=e.fromByteWidth=e.uwidth=e.fwidth=e.iwidth=e.toByteWidth=void 0;var h=n(3);e.toByteWidth=i,e.iwidth=r,e.fwidth=o,e.uwidth=s,e.fromByteWidth=a,e.paddingSize=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BitWidth=void 0;var n;!function(t){t[t.WIDTH8=0]="WIDTH8",t[t.WIDTH16=1]="WIDTH16",t[t.WIDTH32=2]="WIDTH32",t[t.WIDTH64=3]="WIDTH64"}(n=e.BitWidth||(e.BitWidth={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ByteBuffer=e.Builder=e.Encoding=e.createLong=e.Long=e.isLittleEndian=e.float64=e.float32=e.int32=e.SIZE_PREFIX_LENGTH=e.FILE_IDENTIFIER_LENGTH=e.SIZEOF_INT=e.SIZEOF_SHORT=void 0;var i=n(1);Object.defineProperty(e,"SIZEOF_SHORT",{enumerable:!0,get:function(){return i.SIZEOF_SHORT}});var r=n(1);Object.defineProperty(e,"SIZEOF_INT",{enumerable:!0,get:function(){return r.SIZEOF_INT}});var o=n(1);Object.defineProperty(e,"FILE_IDENTIFIER_LENGTH",{enumerable:!0,get:function(){return o.FILE_IDENTIFIER_LENGTH}});var s=n(1);Object.defineProperty(e,"SIZE_PREFIX_LENGTH",{enumerable:!0,get:function(){return s.SIZE_PREFIX_LENGTH}});var a=n(20);Object.defineProperty(e,"int32",{enumerable:!0,get:function(){return a.int32}}),Object.defineProperty(e,"float32",{enumerable:!0,get:function(){return a.float32}}),Object.defineProperty(e,"float64",{enumerable:!0,get:function(){return a.float64}}),Object.defineProperty(e,"isLittleEndian",{enumerable:!0,get:function(){return a.isLittleEndian}});var u=n(8);Object.defineProperty(e,"Long",{enumerable:!0,get:function(){return u.Long}}),Object.defineProperty(e,"createLong",{enumerable:!0,get:function(){return u.createLong}});var h=n(17);Object.defineProperty(e,"Encoding",{enumerable:!0,get:function(){return h.Encoding}});var c=n(11);Object.defineProperty(e,"Builder",{enumerable:!0,get:function(){return c.Builder}});var d=n(12);Object.defineProperty(e,"ByteBuffer",{enumerable:!0,get:function(){return d.ByteBuffer}})},function(t,e,n){"use strict";function i(t){var e=t.byteLength;if(e<3)throw"Buffer needs to be bigger than 3";var n=new DataView(t),i=n.getUint8(e-1),o=n.getUint8(e-2),s=(0,r.fromByteWidth)(i),a=e-i-2;return new c(n,a,s,o,"/")}Object.defineProperty(e,"__esModule",{value:!0}),e.Reference=e.toReference=void 0;var r=n(2),o=n(7),s=n(6),a=n(19),u=n(13),h=n(3);e.toReference=i;var c=function(){function t(t,e,n,i,r){this.dataView=t,this.offset=e,this.parentWidth=n,this.packedType=i,this.path=r,this._length=-1,this.byteWidth=1<<(3&i),this.valueType=i>>2}return t.prototype.isNull=function(){return this.valueType===o.ValueType.NULL},t.prototype.isNumber=function(){return(0,s.isNumber)(this.valueType)||(0,s.isIndirectNumber)(this.valueType)},t.prototype.isFloat=function(){return o.ValueType.FLOAT===this.valueType||o.ValueType.INDIRECT_FLOAT===this.valueType},t.prototype.isInt=function(){return this.isNumber()&&!this.isFloat()},t.prototype.isString=function(){return o.ValueType.STRING===this.valueType||o.ValueType.KEY===this.valueType},t.prototype.isBool=function(){return o.ValueType.BOOL===this.valueType},t.prototype.isBlob=function(){return o.ValueType.BLOB===this.valueType},t.prototype.isVector=function(){return(0,s.isAVector)(this.valueType)},t.prototype.isMap=function(){return o.ValueType.MAP===this.valueType},t.prototype.boolValue=function(){return this.isBool()?(0,a.readInt)(this.dataView,this.offset,this.parentWidth)>0:null},t.prototype.intValue=function(){return this.valueType===o.ValueType.INT?(0,a.readInt)(this.dataView,this.offset,this.parentWidth):this.valueType===o.ValueType.UINT?(0,a.readUInt)(this.dataView,this.offset,this.parentWidth):this.valueType===o.ValueType.INDIRECT_INT?(0,a.readInt)(this.dataView,(0,a.indirect)(this.dataView,this.offset,this.parentWidth),(0,r.fromByteWidth)(this.byteWidth)):this.valueType===o.ValueType.INDIRECT_UINT?(0,a.readUInt)(this.dataView,(0,a.indirect)(this.dataView,this.offset,this.parentWidth),(0,r.fromByteWidth)(this.byteWidth)):null},t.prototype.floatValue=function(){return this.valueType===o.ValueType.FLOAT?(0,a.readFloat)(this.dataView,this.offset,this.parentWidth):this.valueType===o.ValueType.INDIRECT_FLOAT?(0,a.readFloat)(this.dataView,(0,a.indirect)(this.dataView,this.offset,this.parentWidth),(0,r.fromByteWidth)(this.byteWidth)):null},t.prototype.numericValue=function(){return this.floatValue()||this.intValue()},t.prototype.stringValue=function(){if(this.valueType===o.ValueType.STRING||this.valueType===o.ValueType.KEY){var t=(0,a.indirect)(this.dataView,this.offset,this.parentWidth);return(0,u.fromUTF8Array)(new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+t,this.length()))}return null},t.prototype.blobValue=function(){if(this.isBlob()){var t=(0,a.indirect)(this.dataView,this.offset,this.parentWidth);return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+t,this.length())}return null},t.prototype.get=function(e){var n=this.length();if(Number.isInteger(e)&&(0,s.isAVector)(this.valueType)){if(e>=n||e<0)throw"Key: [".concat(e,"] is not applicable on ").concat(this.path," of ").concat(this.valueType," length: ").concat(n);var i=(0,a.indirect)(this.dataView,this.offset,this.parentWidth),o=i+e*this.byteWidth,u=this.dataView.getUint8(i+n*this.byteWidth+e);if((0,s.isTypedVector)(this.valueType)){var c=(0,s.typedVectorElementType)(this.valueType);u=(0,s.packedType)(c,h.BitWidth.WIDTH8)}else if((0,s.isFixedTypedVector)(this.valueType)){var c=(0,s.fixedTypedVectorElementType)(this.valueType);u=(0,s.packedType)(c,h.BitWidth.WIDTH8)}return new t(this.dataView,o,(0,r.fromByteWidth)(this.byteWidth),u,"".concat(this.path,"[").concat(e,"]"))}if("string"==typeof e){var d=(0,a.keyIndex)(e,this.dataView,this.offset,this.parentWidth,this.byteWidth,n);if(null!==d)return(0,a.valueForIndexWithKey)(d,e,this.dataView,this.offset,this.parentWidth,this.byteWidth,n,this.path)}throw"Key [".concat(e,"] is not applicable on ").concat(this.path," of ").concat(this.valueType)},t.prototype.length=function(){var t;if(this._length>-1)return this._length;if((0,s.isFixedTypedVector)(this.valueType))this._length=(0,s.fixedTypedVectorElementSize)(this.valueType);else if(this.valueType===o.ValueType.BLOB||this.valueType===o.ValueType.MAP||(0,s.isAVector)(this.valueType))this._length=(0,a.readUInt)(this.dataView,(0,a.indirect)(this.dataView,this.offset,this.parentWidth)-this.byteWidth,(0,r.fromByteWidth)(this.byteWidth));else if(this.valueType===o.ValueType.NULL)this._length=0;else if(this.valueType===o.ValueType.STRING){var e=(0,a.indirect)(this.dataView,this.offset,this.parentWidth),n=this.byteWidth;for(t=(0,a.readUInt)(this.dataView,e-n,(0,r.fromByteWidth)(this.byteWidth));0!==this.dataView.getInt8(e+t);)n<<=1,t=(0,a.readUInt)(this.dataView,e-n,(0,r.fromByteWidth)(this.byteWidth));this._length=t}else if(this.valueType===o.ValueType.KEY){var e=(0,a.indirect)(this.dataView,this.offset,this.parentWidth);for(t=1;0!==this.dataView.getInt8(e+t);)t++;this._length=t}else this._length=1;return this._length},t.prototype.toObject=function(){var t=this.length();if(this.isVector()){for(var e=[],n=0;n<t;n++)e.push(this.get(n).toObject());return e}if(this.isMap()){for(var e={},n=0;n<t;n++){var i=(0,a.keyForIndex)(n,this.dataView,this.offset,this.parentWidth,this.byteWidth);e[i]=(0,a.valueForIndexWithKey)(n,i,this.dataView,this.offset,this.parentWidth,this.byteWidth,t,this.path).toObject()}return e}return this.isNull()?null:this.isBool()?this.boolValue():this.isNumber()?this.numericValue():this.blobValue()||this.stringValue()},t}();e.Reference=c},function(t,e,n){"use strict";function i(t){return t===y.ValueType.BOOL||t<=y.ValueType.FLOAT}function r(t){return t>=y.ValueType.INT&&t<=y.ValueType.FLOAT}function o(t){return t>=y.ValueType.INDIRECT_INT&&t<=y.ValueType.INDIRECT_FLOAT}function s(t){return t===y.ValueType.BOOL||t>=y.ValueType.INT&&t<=y.ValueType.STRING}function a(t){return t===y.ValueType.VECTOR_BOOL||t>=y.ValueType.VECTOR_INT&&t<=y.ValueType.VECTOR_STRING_DEPRECATED}function u(t){return t>=y.ValueType.VECTOR_INT2&&t<=y.ValueType.VECTOR_FLOAT4}function h(t){return a(t)||u(t)||t===y.ValueType.VECTOR}function c(t,e){if(0===e)return t-y.ValueType.INT+y.ValueType.VECTOR_INT;if(2===e)return t-y.ValueType.INT+y.ValueType.VECTOR_INT2;if(3===e)return t-y.ValueType.INT+y.ValueType.VECTOR_INT3;if(4===e)return t-y.ValueType.INT+y.ValueType.VECTOR_INT4;throw"Unexpected length "+e}function d(t){return t-y.ValueType.VECTOR_INT+y.ValueType.INT}function f(t){return(t-y.ValueType.VECTOR_INT2)%3+y.ValueType.INT}function l(t){return((t-y.ValueType.VECTOR_INT2)/3>>0)+2}function p(t,e){return e|t<<2}Object.defineProperty(e,"__esModule",{value:!0}),e.packedType=e.fixedTypedVectorElementSize=e.fixedTypedVectorElementType=e.typedVectorElementType=e.toTypedVector=e.isAVector=e.isFixedTypedVector=e.isTypedVector=e.isTypedVectorElement=e.isIndirectNumber=e.isNumber=e.isInline=void 0;var y=n(7);e.isInline=i,e.isNumber=r,e.isIndirectNumber=o,e.isTypedVectorElement=s,e.isTypedVector=a,e.isFixedTypedVector=u,e.isAVector=h,e.toTypedVector=c,e.typedVectorElementType=d,e.fixedTypedVectorElementType=f,e.fixedTypedVectorElementSize=l,e.packedType=p},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValueType=void 0;var n;!function(t){t[t.NULL=0]="NULL",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t[t.FLOAT=3]="FLOAT",t[t.KEY=4]="KEY",t[t.STRING=5]="STRING",t[t.INDIRECT_INT=6]="INDIRECT_INT",t[t.INDIRECT_UINT=7]="INDIRECT_UINT",t[t.INDIRECT_FLOAT=8]="INDIRECT_FLOAT",t[t.MAP=9]="MAP",t[t.VECTOR=10]="VECTOR",t[t.VECTOR_INT=11]="VECTOR_INT",t[t.VECTOR_UINT=12]="VECTOR_UINT",t[t.VECTOR_FLOAT=13]="VECTOR_FLOAT",t[t.VECTOR_KEY=14]="VECTOR_KEY",t[t.VECTOR_STRING_DEPRECATED=15]="VECTOR_STRING_DEPRECATED",t[t.VECTOR_INT2=16]="VECTOR_INT2",t[t.VECTOR_UINT2=17]="VECTOR_UINT2",t[t.VECTOR_FLOAT2=18]="VECTOR_FLOAT2",t[t.VECTOR_INT3=19]="VECTOR_INT3",t[t.VECTOR_UINT3=20]="VECTOR_UINT3",t[t.VECTOR_FLOAT3=21]="VECTOR_FLOAT3",t[t.VECTOR_INT4=22]="VECTOR_INT4",t[t.VECTOR_UINT4=23]="VECTOR_UINT4",t[t.VECTOR_FLOAT4=24]="VECTOR_FLOAT4",t[t.BLOB=25]="BLOB",t[t.BOOL=26]="BOOL",t[t.VECTOR_BOOL=36]="VECTOR_BOOL"}(n=e.ValueType||(e.ValueType={}))},function(t,e){"use strict";function n(t,e){return i.create(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Long=e.createLong=void 0,e.createLong=n;var i=function(){function t(t,e){this.low=0|t,this.high=0|e}return t.create=function(e,n){return 0==e&&0==n?t.ZERO:new t(e,n)},t.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},t.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},t.ZERO=new t(0,0),t}();e.Long=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase();if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;for(var o=i(n(10)),s=[],a=0;a<256;++a)s.push((a+256).toString(16).substr(1));var u=r;e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return"string"==typeof t&&o.default.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(32)),s=r;e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Builder=void 0;var i=n(12),r=n(1),o=n(8),s=function(){function t(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;var e;e=t?t:1024,this.bb=i.ByteBuffer.allocate(e),this.space=e}return t.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null},t.prototype.forceDefaults=function(t){this.force_defaults=t},t.prototype.dataBuffer=function(){return this.bb},t.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},t.prototype.prep=function(e,n){e>this.minalign&&(this.minalign=e);for(var i=~(this.bb.capacity()-this.space+n)+1&e-1;this.space<i+e+n;){var r=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)},t.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},t.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},t.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},t.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},t.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},t.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},t.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},t.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},t.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},t.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},t.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},t.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},t.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},t.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},t.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},t.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},t.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},t.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},t.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},t.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},t.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},t.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},t.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},t.prototype.slot=function(t){null!==this.vtable&&(this.vtable[t]=this.offset())},t.prototype.offset=function(){return this.bb.capacity()-this.space},t.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,r=i.ByteBuffer.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r},t.prototype.addOffset=function(t){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-t+r.SIZEOF_INT)},t.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},t.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);var i=2;this.addInt16(t-this.object_start);var o=(n+i)*r.SIZEOF_SHORT;this.addInt16(o);var s=0,a=this.space;t:for(e=0;e<this.vtables.length;e++){var u=this.bb.capacity()-this.vtables[e];if(o==this.bb.readInt16(u)){for(var h=r.SIZEOF_SHORT;h<o;h+=r.SIZEOF_SHORT)if(this.bb.readInt16(a+h)!=this.bb.readInt16(u+h))continue t;s=this.vtables[e];break}}return s?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,s-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},t.prototype.finish=function(t,e,n){var i=n?r.SIZE_PREFIX_LENGTH:0;if(e){var o=e;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+i),o.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var s=r.FILE_IDENTIFIER_LENGTH-1;s>=0;s--)this.writeInt8(o.charCodeAt(s))}this.prep(this.minalign,r.SIZEOF_INT+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},t.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},t.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,i=n-this.bb.readInt32(n),r=0!=this.bb.readInt16(i+e);if(!r)throw new Error("FlatBuffers: field "+e+" must be set")},t.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(r.SIZEOF_INT,t*e),this.prep(n,t*e)},t.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},t.prototype.createSharedString=function(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);var e=this.createString(t);return this.string_maps.set(t,e),e},t.prototype.createString=function(t){if(!t)return 0;var e;if(t instanceof Uint8Array)e=t;else{e=[];for(var n=0;n<t.length;){var i=void 0,r=t.charCodeAt(n++);if(r<55296||r>=56320)i=r;else{var o=t.charCodeAt(n++);i=(r<<10)+o+-56613888}i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var n=0,s=this.space,a=this.bb.bytes();n<e.length;n++)a[s++]=e[n];return this.endVector()},t.prototype.createLong=function(t,e){return o.Long.create(t,e)},t.prototype.createObjectOffset=function(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)},t.prototype.createObjectOffsetList=function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];if(null===i)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(i))}return e},t.prototype.createStructOffsetList=function(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()},t}();e.Builder=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ByteBuffer=void 0;var i=n(1),r=n(8),o=n(20),s=n(17),a=function(){function t(t){this.bytes_=t,this.position_=0}return t.allocate=function(e){return new t(new Uint8Array(e))},t.prototype.clear=function(){this.position_=0},t.prototype.bytes=function(){return this.bytes_},t.prototype.position=function(){return this.position_},t.prototype.setPosition=function(t){this.position_=t},t.prototype.capacity=function(){return this.bytes_.length},t.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},t.prototype.readUint8=function(t){return this.bytes_[t]},t.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},t.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},t.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},t.prototype.readUint32=function(t){return this.readInt32(t)>>>0},t.prototype.readInt64=function(t){return new r.Long(this.readInt32(t),this.readInt32(t+4))},t.prototype.readUint64=function(t){return new r.Long(this.readUint32(t),this.readUint32(t+4))},t.prototype.readFloat32=function(t){return o.int32[0]=this.readInt32(t),o.float32[0]},t.prototype.readFloat64=function(t){return o.int32[o.isLittleEndian?0:1]=this.readInt32(t),o.int32[o.isLittleEndian?1:0]=this.readInt32(t+4),o.float64[0]},t.prototype.writeInt8=function(t,e){this.bytes_[t]=e},t.prototype.writeUint8=function(t,e){this.bytes_[t]=e},t.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},t.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},t.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},t.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},t.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},t.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},t.prototype.writeFloat32=function(t,e){o.float32[0]=e,this.writeInt32(t,o.int32[0])},t.prototype.writeFloat64=function(t,e){o.float64[0]=e,this.writeInt32(t,o.int32[o.isLittleEndian?0:1]),this.writeInt32(t+4,o.int32[o.isLittleEndian?1:0])},t.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<i.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+i.SIZEOF_INT+e));return t},t.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},t.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},t.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),r="",o=0;if(t+=i.SIZEOF_INT,e===s.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;o<n;){var a=void 0,u=this.readUint8(t+o++);if(u<192)a=u;else{var h=this.readUint8(t+o++);if(u<224)a=(31&u)<<6|63&h;else{var c=this.readUint8(t+o++);if(u<240)a=(15&u)<<12|(63&h)<<6|63&c;else{var d=this.readUint8(t+o++);a=(7&u)<<18|(63&h)<<12|(63&c)<<6|63&d}}}a<65536?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode((a>>10)+55296,(1023&a)+56320))}return r},t.prototype.__union_with_string=function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)},t.prototype.__indirect=function(t){return t+this.readInt32(t)},t.prototype.__vector=function(t){return t+this.readInt32(t)+i.SIZEOF_INT},t.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},t.prototype.__has_identifier=function(t){if(t.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var e=0;e<i.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+i.SIZEOF_INT+e))return!1;return!0},t.prototype.createLong=function(t,e){return r.Long.create(t,e)},t.prototype.createScalarList=function(t,e){for(var n=[],i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n},t.prototype.createObjList=function(t,e){for(var n=[],i=0;i<e;++i){var r=t(i);null!==r&&n.push(r.unpack())}return n},t}();e.ByteBuffer=a},function(t,e){"use strict";function n(t){var e=new TextDecoder;return e.decode(t)}function i(t){var e=new TextEncoder;return e.encode(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.toUTF8Array=e.fromUTF8Array=void 0,e.fromUTF8Array=n,e.toUTF8Array=i},function(t,e,n){"use strict";e.__esModule=!0,e.CustomOpT=e.CustomOp=void 0;var i=n(4),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsCustomOp=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsCustomOp=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.dataType=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.payload=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},t.startCustomOp=function(t){t.startObject(2)},t.addDataType=function(t,e){t.addFieldOffset(0,e,0)},t.addPayload=function(t,e){t.addFieldOffset(1,e,0)},t.endCustomOp=function(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e},t.createCustomOp=function(e,n,i){return t.startCustomOp(e),t.addDataType(e,n),t.addPayload(e,i),t.endCustomOp(e)},t.prototype.unpack=function(){return new o(this.dataType(),this.payload())},t.prototype.unpackTo=function(t){t.dataType=this.dataType(),t.payload=this.payload()},t}();e.CustomOp=r;var o=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.dataType=t,this.payload=e}return t.prototype.pack=function(t){var e=null!==this.dataType?t.createString(this.dataType):0,n=null!==this.payload?t.createString(this.payload):0;return r.createCustomOp(t,e,n)},t}();e.CustomOpT=o},function(t,e,n){"use strict";e.__esModule=!0,e.FullUpdateDataT=e.FullUpdateData=void 0;var i=n(4),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsFullUpdateData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsFullUpdateData=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.creator=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.creatorLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.creatorArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.template=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.persistent=function(){var t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},t.prototype.parentId=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},t.startFullUpdateData=function(t){t.startObject(4)},t.addCreator=function(t,e){t.addFieldOffset(0,e,0)},t.createCreatorVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startCreatorVector=function(t,e){t.startVector(1,e,1)},t.addTemplate=function(t,e){t.addFieldOffset(1,e,0)},t.addPersistent=function(t,e){t.addFieldInt8(2,+e,0)},t.addParentId=function(t,e){t.addFieldOffset(3,e,0)},t.endFullUpdateData=function(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e},t.createFullUpdateData=function(e,n,i,r,o){return t.startFullUpdateData(e),t.addCreator(e,n),t.addTemplate(e,i),t.addPersistent(e,r),t.addParentId(e,o),t.endFullUpdateData(e)},t.prototype.unpack=function(){return new o(this.bb.createScalarList(this.creator.bind(this),this.creatorLength()),this.template(),this.persistent(),this.parentId())},t.prototype.unpackTo=function(t){t.creator=this.bb.createScalarList(this.creator.bind(this),this.creatorLength()),t.template=this.template(),t.persistent=this.persistent(),t.parentId=this.parentId()},t}();e.FullUpdateData=r;var o=function(){function t(t,e,n,i){void 0===t&&(t=[]),void 0===e&&(e=null),void 0===n&&(n=!1),void 0===i&&(i=null),this.creator=t,this.template=e,this.persistent=n,this.parentId=i}return t.prototype.pack=function(t){var e=r.createCreatorVector(t,this.creator),n=null!==this.template?t.createString(this.template):0,i=null!==this.parentId?t.createString(this.parentId):0;return r.createFullUpdateData(t,e,n,this.persistent,i)},t}();e.FullUpdateDataT=o},function(t,e,n){"use strict";e.__esModule=!0,e.UpdateOpT=e.UpdateOp=void 0;var i=n(4),r=n(15),o=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsUpdateOp=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsUpdateOp=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.networkId=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.fullUpdateData=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?(t||new r.FullUpdateData).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null},t.prototype.owner=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.ownerLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.ownerArray=function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.lastOwnerTime=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.components=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.componentsLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.componentsArray=function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startUpdateOp=function(t){t.startObject(5)},t.addNetworkId=function(t,e){t.addFieldOffset(0,e,0)},t.addFullUpdateData=function(t,e){t.addFieldOffset(1,e,0)},t.addOwner=function(t,e){t.addFieldOffset(2,e,0)},t.createOwnerVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startOwnerVector=function(t,e){t.startVector(1,e,1)},t.addLastOwnerTime=function(t,e){t.addFieldInt32(3,e,0)},t.addComponents=function(t,e){t.addFieldOffset(4,e,0)},t.createComponentsVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startComponentsVector=function(t,e){t.startVector(1,e,1)},t.endUpdateOp=function(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,12),e},t.prototype.unpack=function(){return new s(this.networkId(),null!==this.fullUpdateData()?this.fullUpdateData().unpack():null,this.bb.createScalarList(this.owner.bind(this),this.ownerLength()),this.lastOwnerTime(),this.bb.createScalarList(this.components.bind(this),this.componentsLength()))},t.prototype.unpackTo=function(t){t.networkId=this.networkId(),t.fullUpdateData=null!==this.fullUpdateData()?this.fullUpdateData().unpack():null,t.owner=this.bb.createScalarList(this.owner.bind(this),this.ownerLength()),t.lastOwnerTime=this.lastOwnerTime(),t.components=this.bb.createScalarList(this.components.bind(this),this.componentsLength())},t}();e.UpdateOp=o;var s=function(){function t(t,e,n,i,r){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=0),
void 0===r&&(r=[]),this.networkId=t,this.fullUpdateData=e,this.owner=n,this.lastOwnerTime=i,this.components=r}return t.prototype.pack=function(t){var e=null!==this.networkId?t.createString(this.networkId):0,n=null!==this.fullUpdateData?this.fullUpdateData.pack(t):0,i=o.createOwnerVector(t,this.owner),r=o.createComponentsVector(t,this.components);return o.startUpdateOp(t),o.addNetworkId(t,e),o.addFullUpdateData(t,n),o.addOwner(t,i),o.addLastOwnerTime(t,this.lastOwnerTime),o.addComponents(t,r),o.endUpdateOp(t)},t}();e.UpdateOpT=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Encoding=void 0;var n;!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(n=e.Encoding||(e.Encoding={}))},function(t,e,n){"use strict";function i(){return new s.Builder}function r(t){return(0,a.toReference)(t).toObject()}function o(t,e,n,i,r){void 0===e&&(e=2048),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===r&&(r=!0);var o=new s.Builder(e>0?e:2048,n,i,r);return o.add(t),o.finish()}Object.defineProperty(e,"__esModule",{value:!0}),e.encode=e.toObject=e.builder=e.toReference=void 0;var s=n(28),a=n(5),u=n(5);Object.defineProperty(e,"toReference",{enumerable:!0,get:function(){return u.toReference}}),e.builder=i,e.toObject=r,e.encode=o},function(t,e,n){"use strict";function i(t,e,n){if(t.byteLength<=e+n||0!==(e&(0,l.toByteWidth)(n)-1))throw"Bad offset: "+e+", width: "+n}function r(t,e,n){return n<2?n<1?t.getInt8(e):t.getInt16(e,!0):n<3?t.getInt32(e,!0):void 0===t.setBigInt64?new b.Long(t.getUint32(e,!0),t.getUint32(e+4,!0)):t.getBigInt64(e,!0)}function o(t,e,n){return n<2?n<1?t.getUint8(e):t.getUint16(e,!0):n<3?t.getUint32(e,!0):void 0===t.getBigUint64?new b.Long(t.getUint32(e,!0),t.getUint32(e+4,!0)):t.getBigUint64(e,!0)}function s(t,e,n){if(n<f.BitWidth.WIDTH32)throw"Bad width: "+n;return n===f.BitWidth.WIDTH32?t.getFloat32(e,!0):t.getFloat64(e,!0)}function a(t,e,n){var i=o(t,e,n);return e-i}function u(t,e,n,i,r,s){for(var u=(0,p.toUTF8Array)(t),c=a(e,n,i)-3*r,d=(0,l.fromByteWidth)(r),f=c-o(e,c,d),y=o(e,c+r,d),b=0,v=s-1;b<=v;){var m=v+b>>1,w=h(u,m,e,f,y);if(0===w)return m;w<0?v=m-1:b=m+1}return null}function h(t,e,n,i,r){for(var s=i+e*r,a=s-o(n,s,(0,l.fromByteWidth)(r)),u=0;u<t.length;u++){var h=t[u]-n.getUint8(a+u);if(0!==h)return h}return 0===n.getUint8(a+t.length)?0:-1}function c(t,e,n,i,r,o,s,u){var h=a(n,i,r),c=h+t*o,d=n.getUint8(h+s*o+t);return new y.Reference(n,c,(0,l.fromByteWidth)(o),d,"".concat(u,"/").concat(e))}function d(t,e,n,i,r){for(var s=a(e,n,i)-3*r,u=(0,l.fromByteWidth)(r),h=s-o(e,s,u),c=o(e,s+r,u),d=h+t*c,f=d-o(e,d,(0,l.fromByteWidth)(c)),y=0;0!==e.getUint8(f+y);)y++;return(0,p.fromUTF8Array)(new Uint8Array(e.buffer,e.byteOffset+f,y))}Object.defineProperty(e,"__esModule",{value:!0}),e.keyForIndex=e.valueForIndexWithKey=e.diffKeys=e.keyIndex=e.indirect=e.readFloat=e.readUInt=e.readInt=e.validateOffset=void 0;var f=n(3),l=n(2),p=n(13),y=n(5),b=n(8);e.validateOffset=i,e.readInt=r,e.readUInt=o,e.readFloat=s,e.indirect=a,e.keyIndex=u,e.diffKeys=h,e.valueForIndexWithKey=c,e.keyForIndex=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isLittleEndian=e.float64=e.float32=e.int32=void 0,e.int32=new Int32Array(2),e.float32=new Float32Array(e.int32.buffer),e.float64=new Float64Array(e.int32.buffer),e.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return f.default}});var r=i(n(34)),o=i(n(35)),s=i(n(36)),a=i(n(37)),u=i(n(31)),h=i(n(38)),c=i(n(10)),d=i(n(9)),f=i(n(22))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(!(0,o.default)(t))throw TypeError("Invalid UUID");var e=void 0,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(10)),s=r;e.default=s},function(t,e){"use strict";function n(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=void 0,r=new Uint8Array(16)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}function o(t,e,n){function i(t,i,o,u){if("string"==typeof t&&(t=r(t)),"string"==typeof i&&(i=(0,a.default)(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+t.length);if(h.set(i),h.set(t,i.length),h=n(h),h[6]=15&h[6]|e,h[8]=63&h[8]|128,o){u=u||0;for(var c=0;c<16;++c)o[u+c]=h[c];return o}return(0,s.default)(h)}try{i.name=t}catch(t){}return i.DNS=u,i.URL=h,i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o,e.URL=e.DNS=void 0;var s=i(n(9)),a=i(n(22)),u="6ba7b810-9dad-11d1-80b4-00c04fd430c8";e.DNS=u;var h="6ba7b811-9dad-11d1-80b4-00c04fd430c8";e.URL=h},function(t,e,n){"use strict";var i=n(51),r=n(52),o=n(43),s=n(46),a=n(45),u=n(44),h=n(47),c={};c.app="",c.room="",c.clientId="",c.options=i,c.utils=r,c.log=new o,c.schemas=new s,c.version="0.6.1",c.adapters=new h;var d=new a,f=new u(d);c.connection=f,c.entities=d,t.exports=window.NAF=c},function(t,e,n){"use strict";e.__esModule=!0,e.DeleteOpT=e.DeleteOp=void 0;var i=n(4),r=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsDeleteOp=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsDeleteOp=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.networkId=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.startDeleteOp=function(t){t.startObject(1)},t.addNetworkId=function(t,e){t.addFieldOffset(0,e,0)},t.endDeleteOp=function(t){var e=t.endObject();return t.requiredField(e,4),e},t.createDeleteOp=function(e,n){return t.startDeleteOp(e),t.addNetworkId(e,n),t.endDeleteOp(e)},t.prototype.unpack=function(){return new o(this.networkId())},t.prototype.unpackTo=function(t){t.networkId=this.networkId()},t}();e.DeleteOp=r;var o=function(){function t(t){void 0===t&&(t=null),this.networkId=t}return t.prototype.pack=function(t){var e=null!==this.networkId?t.createString(this.networkId):0;return r.createDeleteOp(t,e)},t}();e.DeleteOpT=o},function(t,e,n){"use strict";e.__esModule=!0,e.MessageT=e.Message=void 0;var i=n(4),r=n(14),o=n(26),s=n(16),a=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsMessage=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsMessage=function(e,n){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.updates=function(t,e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new s.UpdateOp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.updatesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.deletes=function(t,e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new o.DeleteOp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.deletesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.customs=function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new r.CustomOp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.customsLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startMessage=function(t){t.startObject(3)},t.addUpdates=function(t,e){t.addFieldOffset(0,e,0)},t.createUpdatesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startUpdatesVector=function(t,e){t.startVector(4,e,4)},t.addDeletes=function(t,e){t.addFieldOffset(1,e,0)},t.createDeletesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startDeletesVector=function(t,e){t.startVector(4,e,4)},t.addCustoms=function(t,e){t.addFieldOffset(2,e,0)},t.createCustomsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startCustomsVector=function(t,e){t.startVector(4,e,4)},t.endMessage=function(t){var e=t.endObject();return e},t.finishMessageBuffer=function(t,e){t.finish(e)},t.finishSizePrefixedMessageBuffer=function(t,e){t.finish(e,void 0,!0)},t.createMessage=function(e,n,i,r){return t.startMessage(e),t.addUpdates(e,n),t.addDeletes(e,i),t.addCustoms(e,r),t.endMessage(e)},t.prototype.unpack=function(){return new u(this.bb.createObjList(this.updates.bind(this),this.updatesLength()),this.bb.createObjList(this.deletes.bind(this),this.deletesLength()),this.bb.createObjList(this.customs.bind(this),this.customsLength()))},t.prototype.unpackTo=function(t){t.updates=this.bb.createObjList(this.updates.bind(this),this.updatesLength()),t.deletes=this.bb.createObjList(this.deletes.bind(this),this.deletesLength()),t.customs=this.bb.createObjList(this.customs.bind(this),this.customsLength())},t}();e.Message=a;var u=function(){function t(t,e,n){void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===n&&(n=[]),this.updates=t,this.deletes=e,this.customs=n}return t.prototype.pack=function(t){var e=a.createUpdatesVector(t,t.createObjectOffsetList(this.updates)),n=a.createDeletesVector(t,t.createObjectOffsetList(this.deletes)),i=a.createCustomsVector(t,t.createObjectOffsetList(this.customs));return a.createMessage(t,e,n,i)},t}();e.MessageT=u},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.Builder=void 0;var r=n(3),o=n(2),s=n(13),a=n(7),u=n(6),h=n(29),c=function(){function t(t,e,n,i){void 0===t&&(t=2048),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=!0),this.dedupStrings=e,this.dedupKeys=n,this.dedupKeyVectors=i,this.stack=[],this.stackPointers=[],this.offset=0,this.finished=!1,this.stringLookup={},this.keyLookup={},this.keyVectorLookup={},this.indirectIntLookup={},this.indirectUIntLookup={},this.indirectFloatLookup={},this.buffer=new ArrayBuffer(t>0?t:2048),this.view=new DataView(this.buffer)}return t.prototype.align=function(t){var e=(0,o.toByteWidth)(t);return this.offset+=(0,o.paddingSize)(this.offset,e),e},t.prototype.computeOffset=function(t){for(var e=this.offset+t,n=this.buffer.byteLength,i=n;n<e;)n<<=1;if(i<n){var r=this.buffer;this.buffer=new ArrayBuffer(n),this.view=new DataView(this.buffer),new Uint8Array(this.buffer).set(new Uint8Array(r),0)}return e},t.prototype.pushInt=function(t,e){if(e===r.BitWidth.WIDTH8)this.view.setInt8(this.offset,t);else if(e===r.BitWidth.WIDTH16)this.view.setInt16(this.offset,t,!0);else if(e===r.BitWidth.WIDTH32)this.view.setInt32(this.offset,t,!0);else{if(e!==r.BitWidth.WIDTH64)throw"Unexpected width: ".concat(e," for value: ").concat(t);this.view.setBigInt64(this.offset,BigInt(t),!0)}},t.prototype.pushUInt=function(t,e){if(e===r.BitWidth.WIDTH8)this.view.setUint8(this.offset,t);else if(e===r.BitWidth.WIDTH16)this.view.setUint16(this.offset,t,!0);else if(e===r.BitWidth.WIDTH32)this.view.setUint32(this.offset,t,!0);else{if(e!==r.BitWidth.WIDTH64)throw"Unexpected width: ".concat(e," for value: ").concat(t);this.view.setBigUint64(this.offset,BigInt(t),!0)}},t.prototype.writeInt=function(t,e){var n=this.computeOffset(e);this.pushInt(t,(0,o.fromByteWidth)(e)),this.offset=n},t.prototype.writeUInt=function(t,e){var n=this.computeOffset(e);this.pushUInt(t,(0,o.fromByteWidth)(e)),this.offset=n},t.prototype.writeBlob=function(t){var e=t.byteLength,n=(0,o.uwidth)(e),i=this.align(n);this.writeUInt(e,i);var r=this.offset,s=this.computeOffset(e);new Uint8Array(this.buffer).set(new Uint8Array(t),r),this.stack.push(this.offsetStackValue(r,a.ValueType.BLOB,n)),this.offset=s},t.prototype.writeString=function(t){if(this.dedupStrings&&Object.prototype.hasOwnProperty.call(this.stringLookup,t))return void this.stack.push(this.stringLookup[t]);var e=(0,s.toUTF8Array)(t),n=e.length,i=(0,o.uwidth)(n),r=this.align(i);this.writeUInt(n,r);var u=this.offset,h=this.computeOffset(n+1);new Uint8Array(this.buffer).set(e,u);var c=this.offsetStackValue(u,a.ValueType.STRING,i);this.stack.push(c),this.dedupStrings&&(this.stringLookup[t]=c),this.offset=h},t.prototype.writeKey=function(t){if(this.dedupKeys&&Object.prototype.hasOwnProperty.call(this.keyLookup,t))return void this.stack.push(this.keyLookup[t]);var e=(0,s.toUTF8Array)(t),n=e.length,i=this.computeOffset(n+1);new Uint8Array(this.buffer).set(e,this.offset);var o=this.offsetStackValue(this.offset,a.ValueType.KEY,r.BitWidth.WIDTH8);this.stack.push(o),this.dedupKeys&&(this.keyLookup[t]=o),this.offset=i},t.prototype.writeStackValue=function(t,e){var n=this.computeOffset(e);if(t.isOffset()){var i=this.offset-t.offset;if(!(8===e||BigInt(i)<BigInt(1)<<BigInt(8*e)))throw"Unexpected size ".concat(e,". This might be a bug. Please create an issue https://github.com/google/flatbuffers/issues/new");this.writeUInt(i,e)}else t.writeToBuffer(e);this.offset=n},t.prototype.integrityCheckOnValueAddition=function(){if(this.finished)throw"Adding values after finish is prohibited";if(0!==this.stackPointers.length&&this.stackPointers[this.stackPointers.length-1].isVector===!1&&this.stack[this.stack.length-1].type!==a.ValueType.KEY)throw"Adding value to a map before adding a key is prohibited"},t.prototype.integrityCheckOnKeyAddition=function(){if(this.finished)throw"Adding values after finish is prohibited";if(0===this.stackPointers.length||this.stackPointers[this.stackPointers.length-1].isVector)throw"Adding key before starting a map is prohibited"},t.prototype.startVector=function(){this.stackPointers.push({stackPosition:this.stack.length,isVector:!0})},t.prototype.startMap=function(t){void 0===t&&(t=!1),this.stackPointers.push({stackPosition:this.stack.length,isVector:!1,presorted:t})},t.prototype.endVector=function(t){var e=this.stack.length-t.stackPosition,n=this.createVector(t.stackPosition,e,1);this.stack.splice(t.stackPosition,e),this.stack.push(n)},t.prototype.endMap=function(t){t.presorted||this.sort(t);for(var e="",n=t.stackPosition;n<this.stack.length;n+=2)e+=",".concat(this.stack[n].offset);var i=this.stack.length-t.stackPosition>>1;this.dedupKeyVectors&&!Object.prototype.hasOwnProperty.call(this.keyVectorLookup,e)&&(this.keyVectorLookup[e]=this.createVector(t.stackPosition,i,2));var r=this.dedupKeyVectors?this.keyVectorLookup[e]:this.createVector(t.stackPosition,i,2),o=this.createVector(t.stackPosition+1,i,2,r);this.stack.splice(t.stackPosition,i<<1),this.stack.push(o)},t.prototype.sort=function(t){function e(t,e){if(t.type!==a.ValueType.KEY||e.type!==a.ValueType.KEY)throw"Stack values are not keys ".concat(t," | ").concat(e,". Check if you combined [addKey] with add... method calls properly.");var n,i,r=0;do{if(n=s.getUint8(t.offset+r),i=s.getUint8(e.offset+r),i<n)return!0;if(n<i)return!1;r+=1}while(0!==n&&0!==i);return!1}function n(t,e,n){if(e!==n){var i=t[e],r=t[e+1];t[e]=t[n],t[e+1]=t[n+1],t[n]=i,t[n+1]=r}}function i(){for(var i=t.stackPosition;i<u.length;i+=2){for(var r=i,o=i+2;o<u.length;o+=2)e(u[r],u[o])&&(r=o);r!==i&&n(u,r,i)}}function r(t,e){if(t.type!==a.ValueType.KEY||e.type!==a.ValueType.KEY)throw"Stack values are not keys ".concat(t," | ").concat(e,". Check if you combined [addKey] with add... method calls properly.");if(t.offset===e.offset)return!1;var n,i,r=0;do{if(n=s.getUint8(t.offset+r),i=s.getUint8(e.offset+r),n<i)return!0;if(i<n)return!1;r+=1}while(0!==n&&0!==i);return!1}function o(t,e){if(t<e){var i=t+2*(e-t>>2),s=u[i],a=t,h=e;do{for(;r(u[a],s);)a+=2;for(;r(s,u[h]);)h-=2;a<=h&&(n(u,a,h),a+=2,h-=2)}while(a<=h);o(t,h),o(a,e)}}for(var s=this.view,u=this.stack,h=!0,c=t.stackPosition;c<this.stack.length-2;c+=2)if(e(this.stack[c],this.stack[c+2])){h=!1;break}h||(this.stack.length-t.stackPosition>40?o(t.stackPosition,this.stack.length-2):i())},t.prototype.end=function(){if(!(this.stackPointers.length<1)){var t=this.stackPointers.pop();t.isVector?this.endVector(t):this.endMap(t)}},t.prototype.createVector=function(t,e,n,i){void 0===i&&(i=null);var r=(0,o.uwidth)(e),s=1;if(null!==i){var h=i.elementWidth(this.offset,0);h>r&&(r=h),s+=2}for(var c=a.ValueType.KEY,d=null===i,f=t;f<this.stack.length;f+=n){var h=this.stack[f].elementWidth(this.offset,f+s);h>r&&(r=h),f===t?(c=this.stack[f].type,d=d&&(0,u.isTypedVectorElement)(c)):c!==this.stack[f].type&&(d=!1)}var l=this.align(r),p=d&&(0,u.isNumber)(c)&&e>=2&&e<=4;null!==i&&(this.writeStackValue(i,l),this.writeUInt(1<<i.width,l)),p||this.writeUInt(e,l);for(var y=this.offset,f=t;f<this.stack.length;f+=n)this.writeStackValue(this.stack[f],l);if(!d)for(var f=t;f<this.stack.length;f+=n)this.writeUInt(this.stack[f].storedPackedType(),1);if(null!==i)return this.offsetStackValue(y,a.ValueType.MAP,r);if(d){var b=(0,u.toTypedVector)(c,p?e:0);return this.offsetStackValue(y,b,r)}return this.offsetStackValue(y,a.ValueType.VECTOR,r)},t.prototype.nullStackValue=function(){return new h.StackValue(this,a.ValueType.NULL,r.BitWidth.WIDTH8)},t.prototype.boolStackValue=function(t){return new h.StackValue(this,a.ValueType.BOOL,r.BitWidth.WIDTH8,t)},t.prototype.intStackValue=function(t){return new h.StackValue(this,a.ValueType.INT,(0,o.iwidth)(t),t)},t.prototype.uintStackValue=function(t){return new h.StackValue(this,a.ValueType.UINT,(0,o.uwidth)(t),t)},t.prototype.floatStackValue=function(t){return new h.StackValue(this,a.ValueType.FLOAT,(0,o.fwidth)(t),t)},t.prototype.offsetStackValue=function(t,e,n){return new h.StackValue(this,e,n,null,t)},t.prototype.finishBuffer=function(){if(1!==this.stack.length)throw"Stack has to be exactly 1, but it is ".concat(this.stack.length,". You have to end all started vectors and maps before calling [finish]");var t=this.stack[0],e=this.align(t.elementWidth(this.offset,0));this.writeStackValue(t,e),this.writeUInt(t.storedPackedType(),1),this.writeUInt(e,1),this.finished=!0},t.prototype.add=function(t){if(this.integrityCheckOnValueAddition(),"undefined"==typeof t)throw"You need to provide a value";if(null===t)this.stack.push(this.nullStackValue());else if("boolean"==typeof t)this.stack.push(this.boolStackValue(t));else if("bigint"==typeof t)this.stack.push(this.intStackValue(t));else if("number"==typeof t)Number.isInteger(t)?this.stack.push(this.intStackValue(t)):this.stack.push(this.floatStackValue(t));else if(ArrayBuffer.isView(t))this.writeBlob(t.buffer);else if("string"==typeof t||t instanceof String)this.writeString(t);else if(Array.isArray(t)){this.startVector();for(var e=0;e<t.length;e++)this.add(t[e]);this.end()}else{if("object"!==("undefined"==typeof t?"undefined":i(t)))throw"Unexpected value input ".concat(t);var n=Object.getOwnPropertyNames(t).sort();this.startMap(!0);for(var e=0;e<n.length;e++){var r=n[e];this.addKey(r),this.add(t[r])}this.end()}},t.prototype.finish=function(){this.finished||this.finishBuffer();var t=this.buffer.slice(0,this.offset);return new Uint8Array(t)},t.prototype.isFinished=function(){return this.finished},t.prototype.addKey=function(t){this.integrityCheckOnKeyAddition(),this.writeKey(t)},t.prototype.addInt=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.integrityCheckOnValueAddition(),!e)return void this.stack.push(this.intStackValue(t));if(n&&Object.prototype.hasOwnProperty.call(this.indirectIntLookup,t))return void this.stack.push(this.indirectIntLookup[t]);var i=this.intStackValue(t),r=this.align(i.width),o=this.computeOffset(r),s=this.offset;i.writeToBuffer(r);var u=this.offsetStackValue(s,a.ValueType.INDIRECT_INT,i.width);this.stack.push(u),this.offset=o,n&&(this.indirectIntLookup[t]=u)},t.prototype.addUInt=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.integrityCheckOnValueAddition(),!e)return void this.stack.push(this.uintStackValue(t));if(n&&Object.prototype.hasOwnProperty.call(this.indirectUIntLookup,t))return void this.stack.push(this.indirectUIntLookup[t]);var i=this.uintStackValue(t),r=this.align(i.width),o=this.computeOffset(r),s=this.offset;i.writeToBuffer(r);var u=this.offsetStackValue(s,a.ValueType.INDIRECT_UINT,i.width);this.stack.push(u),this.offset=o,n&&(this.indirectUIntLookup[t]=u)},t.prototype.addFloat=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.integrityCheckOnValueAddition(),!e)return void this.stack.push(this.floatStackValue(t));if(n&&Object.prototype.hasOwnProperty.call(this.indirectFloatLookup,t))return void this.stack.push(this.indirectFloatLookup[t]);var i=this.floatStackValue(t),r=this.align(i.width),o=this.computeOffset(r),s=this.offset;i.writeToBuffer(r);var u=this.offsetStackValue(s,a.ValueType.INDIRECT_FLOAT,i.width);this.stack.push(u),this.offset=o,n&&(this.indirectFloatLookup[t]=u)},t}();e.Builder=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StackValue=void 0;var i=n(3),r=n(2),o=n(7),s=n(6),a=function(){function t(t,e,n,i,r){void 0===i&&(i=null),void 0===r&&(r=0),this.builder=t,this.type=e,this.width=n,this.value=i,this.offset=r}return t.prototype.elementWidth=function(t,e){if((0,s.isInline)(this.type))return this.width;for(var n=0;n<4;n++){var i=1<<n,o=t+(0,r.paddingSize)(t,i)+e*i,a=o-this.offset,u=(0,r.uwidth)(a);if(1<<u===i)return u}throw"Element is unknown. Size: ".concat(t," at index: ").concat(e,". This might be a bug. Please create an issue https://github.com/google/flatbuffers/issues/new")},t.prototype.writeToBuffer=function(t){var e=this.builder.computeOffset(t);if(this.type===o.ValueType.FLOAT)this.width===i.BitWidth.WIDTH32?this.builder.view.setFloat32(this.builder.offset,this.value,!0):this.builder.view.setFloat64(this.builder.offset,this.value,!0);else if(this.type===o.ValueType.INT){var n=(0,r.fromByteWidth)(t);this.builder.pushInt(this.value,n)}else if(this.type===o.ValueType.UINT){var n=(0,r.fromByteWidth)(t);this.builder.pushUInt(this.value,n)}else if(this.type===o.ValueType.NULL)this.builder.pushInt(0,this.width);else{if(this.type!==o.ValueType.BOOL)throw"Unexpected type: ".concat(this.type,". This might be a bug. Please create an issue https://github.com/google/flatbuffers/issues/new");this.builder.pushInt(this.value?1:0,this.width)}this.offset=e},t.prototype.storedWidth=function(t){return void 0===t&&(t=i.BitWidth.WIDTH8),(0,s.isInline)(this.type)?Math.max(t,this.width):this.width},t.prototype.storedPackedType=function(t){return void 0===t&&(t=i.BitWidth.WIDTH8),(0,s.packedType)(this.type,this.storedWidth(t))},t.prototype.isOffset=function(){return!(0,s.isInline)(this.type)},t}();e.StackValue=a},function(t,e){"use strict";function n(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return i(o(s(t),8*t.length))}function i(t){for(var e=[],n=32*t.length,i="0123456789abcdef",r=0;r<n;r+=8){var o=t[r>>5]>>>r%32&255,s=parseInt(i.charAt(o>>>4&15)+i.charAt(15&o),16);e.push(s)}return e}function r(t){return(t+64>>>9<<4)+14+1}function o(t,e){t[e>>5]|=128<<e%32,t[r(e)-1]=e;for(var n=1732584193,i=-271733879,o=-1732584194,s=271733878,u=0;u<t.length;u+=16){var h=n,p=i,y=o,b=s;n=c(n,i,o,s,t[u],7,-680876936),s=c(s,n,i,o,t[u+1],12,-389564586),o=c(o,s,n,i,t[u+2],17,606105819),i=c(i,o,s,n,t[u+3],22,-1044525330),n=c(n,i,o,s,t[u+4],7,-176418897),s=c(s,n,i,o,t[u+5],12,1200080426),o=c(o,s,n,i,t[u+6],17,-1473231341),i=c(i,o,s,n,t[u+7],22,-45705983),n=c(n,i,o,s,t[u+8],7,1770035416),s=c(s,n,i,o,t[u+9],12,-1958414417),o=c(o,s,n,i,t[u+10],17,-42063),i=c(i,o,s,n,t[u+11],22,-1990404162),n=c(n,i,o,s,t[u+12],7,1804603682),s=c(s,n,i,o,t[u+13],12,-40341101),o=c(o,s,n,i,t[u+14],17,-1502002290),i=c(i,o,s,n,t[u+15],22,1236535329),n=d(n,i,o,s,t[u+1],5,-165796510),s=d(s,n,i,o,t[u+6],9,-1069501632),o=d(o,s,n,i,t[u+11],14,643717713),i=d(i,o,s,n,t[u],20,-373897302),n=d(n,i,o,s,t[u+5],5,-701558691),s=d(s,n,i,o,t[u+10],9,38016083),o=d(o,s,n,i,t[u+15],14,-660478335),i=d(i,o,s,n,t[u+4],20,-405537848),n=d(n,i,o,s,t[u+9],5,568446438),s=d(s,n,i,o,t[u+14],9,-1019803690),o=d(o,s,n,i,t[u+3],14,-187363961),i=d(i,o,s,n,t[u+8],20,1163531501),n=d(n,i,o,s,t[u+13],5,-1444681467),s=d(s,n,i,o,t[u+2],9,-51403784),o=d(o,s,n,i,t[u+7],14,1735328473),i=d(i,o,s,n,t[u+12],20,-1926607734),n=f(n,i,o,s,t[u+5],4,-378558),s=f(s,n,i,o,t[u+8],11,-2022574463),o=f(o,s,n,i,t[u+11],16,1839030562),i=f(i,o,s,n,t[u+14],23,-35309556),n=f(n,i,o,s,t[u+1],4,-1530992060),s=f(s,n,i,o,t[u+4],11,1272893353),o=f(o,s,n,i,t[u+7],16,-155497632),i=f(i,o,s,n,t[u+10],23,-1094730640),n=f(n,i,o,s,t[u+13],4,681279174),s=f(s,n,i,o,t[u],11,-358537222),o=f(o,s,n,i,t[u+3],16,-722521979),i=f(i,o,s,n,t[u+6],23,76029189),n=f(n,i,o,s,t[u+9],4,-640364487),s=f(s,n,i,o,t[u+12],11,-421815835),o=f(o,s,n,i,t[u+15],16,530742520),i=f(i,o,s,n,t[u+2],23,-995338651),n=l(n,i,o,s,t[u],6,-198630844),s=l(s,n,i,o,t[u+7],10,1126891415),o=l(o,s,n,i,t[u+14],15,-1416354905),i=l(i,o,s,n,t[u+5],21,-57434055),n=l(n,i,o,s,t[u+12],6,1700485571),s=l(s,n,i,o,t[u+3],10,-1894986606),o=l(o,s,n,i,t[u+10],15,-1051523),i=l(i,o,s,n,t[u+1],21,-2054922799),n=l(n,i,o,s,t[u+8],6,1873313359),s=l(s,n,i,o,t[u+15],10,-30611744),o=l(o,s,n,i,t[u+6],15,-1560198380),i=l(i,o,s,n,t[u+13],21,1309151649),n=l(n,i,o,s,t[u+4],6,-145523070),s=l(s,n,i,o,t[u+11],10,-1120210379),o=l(o,s,n,i,t[u+2],15,718787259),i=l(i,o,s,n,t[u+9],21,-343485551),n=a(n,h),i=a(i,p),o=a(o,y),s=a(s,b)}return[n,i,o,s]}function s(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(r(e)),i=0;i<e;i+=8)n[i>>5]|=(255&t[i/8])<<i%32;return n}function a(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function u(t,e){return t<<e|t>>>32-e}function h(t,e,n,i,r,o){return a(u(a(a(e,t),a(i,o)),r),n)}function c(t,e,n,i,r,o,s){return h(e&n|~e&i,t,e,r,o,s)}function d(t,e,n,i,r,o,s){return h(e&i|n&~i,t,e,r,o,s)}function f(t,e,n,i,r,o,s){return h(e^n^i,t,e,r,o,s)}function l(t,e,n,i,r,o,s){return h(n^(e|~i),t,e,r,o,s)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var p=n;e.default=p},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n="00000000-0000-0000-0000-000000000000";e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;e.default=n},function(t,e){"use strict";function n(t,e,n,i){switch(t){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function i(t,e){return t<<e|t>>>32-e}function r(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var o=unescape(encodeURIComponent(t));t=[];for(var s=0;s<o.length;++s)t.push(o.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var a=t.length/4+2,u=Math.ceil(a/16),h=new Array(u),c=0;c<u;++c){for(var d=new Uint32Array(16),f=0;f<16;++f)d[f]=t[64*c+4*f]<<24|t[64*c+4*f+1]<<16|t[64*c+4*f+2]<<8|t[64*c+4*f+3];h[c]=d}h[u-1][14]=8*(t.length-1)/Math.pow(2,32),h[u-1][14]=Math.floor(h[u-1][14]),h[u-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<u;++l){for(var p=new Uint32Array(80),y=0;y<16;++y)p[y]=h[l][y];for(var b=16;b<80;++b)p[b]=i(p[b-3]^p[b-8]^p[b-14]^p[b-16],1);for(var v=r[0],m=r[1],w=r[2],g=r[3],T=r[4],_=0;_<80;++_){var I=Math.floor(_/20),O=i(v,5)+n(I,m,w,g)+T+e[I]+p[_]>>>0;T=g,g=w,w=i(m,30)>>>0,m=v,v=O}r[0]=r[0]+v>>>0,r[1]=r[1]+m>>>0,r[2]=r[2]+w>>>0,r[3]=r[3]+g>>>0,r[4]=r[4]+T>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r;e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i=e&&n||0,r=e||new Array(16);t=t||{};var d=t.node||a,f=void 0!==t.clockseq?t.clockseq:u;if(null==d||null==f){var l=t.random||(t.rng||o.default)();null==d&&(d=a=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==f&&(f=u=16383&(l[6]<<8|l[7]))}var p=void 0!==t.msecs?t.msecs:Date.now(),y=void 0!==t.nsecs?t.nsecs:c+1,b=p-h+(y-c)/1e4;if(b<0&&void 0===t.clockseq&&(f=f+1&16383),(b<0||p>h)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=p,c=y,u=f,p+=122192928e5;var v=(1e4*(268435455&p)+y)%4294967296;r[i++]=v>>>24&255,r[i++]=v>>>16&255,r[i++]=v>>>8&255,r[i++]=255&v;var m=p/4294967296*1e4&268435455;r[i++]=m>>>8&255,r[i++]=255&m,r[i++]=m>>>24&15|16,r[i++]=m>>>16&255,r[i++]=f>>>8|128,r[i++]=255&f;for(var w=0;w<6;++w)r[i+w]=d[w];return e||(0,s.default)(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(23)),s=i(n(9)),a=void 0,u=void 0,h=0,c=0,d=r;e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(24)),o=i(n(30)),s=(0,r.default)("v3",48,o.default),a=s;e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){t=t||{};var i=t.random||(t.rng||o.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=i[r];return e}return(0,s.default)(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(23)),s=i(n(9)),a=r;e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(24)),o=i(n(33)),s=(0,r.default)("v5",80,o.default),a=s;e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(!(0,o.default)(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(10)),s=r;e.default=s},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){
for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.dict={}}return i(t,[{key:"addChild",value:function(t,e){this.hasParent(t)||(this.dict[t]=[]),this.dict[t].push(e)}},{key:"getChildren",value:function(t){if(!this.hasParent(t))return[];var e=this.dict[t];return delete this.dict[t],e}},{key:"hasParent",value:function(t){return this.dict.hasOwnProperty(t)}}]),t}();t.exports=r},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=Array.isArray,r=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function t(e,s){if(e===s)return!0;if(e&&s&&"object"==("undefined"==typeof e?"undefined":n(e))&&"object"==("undefined"==typeof s?"undefined":n(s))){var a,u,h,c=i(e),d=i(s);if(c&&d){if(u=e.length,u!=s.length)return!1;for(a=u;0!==a--;)if(!t(e[a],s[a]))return!1;return!0}if(c!=d)return!1;var f=e instanceof Date,l=s instanceof Date;if(f!=l)return!1;if(f&&l)return e.getTime()==s.getTime();var p=e instanceof RegExp,y=s instanceof RegExp;if(p!=y)return!1;if(p&&y)return e.toString()==s.toString();var b=r(e);if(u=b.length,u!==r(s).length)return!1;for(a=u;0!==a--;)if(!o.call(s,b[a]))return!1;for(a=u;0!==a--;)if(h=b[a],!t(e[h],s[h]))return!1;return!0}return e!==e&&s!==s}},function(t,e,n){"use strict";var i=n(18),r=n(2),o=r.fromByteWidth,s=n(6),a=(s.isNumber,s.isIndirectNumber,s.isAVector,s.fixedTypedVectorElementSize,s.isFixedTypedVector),u=s.isTypedVector,h=s.typedVectorElementType,c=s.packedType,d=s.fixedTypedVectorElementType,f=n(19),l=f.indirect,p=(f.keyForIndex,f.keyIndex,f.readFloat,f.readInt,f.readUInt,f.valueForIndexWithKey,n(3)),y=p.BitWidth,b=new i.toReference(new ArrayBuffer(4)),v=new i.toReference(new ArrayBuffer(4)),m=function(t,e){var n=e.byteLength;t.dataView.buffer!==e&&(t.dataView=new DataView(e));var i=t.dataView.getUint8(n-1);t.packedType=t.dataView.getUint8(n-2),t.parentWidth=o(i),t.offset=n-i-2,t.byteWidth=1<<(3&t.packedType),t.valueType=t.packedType>>2,t._length=-1},w=function(t,e){var n=t.length(),i=l(t.dataView,t.offset,t.parentWidth),r=i+e*t.byteWidth,s=t.dataView.getUint8(i+n*t.byteWidth+e);if(u(t.valueType)){var f=h(t.valueType);s=c(f,y.WIDTH8)}else if(a(t.valueType)){var p=d(t.valueType);s=c(p,y.WIDTH8)}t.offset=r,t.parentWidth=o(t.byteWidth),t.packedType=s,t.byteWidth=1<<(3&t.packedType),t.valueType=t.packedType>>2,t._length=-1},g=function(t,e){e.dataView=t.dataView,e.packedType=t.packedType,e.parentWidth=t.parentWidth,e.offset=t.offset,e.byteWidth=t.byteWidth,e.valueType=t.valueType,e.length(),e._length=t._length},T=function(t,e){return g(t,b),w(b,e),b.boolValue()},_=function(t,e){return g(t,b),w(b,e),b.intValue()},I=function(t,e){return g(t,b),w(b,e),b.numericValue()},O=function(t,e){return g(t,b),w(b,e),b.stringValue()},E=function(t,e){return g(t,b),w(b,e),b.toObject()},k=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.length=16,g(t,v),w(v,e);for(var i=0;i<16;i++)n[i]=_(v,i);return n};t.exports={refReset:m,refAdvanceToIndexGet:w,refGetBool:T,refGetInt:_,refGetNumeric:I,refGetString:O,refGetUuidBytes:k,refCp:g,refGetToObject:E}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=30,o=1,s=2,a=4,u=new THREE.Quaternion,h=350,c=1e-4,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;n(this,t),this.frames=[],this.frameIndex=-1,this.running=0,this.firstTypeFlags=0,this.maxLerpDistanceSq=i*i;for(var s=0;s<r;s++)this.frames.push([0,0,0,0,0,0,0,0,0,1,1,1]);this.bufferTimeMs=1e3/e*o}return i(t,[{key:"reset",value:function(){this.frameIndex=-1,this.firstTypeFlags=0;for(var t=0;t<this.frames.length;t++)this.frames[t][0]=0}},{key:"lerp",value:function(t,e,n){return t+(e-t)*n}},{key:"startFrame",value:function(){this.frameIndex=(this.frameIndex+1)%this.frames.length;var t=this.frames[this.frameIndex];t[0]=performance.now(),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=1,t[10]=1,t[11]=1}},{key:"setPosition",value:function(t,e,n){var i=this.frames[this.frameIndex];this.running|=o,i[1]|=o,i[2]=t,i[3]=e,i[4]=n}},{key:"setQuaternion",value:function(t,e,n,i){var r=this.frames[this.frameIndex];this.running|=s,r[1]|=s,r[5]=t,r[6]=e,r[7]=n,r[8]=i}},{key:"setScale",value:function(t,e,n){var i=this.frames[this.frameIndex];this.running|=a,i[1]|=a,i[9]=t,i[10]=e,i[11]=n}},{key:"step",value:function(t,e){if(0===(this.running&t))return!1;var n=this.frames;if(this.frameIndex===-1)return!1;for(var i=performance.now()-this.bufferTimeMs,r=void 0,d=void 0,f=n.length;f>=1;f--){var l=(this.frameIndex+f)%this.frames.length,p=n[l];if(0!==p[0]&&p[1]&t){if(0===(this.firstTypeFlags&t))return this.firstTypeFlags|=t,t===o?(e.x=p[2],e.y=p[3],e.z=p[4]):t===s?(e.x=p[5],e.y=p[6],e.z=p[7],e.w=p[8]):t===a&&(e.x=p[9],e.y=p[10],e.z=p[11]),!0;if(p[0]<=i){r=p;for(var y=1;y<n.length;y++){var b=(l+y)%this.frames.length;if(n[b][1]&t&&0!==n[b][0]&&n[b][0]>r[0]){d=n[b];break}}break}}}var v=r&&!d&&performance.now()-r[0]>h;if(!(v||r&&d))return!1;var m=1,w=e.x,g=e.y,T=e.z;if(v){if(this.running&=~t,t===o)return e.x=r[2],e.y=r[3],e.z=r[4],Math.abs(w-e.x)>c||Math.abs(g-e.y)>c||Math.abs(T-e.z)>c;if(t===s){var _=e.w;return e.x=r[5],e.y=r[6],e.z=r[7],e.w=r[8],Math.abs(w-e.x)>c||Math.abs(g-e.y)>c||Math.abs(T-e.z)>c||Math.abs(_-e.w)>c}if(t===a)return e.x=r[9],e.y=r[10],e.z=r[11],Math.abs(w-e.x)>c||Math.abs(g-e.y)>c||Math.abs(T-e.z)>c}else{var I=d[0],O=r[0],E=i-O,k=I-O;if(m=E/k,t===o){var N=r[2],F=r[3],C=r[4],V=d[2],A=d[3],S=d[4],D=N-V,L=F-A,U=C-S,R=D*D+L*L+U*U;return R>=this.maxLerpDistanceSq?(e.x=V,e.y=A,e.z=S):(e.x=this.lerp(N,V,m),e.y=this.lerp(F,A,m),e.z=this.lerp(C,S,m)),Math.abs(w-e.x)>c||Math.abs(g-e.y)>c||Math.abs(T-e.z)>c}if(t===s){var P=e.w;return e.x=r[5],e.y=r[6],e.z=r[7],e.w=r[8],u.x=d[5],u.y=d[6],u.z=d[7],u.w=d[8],e.slerp(u,m),Math.abs(w-e.x)>c||Math.abs(g-e.y)>c||Math.abs(T-e.z)>c||Math.abs(P-e.w)>c}if(t===a)return e.x=this.lerp(r[9],d[9],m),e.y=this.lerp(r[10],d[10],m),e.z=this.lerp(r[11],d[11],m),Math.abs(w-e.x)>c||Math.abs(g-e.y)>c||Math.abs(T-e.z)>c}}}]),t}();t.exports={Lerper:d,TYPE_POSITION:o,TYPE_QUATERNION:s,TYPE_SCALE:a}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.debug=!1}return i(t,[{key:"setDebug",value:function(t){this.debug=t}},{key:"write",value:function(){this.debug&&console.log.apply(this,arguments)}},{key:"warn",value:function(){console.warn.apply(this,arguments)}},{key:"error",value:function(){console.error.apply(this,arguments)}}]),t}();t.exports=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(11),s=o.Builder,a={Update:"u",Remove:"r"},u=new s(1024),h=n(27).Message,c=n(14).CustomOp,d=function(t){for(var e="",n=0,i=t.byteLength;n<i;n++)e+=String.fromCharCode(t[n]);return e},f=function(){function t(e){i(this,t),this.entities=e,this.dataChannelSubs={},this.connectedClients={},this.activeDataChannels={}}return r(t,[{key:"setNetworkAdapter",value:function(t){this.adapter=t}},{key:"connect",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];return NAF.app=e,NAF.room=n,this.adapter.setServerUrl(t),this.adapter.setApp(e),this.adapter.setRoom(n),this.adapter.setServerConnectListeners(this.connectSuccess.bind(this),this.connectFailure.bind(this)),this.adapter.setDataChannelListeners(this.dataChannelOpen.bind(this),this.dataChannelClosed.bind(this),this.receivedData.bind(this)),this.adapter.setRoomOccupantListener(this.occupantsReceived.bind(this)),this.adapter.connect()}},{key:"onConnect",value:function(t){this.onConnectCallback=t,this.isConnected()?t():document.body.addEventListener("connected",t,!1)}},{key:"connectSuccess",value:function(t){NAF.log.write("Networked-Aframe Client ID:",t),NAF.clientId=t;var e=new CustomEvent("connected",{detail:{clientId:t}});document.body.dispatchEvent(e)}},{key:"connectFailure",value:function(t,e){NAF.log.error(t,"failure to connect")}},{key:"occupantsReceived",value:function(t){var e=Object.assign({},this.connectedClients);this.connectedClients=t,this.checkForDisconnectingClients(e,t),this.checkForConnectingClients(t)}},{key:"checkForDisconnectingClients",value:function(t,e){for(var n in t){var i=e.hasOwnProperty(n);i||(NAF.log.write("Closing stream to ",n),this.adapter.closeStreamConnection(n))}}},{key:"checkForConnectingClients",value:function(t){for(var e in t){var n=this.isNewClient(e)&&this.adapter.shouldStartConnectionTo(t[e]);n&&(NAF.log.write("Opening datachannel to ",e),this.adapter.startStreamConnection(e))}}},{key:"getConnectedClients",value:function(){return this.connectedClients}},{key:"isConnected",value:function(){return!!NAF.clientId}},{key:"isMineAndConnected",value:function(t){return this.isConnected()&&NAF.clientId===t}},{key:"isNewClient",value:function(t){return!this.isConnectedTo(t)}},{key:"isConnectedTo",value:function(t){return this.adapter.getConnectStatus(t)===NAF.adapters.IS_CONNECTED}},{key:"dataChannelOpen",value:function(t){NAF.log.write("Opened data channel from "+t),this.activeDataChannels[t]=!0,this.entities.completeSync(t,!0);var e=new CustomEvent("clientConnected",{detail:{clientId:t}});document.body.dispatchEvent(e)}},{key:"dataChannelClosed",value:function(t){NAF.log.write("Closed data channel from "+t),this.activeDataChannels[t]=!1,this.entities.removeEntitiesOfClient(t);var e=new CustomEvent("clientDisconnected",{detail:{clientId:t}});document.body.dispatchEvent(e)}},{key:"hasActiveDataChannel",value:function(t){return this.activeDataChannels.hasOwnProperty(t)&&this.activeDataChannels[t]}},{key:"broadcastData",value:function(t){this.adapter.broadcastData(t)}},{key:"broadcastDataGuaranteed",value:function(t){this.adapter.broadcastDataGuaranteed(t)}},{key:"broadcastCustomData",value:function(t,e,n){this.fillBuilderWithCustomData(t,e),n?NAF.connection.broadcastDataGuaranteed(d(u.asUint8Array())):NAF.connection.broadcastData(d(u.asUint8Array()))}},{key:"broadcastCustomDataGuaranteed",value:function(t,e){this.broadcastCustomData(t,e,!0)}},{key:"sendData",value:function(t,e,n){this.hasActiveDataChannel(e)&&(n?this.adapter.sendDataGuaranteed(t,e):this.adapter.sendData(t,e))}},{key:"sendDataGuaranteed",value:function(t,e){this.sendData(t,e,!0)}},{key:"fillBuilderWithCustomData",value:function(t,e){u.clear();var n=c.createCustomOp(u,u.createSharedString(t),u.createString(JSON.stringify(e))),i=h.createCustomsVector(u,[n]);h.startMessage(u),h.addCustoms(u,i);var r=h.endMessage(u);u.finish(r)}},{key:"sendCustomData",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.fillBuilderWithCustomData(t,e),i?NAF.connection.sendDataGuaranteed(d(u.asUint8Array()),n):NAF.connection.sendData(d(u.asUint8Array()),n)}},{key:"sendCustomDataGuaranteed",value:function(t,e,n){this.sendCustomData(t,e,n,!0)}},{key:"subscribeToDataChannel",value:function(t,e){this.dataChannelSubs[t]=e}},{key:"unsubscribeToDataChannel",value:function(t){delete this.dataChannelSubs[t]}},{key:"isReservedDataType",value:function(t){return t==a.Update||t==a.Remove}},{key:"receivedData",value:function(t,e,n){AFRAME.scenes[0].systems.networked.enqueueIncoming(t,e,n)}},{key:"getServerTime",value:function(){return this.adapter.getServerTime()}},{key:"disconnect",value:function(){this.entities.removeRemoteEntities(),this.adapter.disconnect(),NAF.app="",NAF.room="",NAF.clientId="",this.connectedClients={},this.activeDataChannels={},this.adapter=null,document.body.removeEventListener("connected",this.onConnectCallback)}}]),t}();t.exports=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(39),s=n(21),a=n(15).FullUpdateData,u=n(16).UpdateOp,h=new a,c=[];c.length=16;var d=function(){function t(){i(this,t),this.entities={},this.childCache=new o,this.onRemoteEntityCreatedEvent=new Event("remoteEntityCreated"),this._persistentFirstSyncs={},this.positionNormalizer=null,this.positionDenormalizer=null}return r(t,[{key:"registerEntity",value:function(t,e){this.entities[t]=e}},{key:"createRemoteEntity",value:function(t){var e=t.networkId(),n=t.fullUpdateData(h),i=n.template();NAF.log.write("Creating remote entity",e,i);var r=NAF.schemas.getCachedTemplate(i);return this.addNetworkComponent(r,t),r}},{key:"addNetworkComponent",value:function(t,e){for(var n=e.networkId(),i=e.fullUpdateData(h),r=0;r<16;r++)c[r]=e.owner(r);for(var o=s.stringify(c),a=0;a<16;a++)c[a]=i.creator(a);var d=s.stringify(c),f=i.template(),l=i.persistent();t.firstUpdateRef=new u,t.firstUpdateRef.bb=e.bb,t.firstUpdateRef.bb_pos=e.bb_pos,t.setAttribute("networked",{template:f,owner:o,creator:d,networkId:n,persistent:l})}},{key:"updateEntity",value:function(t,e,n){if(!NAF.options.syncSource||e===NAF.options.syncSource){for(var i=null!=t.fullUpdateData(h),r=t.networkId(),o=0;o<16;o++)c[o]=t.owner(o);var a=s.stringify(c);if(this.hasEntity(r)){var u=this.entities[r];u.components.networked.networkUpdate(t,n)}else if(i&&NAF.connection.activeDataChannels[a]!==!1){if(NAF.options.firstSyncSource&&e!==NAF.options.firstSyncSource)return void NAF.log.write("Ignoring first sync from disallowed source",e);NAF.connection.adapter.authorizeCreateEntity(h.template(),n)&&this.receiveFirstUpdateFromEntity(t,h)}}}},{key:"receiveFirstUpdateFromEntity",value:function(t,e){var n=t.networkId(),i=e.parentId(),r=i&&!this.hasEntity(i);if(r)this.childCache.addChild(i,t);else{var o=this.createRemoteEntity(t);this.createAndAppendChildren(n,o),this.addEntityToPage(o,i)}}},{key:"createAndAppendChildren",value:function(t,e){for(var n=this.childCache.getChildren(t),i=0;i<n.length;i++){var r=n[i],o=r.networkId();if(this.hasEntity(o))NAF.log.warn("Tried to instantiate entity multiple times",o,"Existing entity:",this.getEntity(o));else{var s=this.createRemoteEntity(r);this.createAndAppendChildren(o,s),e.appendChild(s)}}}},{key:"addEntityToPage",value:function(t,e){this.hasEntity(e)?this.addEntityToParent(t,e):this.addEntityToSceneRoot(t)}},{key:"addEntityToParent",value:function(t,e){this.entities[e].appendChild(t)}},{key:"addEntityToSceneRoot",value:function(t){var e=document.querySelector("a-scene");e.appendChild(t)}},{key:"completeSync",value:function(t,e){for(var n in this.entities)this.entities.hasOwnProperty(n)&&this.entities[n].components.networked.syncAll(t,e)}},{key:"removeRemoteEntity",value:function(t,e,n){if(!NAF.options.syncSource||e===NAF.options.syncSource){var i=t.networkId(),r=this.entities[i];if(r&&NAF.connection.adapter.authorizeEntityManipulation(r,n))return this.removeEntity(i)}}},{key:"removeEntitiesOfClient",value:function(t){var e=[];for(var n in this.entities){var i=NAF.utils.getCreator(this.entities[n]);if(i===t){var r=void 0,o=this.entities[n].getAttribute("networked");if(o&&o.persistent&&(r=NAF.utils.isMine(this.entities[n])||NAF.utils.takeOwnership(this.entities[n])),!r){var s=this.removeEntity(n);e.push(s)}}}return e}},{key:"removeEntity",value:function(t){if(!this.hasEntity(t))return NAF.log.error("Tried to remove entity I don't have."),null;var e=this.entities[t],n=function t(e){for(var n=e.children,i=0;i<n.length;i++)t(n[i]);e.parentNode&&e.parentNode.removeChild(e)};return n(e),e}},{key:"forgetEntity",value:function(t){delete this.entities[t]}},{key:"getEntity",value:function(t){return this.hasEntity(t)?this.entities[t]:null}},{key:"hasEntity",value:function(t){return this.entities.hasOwnProperty(t)}},{key:"removeRemoteEntities",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.childCache=new o;for(var n in this.entities){var i=this.entities[n];if(!e.includes(i)){var r=i.getAttribute("networked").owner;(t||r!=NAF.clientId)&&this.removeEntity(n)}}}},{key:"setPositionNormalizer",value:function(t){this.positionNormalizer=t}},{key:"setPositionDenormalizer",value:function(t){this.positionDenormalizer=t}}]),t}();t.exports=d},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.schemaDict={},this.templateCache={}}return i(t,[{key:"createDefaultSchema",value:function(t){return{template:t,components:["position","rotation"]}}},{key:"add",value:function(t){if(this.validateSchema(t)){this.schemaDict[t.template]=t;var e=document.querySelector(t.template);if(!e)return void NAF.log.error("Template el not found for "+t.template+", make sure NAF.schemas.add is called after <a-scene> is defined.");if(!this.validateTemplate(t,e))return;this.templateCache[t.template]=document.importNode(e.content,!0)}else NAF.log.error("Schema not valid: ",t),NAF.log.error("See https://github.com/haydenjameslee/networked-aframe#syncing-custom-components")}},{key:"getCachedTemplate",value:function(t){return this.templateIsCached(t)||(this.templateExistsInScene(t)?this.add(this.createDefaultSchema(t)):NAF.log.error("Template el for "+t+" is not in the scene, add the template to <a-assets> and register with NAF.schemas.add.")),this.templateCache[t].firstElementChild.cloneNode(!0)}},{key:"templateIsCached",value:function(t){return this.templateCache.hasOwnProperty(t)}},{key:"getComponents",value:function(t){var e=["position","rotation"];return this.hasTemplate(t)&&(e=this.schemaDict[t].components),e}},{key:"hasTemplate",value:function(t){return this.schemaDict.hasOwnProperty(t)}},{key:"templateExistsInScene",value:function(t){var e=document.querySelector(t);return e&&this.isTemplateTag(e)}},{key:"validateSchema",value:function(t){return t.hasOwnProperty("template")&&t.hasOwnProperty("components")}},{key:"validateTemplate",value:function(t,e){return this.isTemplateTag(e)?!!this.templateHasOneOrZeroChildren(e)||(NAF.log.error("Template for "+t.template+" has more than one child. Templates must have one direct child element, no more. Template found:",e),!1):(NAF.log.error("Template for "+t.template+" is not a <template> tag. Instead found: "+e.tagName),!1)}},{key:"isTemplateTag",value:function(t){return"template"===t.tagName.toLowerCase()}},{key:"templateHasOneOrZeroChildren",value:function(t){return t.content.childElementCount<2}},{key:"remove",value:function(t){delete this.schemaDict[t]}},{key:"clear",value:function(){this.schemaDict={}}}]),t}();t.exports=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.adapters={},this.IS_CONNECTED=t.IS_CONNECTED,this.CONNECTING=t.CONNECTING,this.NOT_CONNECTED=t.NOT_CONNECTED}return i(t,[{key:"register",value:function(t,e){this.adapters[t]=e}},{key:"make",value:function(t){var e=t.toLowerCase();if(this.adapters[e]){var n=this.adapters[e];return new n}throw new Error("Adapter: "+t+" not registered. Please use NAF.adapters.register() to register this adapter.")}}]),t}();r.IS_CONNECTED="IS_CONNECTED",r.CONNECTING="CONNECTING",r.NOT_CONNECTED="NOT_CONNECTED",t.exports=r},function(t,e,n){"use strict";var i=n(25);AFRAME.registerComponent("networked-audio-source",{schema:{positional:{default:!0},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},maxDistance:{default:1e4},refDistance:{default:1},rolloffFactor:{default:1}},init:function(){var t=this;this.listener=null,this.stream=null,this._setMediaStream=this._setMediaStream.bind(this),NAF.utils.getNetworkedEntity(this.el).then(function(e){var n=e.components.networked.data.owner;n&&NAF.connection.adapter.getMediaStream(n).then(t._setMediaStream).catch(function(t){return i.log.error("Error getting media stream for "+n,t)})})},update:function(){this._setPannerProperties()},_setMediaStream:function(t){if(this.sound||this.setupSound(),t!=this.stream){if(this.stream&&this.sound.disconnect(),t){/chrome/i.test(navigator.userAgent)&&(this.audioEl=new Audio,this.audioEl.setAttribute("autoplay","autoplay"),this.audioEl.setAttribute("playsinline","playsinline"),this.audioEl.srcObject=t,this.audioEl.volume=0);var e=this.sound.context.createMediaStreamSource(t);this.sound.setNodeSource(e),this.el.emit("sound-source-set",{soundSource:e})}this.stream=t}},_setPannerProperties:function(){this.sound&&this.data.positional&&(this.sound.setDistanceModel(this.data.distanceModel),this.sound.setMaxDistance(this.data.maxDistance),this.sound.setRefDistance(this.data.refDistance),this.sound.setRolloffFactor(this.data.rolloffFactor))},remove:function(){this.sound&&(this.el.removeObject3D(this.attrName),this.stream&&this.sound.disconnect())},setupSound:function(){var t=this.el,e=t.sceneEl;this.sound&&t.removeObject3D(this.attrName),e.audioListener||(e.audioListener=new THREE.AudioListener,e.camera&&e.camera.add(e.audioListener),e.addEventListener("camera-set-active",function(t){t.detail.cameraEl.getObject3D("camera").add(e.audioListener)})),this.listener=e.audioListener,this.sound=this.data.positional?new THREE.PositionalAudio(this.listener):new THREE.Audio(this.listener),t.setObject3D(this.attrName,this.sound),this._setPannerProperties()}})},function(t,e){"use strict";AFRAME.registerComponent("networked-scene",{schema:{serverURL:{default:"/"},app:{default:"default"},room:{default:"default"},connectOnLoad:{default:!0},onConnect:{default:"onConnect"},adapter:{default:"wsEasyRtc"},audio:{default:!1},debug:{default:!1}},init:function(){var t=this.el;this.connect=this.connect.bind(this),t.addEventListener("connect",this.connect),this.data.connectOnLoad&&t.emit("connect",null,!1)},connect:function(){return NAF.log.setDebug(this.data.debug),NAF.log.write("Networked-Aframe Connecting..."),this.checkDeprecatedProperties(),this.setupNetworkAdapter(),this.hasOnConnectFunction()&&this.callOnConnect(),NAF.connection.connect(this.data.serverURL,this.data.app,this.data.room,this.data.audio)},checkDeprecatedProperties:function(){},setupNetworkAdapter:function(){var t=this.data.adapter,e=NAF.adapters.make(t);NAF.connection.setNetworkAdapter(e),this.el.emit("adapter-ready",e,!1)},hasOnConnectFunction:function(){return""!=this.data.onConnect&&window.hasOwnProperty(this.data.onConnect)},callOnConnect:function(){NAF.connection.onConnect(window[this.data.onConnect])},remove:function(){NAF.log.write("networked-scene disconnected"),this.el.removeEventListener("connect",this.connect),NAF.connection.disconnect()}})},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){e.length=16;var n;return e[0]=(n=parseInt(t.slice(0,8),16))>>>24,e[1]=n>>>16&255,e[2]=n>>>8&255,e[3]=255&n,e[4]=(n=parseInt(t.slice(9,13),16))>>>8,e[5]=255&n,e[6]=(n=parseInt(t.slice(14,18),16))>>>8,e[7]=255&n,e[8]=(n=parseInt(t.slice(19,23),16))>>>8,e[9]=255&n,e[10]=(n=parseInt(t.slice(24,36),16))/1099511627776&255,e[11]=n/4294967296&255,e[12]=n>>>24&255,e[13]=n>>>16&255,e[14]=n>>>8&255,e[15]=255&n,e}function s(){var t=null;return function(e){return null===t&&null!==e?(t=AFRAME.utils.clone(e),!1):(null===t&&null!==e||!O(t,e))&&(t=AFRAME.utils.clone(e),!0)}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=n(18),h=n(5),c=h.Reference,d=n(12),f=d.ByteBuffer,l=n(11),p=l.Builder,y=n(2),b=y.fromByteWidth,v=n(41),m=v.refCp,w=v.refGetNumeric,g=v.refGetInt,T=v.refGetToObject,_=v.refAdvanceToIndexGet,I=n(21),O=n(40),E=THREE.Math.DEG2RAD,k=["position","rotation","scale"],N=n(42),F=N.Lerper,C=N.TYPE_POSITION,V=N.TYPE_QUATERNION,A=N.TYPE_SCALE,S=new THREE.Vector3,D=new THREE.Quaternion,L=16366e8,U=n(27).Message,R=n(15).FullUpdateData,P=n(16).UpdateOp,B=n(26).DeleteOp,W=n(14).CustomOp,M=[],j=[],x=new R,H=new U,G=new P,z=new B,K=new W,Z=1e4,Y=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n},q=new u.toReference(new ArrayBuffer(4)),X=new p(1024),Q=new u.builder;Q.dedupStrings=!1,Q.dedupKeys=!1,Q.dedupKeyVectors=!1;var J=new Uint8Array(Q.buffer),$=function(){J.fill(0),Q.stack.length=0,Q.stackPointers.length=0,Q.offset=0,Q.finished=!1},tt=new Map,et=function(t){for(var e="",n=0,i=t.byteLength;n<i;n++)e+=String.fromCharCode(t[n]);return e};AFRAME.registerSystem("networked",{init:function(){var t=this;this.components=[],this.incomingData=[],this.incomingSources=[],this.incomingSenders=[],this.incomingPaused=!1,this.instantiatingNetworkIds=new Map,this.nextSyncTime=0;var e=!1;setInterval(function(){if(!e&&NAF.connection.adapter){e=!0;try{if(performance.now()<t.nextSyncTime)return;t.incomingPaused||t.performReceiveStep(),t.performSendStep()}finally{e=!1}}},1e3/60)},register:function(t){this.components.push(t)},deregister:function(t){var e=this.components.indexOf(t);e>-1&&this.components.splice(e,1)},enqueueIncoming:function(t,e,n){this.incomingData.push(t),this.incomingSources.push(e),this.incomingSenders.push(n)},performReceiveStep:function(){var t=this.incomingData,e=this.incomingSources,n=this.incomingSenders;t:for(var i=0,r=t.length;i<r;i++){var o=t.shift(),s=e.shift(),a=n.shift();U.getRootAsMessage(new f(Y(o)),H);for(var u=performance.now(),h=0,c=H.updatesLength();h<c;h++){H.updates(h,G);var d=G.networkId(),l=NAF.entities.hasEntity(d),p=null!=G.fullUpdateData(x);if(l)this.instantiatingNetworkIds.size>0&&this.instantiatingNetworkIds.has(d)&&this.instantiatingNetworkIds.delete(d);else{if(p&&x.persistent()){t.push(o),e.push(s),n.push(a);continue t}var y=p&&!this.instantiatingNetworkIds.has(d);if(!y){(!this.instantiatingNetworkIds.has(d)||u-this.instantiatingNetworkIds.get(d)<Z)&&(t.push(o),e.push(s),n.push(a));continue t}this.instantiatingNetworkIds.set(d,performance.now())}}for(var b=0,v=H.updatesLength();b<v;b++)H.updates(b,G),NAF.entities.updateEntity(G,s,a);for(var m=0,w=H.deletesLength();m<w;m++)H.deletes(m,z),NAF.entities.removeRemoteEntity(z,s,a);for(var g=0,T=H.customsLength();g<T;g++){H.customs(g,K);var _=K.dataType();NAF.connection.dataChannelSubs[_]&&NAF.connection.dataChannelSubs[_](_,JSON.parse(K.payload()))}}},performSendStep:function(){for(var t=!1,e=!1,n=0,i=this.components.length;n<i;n++){var r=this.components[n];if(r.isMine()&&r.canSync())if(r.el.parentElement){var s=!1;if(r.pendingFullSync&&(s=!0,r.pendingFullSync=!1),$(),r.pushComponentsDataToFlexBuilder(s)){t||(X.clear(),j.length=0,t=!0);var a=P.createComponentsVector(X,new Uint8Array(Q.finish())),u=P.createOwnerVector(X,o(r.data.owner,M)),h=null;s&&(e=!0,h=R.createFullUpdateData(X,R.createCreatorVector(X,o(r.data.creator,M)),X.createSharedString(r.data.template),r.data.persistent,X.createSharedString(r.getParentId())));var c=X.createSharedString(r.data.networkId);P.startUpdateOp(X),P.addNetworkId(X,c),P.addOwner(X,u),P.addLastOwnerTime(X,r.lastOwnerTime-L),P.addComponents(X,a),null!==h&&P.addFullUpdateData(X,h),j.push(P.endUpdateOp(X))}}else NAF.log.error("entity registered with system despite being removed")}if(t){var d=U.createUpdatesVector(X,j);U.startMessage(X),U.addUpdates(X,d);var f=U.endMessage(X);X.finish(f),e?NAF.connection.broadcastDataGuaranteed(et(X.asUint8Array())):NAF.connection.broadcastData(et(X.asUint8Array()))}this.updateNextSyncTime()},updateNextSyncTime:function(){this.nextSyncTime=performance.now()+1e3/NAF.options.updateRate}}),AFRAME.registerComponent("networked",{schema:{template:{default:""},attachTemplateToLocal:{default:!0},persistent:{default:!1},networkId:{default:""},owner:{default:""},creator:{default:""}},init:function(){this.OWNERSHIP_GAINED="ownership-gained",this.OWNERSHIP_CHANGED="ownership-changed",this.OWNERSHIP_LOST="ownership-lost",this.onOwnershipGainedEvent={el:this.el},this.onOwnershipChangedEvent={el:this.el},this.onOwnershipLostEvent={el:this.el},this.conversionEuler=new THREE.Euler,this.conversionEuler.order="YXZ",this.lerpers=[],this.pendingFullSync=!1;var t=this.wasCreatedByNetwork();this.onConnected=this.onConnected.bind(this),this.componentSchemas=NAF.schemas.getComponents(this.data.template),this.cachedElements=new Array(this.componentSchemas.length),this.sentFirstComponentSyncs=this.componentSchemas.map(function(){return!1}),this.networkUpdatePredicates=this.componentSchemas.map(function(t){return t.requiresNetworkUpdate&&t.requiresNetworkUpdate()||s()}),this.invalidateCachedElements(),this.initNetworkParent();var e=void 0;""===this.data.networkId?(e=NAF.utils.createNetworkId(),this.el.setAttribute(this.name,{networkId:e})):e=this.data.networkId,this.el.id||this.el.setAttribute("id","naf-"+e),t?this.firstUpdate():this.data.attachTemplateToLocal&&this.attachTemplateToLocal(),NAF.entities.registerEntity(e,this.el),this.lastOwnerTime=1,NAF.clientId?this.onConnected():document.body.addEventListener("connected",this.onConnected,!1),document.body.dispatchEvent(this.entityCreatedEvent()),this.el.dispatchEvent(new CustomEvent("instantiated",{detail:{el:this.el}})),this.el.sceneEl.systems.networked.register(this)},attachTemplateToLocal:function(){for(var t=NAF.schemas.getCachedTemplate(this.data.template),e=t.attributes,n=0;n<e.length;n++)this.el.setAttribute(e[n].name,e[n].value);for(;t.firstElementChild;)this.el.appendChild(t.firstElementChild)},takeOwnership:function(){var t=this.data.owner,e=this.lastOwnerTime,n=NAF.connection.getServerTime();return!!(t&&!this.isMine()&&e<n)&&(this.lastOwnerTime=n,this.removeLerp(),this.el.setAttribute("networked",{owner:NAF.clientId}),this.syncAll(),this.onOwnershipGainedEvent.oldOwner=t,this.el.emit(this.OWNERSHIP_GAINED,this.onOwnershipGainedEvent),this.onOwnershipChangedEvent.oldOwner=t,this.onOwnershipChangedEvent.newOwner=NAF.clientId,this.el.emit(this.OWNERSHIP_CHANGED,this.onOwnershipChangedEvent),!0)},wasCreatedByNetwork:function(){return!!this.el.firstUpdateRef},initNetworkParent:function(){var t=this.el.parentElement;t.hasOwnProperty("components")&&t.components.hasOwnProperty("networked")?this.parent=t:this.parent=null},firstUpdate:function(){
this.networkUpdate(this.el.firstUpdateRef,this.data.creator)},onConnected:function(){var t=this;this.positionNormalizer=NAF.entities.positionNormalizer,this.positionDenormalizer=NAF.entities.positionDenormalizer,""===this.data.owner&&(this.lastOwnerTime=NAF.connection.getServerTime(),this.el.setAttribute(this.name,{owner:NAF.clientId,creator:NAF.clientId}),this.el.object3D.matrixNeedsUpdate=!0,setTimeout(function(){return t.el.parentNode?void t.syncAll():void NAF.log.warn("Networked element was removed before ever getting the chance to syncAll")},0)),document.body.removeEventListener("connected",this.onConnected,!1)},isMine:function(){return this.data.owner===NAF.clientId},createdByMe:function(){return this.data.creator===NAF.clientId},tick:function(t,e){if(!this.isMine())for(var n=0;n<this.lerpers.length;n++){var i=this.lerpers[n],r=i.lerper,o=i.object3D,s=S;s.copy(o.position);var a=r.step(C,s);a&&(this.positionDenormalizer&&(s=this.positionDenormalizer(s,o.position)),o.position.copy(s));var u=r.step(V,o.quaternion),h=r.step(A,o.scale);(a||u||h)&&(o.matrixNeedsUpdate=!0)}},syncAll:function(){this.canSync()&&(this.pendingFullSync=!0)},getCachedElement:function(t){var e=this.cachedElements[t];if(e)return e;var n=this.componentSchemas[t];return n.selector?this.cachedElements[t]=this.el.querySelector(n.selector):this.cachedElements[t]=this.el},invalidateCachedElements:function(){for(var t=0;t<this.cachedElements.length;t++)this.cachedElements[t]=null},pushComponentsDataToFlexBuilder:function(t){for(var e=!1,n=0;n<this.componentSchemas.length;n++){var i=this.componentSchemas[n],o=this.getCachedElement(n);if(o){var s=i.component?i.component:i,u=o.getAttribute(s);if(null!==u){var h=i.property?u[i.property]:u;if(!this.sentFirstComponentSyncs[n]||this.networkUpdatePredicates[n](h)||t){e||Q.startVector();var c=h;if(this.positionNormalizer&&"position"===s&&(c=this.positionNormalizer(c,this.el)),null!==c){if(this.sentFirstComponentSyncs[n]=!0,e=!0,Q.startVector(),Q.addInt(n),k.includes(s))Q.addFloat(Math.fround(c.x)),Q.addFloat(Math.fround(c.y)),Q.addFloat(Math.fround(c.z));else if("object"===("undefined"==typeof c?"undefined":a(c))){tt.has(s)||tt.set(s,[].concat(r(Object.keys(AFRAME.components[s].schema))).sort());for(var d=tt.get(s),f=0;f<=d.length;f++){var l=d[f];if(void 0!==c[l]){Q.addInt(f);var p=c[l];"number"==typeof p?Number.isInteger(p)?p>2147483647||p<-2147483648?NAF.log.error("64 bit integers not supported",p,i):Q.add(p):Q.add(Math.fround(p)):Q.add(p)}}}else{Q.addInt(0);var y=c;"object"===("undefined"==typeof y?"undefined":a(y))?NAF.log.error("Schema should not set property for object or array values",y,i):"number"==typeof y?Number.isInteger(y)?y>2147483647||y<-2147483648?NAF.log.error("64 bit integers not supported",y,i):Q.add(y):Q.add(Math.fround(y)):Q.add(y)}Q.end()}}}}}return e&&Q.end(),e},canSync:function(){if(this.data.owner&&this.isMine())return!0;if(!this.createdByMe())return!1;var t=NAF.connection.getConnectedClients();for(var e in t)if(e===this.data.owner)return!1;return!0},getParentId:function(){if(this.initNetworkParent(),!this.parent)return null;var t=this.parent.getAttribute("networked");return t.networkId},networkUpdate:function(t,e){try{M.length=16;for(var n=0;n<16;n++)M[n]=t.owner(n);var i=I.stringify(M),r=t.lastOwnerTime()+L;if(r<this.lastOwnerTime||this.lastOwnerTime===r&&this.data.owner>i)return;var o=null!=t.fullUpdateData(x);if(o&&this.data.owner!==i){var s=this.isMine();this.lastOwnerTime=r;var a=this.data.owner,u=i;this.el.setAttribute("networked",{owner:i}),s&&(this.onOwnershipLostEvent.newOwner=u,this.el.emit(this.OWNERSHIP_LOST,this.onOwnershipLostEvent)),this.onOwnershipChangedEvent.oldOwner=a,this.onOwnershipChangedEvent.newOwner=u,this.el.emit(this.OWNERSHIP_CHANGED,this.onOwnershipChangedEvent)}o&&this.data.persistent!==x.persistent()&&this.el.setAttribute("networked",{persistent:x.persistent()});var h=t.componentsArray(),d=new DataView(h.buffer,h.byteOffset,h.byteLength),f=d.byteLength,l=d.getUint8(f-1),p=d.getUint8(f-2),y=b(l),v=f-l-2,m=new c(d,v,y,p,"/");this.updateNetworkedComponents(m,o,e)}catch(n){NAF.log.error("Error updating from network",e,t&&t.bb&&t.bb.bytes,n)}},updateNetworkedComponents:function(t,e,n){this.startLerpingFrame();for(var o=t.length(),s=0;s<o;s++){var a=q;m(t,a),_(a,s);var u=g(a,0),h=this.componentSchemas[u],c=this.getCachedElement(u);if(null!==c){var d=h.component?h.component:h;if(k.includes(d)){if(NAF.connection.adapter.authorizeEntityManipulation(this.el,n)){for(var f=w(a,1)||0,l=w(a,2)||0,p=w(a,3)||0,y=void 0,b=0,v=this.lerpers.length;b<v;b++){var I=this.lerpers[b];if(I.object3D===c.object3D){y=I.lerper;break}}switch(y||(y=new F(NAF.options.updateRate,NAF.options.maxLerpDistance),this.lerpers.push({lerper:y,object3D:c.object3D}),y.startFrame()),d){case"position":y.setPosition(f,l,p);break;case"rotation":this.conversionEuler.set(E*f,E*l,E*p),D.setFromEuler(this.conversionEuler),y.setQuaternion(D.x,D.y,D.z,D.w);break;case"scale":y.setScale(f,l,p);break;default:NAF.log.error("Could not set value in interpolation buffer.",c,d,f,l,p)}}}else if(h.property){var O=i({},h.property,T(a,2));NAF.connection.adapter.sanitizeComponentValues(this.el,d,O,n)&&c.setAttribute(d,O)}else{if(!tt.has(d)){var N=AFRAME.components[d].schema;N.default?tt.set(d,[]):tt.set(d,[].concat(r(Object.keys(AFRAME.components[d].schema))).sort())}var C=a.length();if(C>1){for(var V={},A=tt.get(d),S=1;S<C;S+=2){var L=g(a,S),U=T(a,S+1);if(0===A.length){V=U;break}V[A[L]]=U}NAF.connection.adapter.sanitizeComponentValues(this.el,d,V,n)&&c.setAttribute(d,V)}}}}},startLerpingFrame:function(){if(this.lerpers)for(var t=0;t<this.lerpers.length;t++)this.lerpers[t].lerper.startFrame()},removeLerp:function(){this.lerpers=[]},remove:function(){if(this.isMine()&&NAF.connection.isConnected())if(NAF.entities.hasEntity(this.data.networkId)){X.clear();var t=X.createString(this.data.networkId),e=B.createDeleteOp(X,t),n=U.createDeletesVector(X,[e]);U.startMessage(X),U.addDeletes(X,n);var i=U.endMessage(X);X.finish(i),NAF.connection.broadcastDataGuaranteed(et(X.asUint8Array()))}else NAF.log.error("Removing networked entity that is not in entities array.");NAF.entities.forgetEntity(this.data.networkId),document.body.dispatchEvent(this.entityRemovedEvent(this.data.networkId)),this.el.sceneEl.systems.networked.deregister(this)},entityCreatedEvent:function(){return new CustomEvent("entityCreated",{detail:{el:this.el}})},entityRemovedEvent:function(t){return new CustomEvent("entityRemoved",{detail:{networkId:t}})}})},function(t,e){"use strict";var n={debug:!1,updateRate:15,useLerp:!0,maxLerpDistance:null,firstSyncSource:null,syncSource:null};t.exports=n},function(t,e){"use strict";function n(t){return new Promise(function(e,n){for(var i=t;i&&i.components&&!i.components.networked;)i=i.parentNode;return i&&i.components&&i.components.networked?void(i.hasLoaded?e(i):i.addEventListener("instantiated",function(){e(i)},{once:!0})):n("Entity does not have and is not a child of an entity with the [networked] component ")})}t.exports.whenEntityLoaded=function(t,e){t.hasLoaded&&e(),t.addEventListener("loaded",function(){e()})},t.exports.createHtmlNodeFromString=function(t){var e=document.createElement("div");e.innerHTML=t;var n=e.firstChild;return n},t.exports.getCreator=function(t){var e=t.components;return e.hasOwnProperty("networked")?e.networked.data.creator:null},t.exports.getNetworkOwner=function(t){var e=t.components;return e.hasOwnProperty("networked")?e.networked.data.owner:null},t.exports.getNetworkId=function(t){var e=t.components;return e.hasOwnProperty("networked")?e.networked.data.networkId:null},t.exports.now=function(){return Date.now()},t.exports.createNetworkId=function(){return Math.random().toString(36).substring(2,9)},t.exports.getNetworkedEntity=n,t.exports.takeOwnership=function(t){for(var e=t;e&&e.components&&!e.components.networked;)e=e.parentNode;if(!e||!e.components||!e.components.networked)throw new Error("Entity does not have and is not a child of an entity with the [networked] component ");return e.components.networked.takeOwnership()},t.exports.isMine=function(t){for(var e=t;e&&e.components&&!e.components.networked;)e=e.parentNode;if(!e||!e.components||!e.components.networked)throw new Error("Entity does not have and is not a child of an entity with the [networked] component ");return e.components.networked.data.owner===NAF.clientId},t.exports.almostEqualVec3=function(t,e,n){return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n&&Math.abs(t.z-e.z)<n}}]);